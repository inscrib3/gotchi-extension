var Xu=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var yy=Xu((Ry,gi)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const{crypto:vr}=globalThis,oe=BigInt(0),ve=BigInt(1),Jt=BigInt(2),Wn=BigInt(3),so=BigInt(8),de=Object.freeze({a:oe,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:ve,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),io=(t,e)=>(t+e/Jt)/e,Er={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(t){const{n:e}=de,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-ve*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=io(i*t,e),f=io(-r*t,e);let h=R(t-a*n-f*s,e),l=R(-a*r-f*i,e);const p=h>o,y=l>o;if(p&&(h=e-h),y&&(l=e-l),h>o||l>o)throw new Error("splitScalarEndo: Endomorphism failed, k="+t);return{k1neg:p,k1:h,k2neg:y,k2:l}}},ht=32,gn=32,na=32,Vr=ht+1,qr=2*ht+1;function oo(t){const{a:e,b:n}=de,r=R(t*t),s=R(r*t);return R(s+e*t+n)}const Ar=de.a===oe;class hi extends Error{constructor(e){super(e)}}function ao(t){if(!(t instanceof ge))throw new TypeError("JacobianPoint expected")}class ge{constructor(e,n,r){this.x=e,this.y=n,this.z=r}static get BASE(){return new ge(de.Gx,de.Gy,ve)}static get ZERO(){return new ge(oe,ve,oe)}static fromAffine(e){if(!(e instanceof ae))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(ae.ZERO)?ge.ZERO:new ge(e.x,e.y,ve)}static toAffineBatch(e){const n=nf(e.map(r=>r.z));return e.map((r,s)=>r.toAffine(n[s]))}static normalizeZ(e){return ge.toAffineBatch(e).map(ge.fromAffine)}equals(e){ao(e);const{x:n,y:r,z:s}=this,{x:i,y:o,z:a}=e,f=R(s*s),h=R(a*a),l=R(n*h),p=R(i*f),y=R(R(r*a)*h),m=R(R(o*s)*f);return l===p&&y===m}negate(){return new ge(this.x,R(-this.y),this.z)}double(){const{x:e,y:n,z:r}=this,s=R(e*e),i=R(n*n),o=R(i*i),a=e+i,f=R(Jt*(R(a*a)-s-o)),h=R(Wn*s),l=R(h*h),p=R(l-Jt*f),y=R(h*(f-p)-so*o),m=R(Jt*n*r);return new ge(p,y,m)}add(e){ao(e);const{x:n,y:r,z:s}=this,{x:i,y:o,z:a}=e;if(i===oe||o===oe)return this;if(n===oe||r===oe)return e;const f=R(s*s),h=R(a*a),l=R(n*h),p=R(i*f),y=R(R(r*a)*h),m=R(R(o*s)*f),b=R(p-l),w=R(m-y);if(b===oe)return w===oe?this.double():ge.ZERO;const v=R(b*b),B=R(b*v),_=R(l*v),S=R(w*w-B-Jt*_),C=R(w*(_-S)-y*B),I=R(s*a*b);return new ge(S,C,I)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){const n=ge.ZERO;if(typeof e=="bigint"&&e===oe)return n;let r=fo(e);if(r===ve)return this;if(!Ar){let p=n,y=this;for(;r>oe;)r&ve&&(p=p.add(y)),y=y.double(),r>>=ve;return p}let{k1neg:s,k1:i,k2neg:o,k2:a}=Er.splitScalar(r),f=n,h=n,l=this;for(;i>oe||a>oe;)i&ve&&(f=f.add(l)),a&ve&&(h=h.add(l)),l=l.double(),i>>=ve,a>>=ve;return s&&(f=f.negate()),o&&(h=h.negate()),h=new ge(R(h.x*Er.beta),h.y,h.z),f.add(h)}precomputeWindow(e){const n=Ar?128/e+1:256/e+1,r=[];let s=this,i=s;for(let o=0;o<n;o++){i=s,r.push(i);for(let a=1;a<2**(e-1);a++)i=i.add(s),r.push(i);s=i.double()}return r}wNAF(e,n){!n&&this.equals(ge.BASE)&&(n=ae.BASE);const r=n&&n._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let s=n&&Ms.get(n);s||(s=this.precomputeWindow(r),n&&r!==1&&(s=ge.normalizeZ(s),Ms.set(n,s)));let i=ge.ZERO,o=ge.BASE;const a=1+(Ar?128/r:256/r),f=2**(r-1),h=BigInt(2**r-1),l=2**r,p=BigInt(r);for(let y=0;y<a;y++){const m=y*f;let b=Number(e&h);e>>=p,b>f&&(b-=l,e+=ve);const w=m,v=m+Math.abs(b)-1,B=y%2!==0,_=b<0;b===0?o=o.add(Sr(B,s[w])):i=i.add(Sr(_,s[v]))}return{p:i,f:o}}multiply(e,n){let r=fo(e),s,i;if(Ar){const{k1neg:o,k1:a,k2neg:f,k2:h}=Er.splitScalar(r);let{p:l,f:p}=this.wNAF(a,n),{p:y,f:m}=this.wNAF(h,n);l=Sr(o,l),y=Sr(f,y),y=new ge(R(y.x*Er.beta),y.y,y.z),s=l.add(y),i=p.add(m)}else{const{p:o,f:a}=this.wNAF(r,n);s=o,i=a}return ge.normalizeZ([s,i])[0]}toAffine(e){const{x:n,y:r,z:s}=this,i=this.equals(ge.ZERO);e==null&&(e=i?so:Zn(s));const o=e,a=R(o*o),f=R(a*o),h=R(n*a),l=R(r*f),p=R(s*o);if(i)return ae.ZERO;if(p!==ve)throw new Error("invZ was invalid");return new ae(h,l)}}function Sr(t,e){const n=e.negate();return t?n:e}const Ms=new WeakMap;let ae=class{constructor(e,n){this.x=e,this.y=n}_setWindowSize(e){this._WINDOW_SIZE=e,Ms.delete(this)}static get BASE(){return new ae(de.Gx,de.Gy)}static get ZERO(){return new ae(oe,oe)}hasEvenY(){return this.y%Jt===oe}static fromCompressedHex(e){const n=e.length===32,r=st(n?e:e.subarray(1));if(!Nr(r))throw new Error("Point is not on curve");const s=oo(r);let i=tf(s);const o=(i&ve)===ve;n?o&&(i=R(-i)):(e[0]&1)===1!==o&&(i=R(-i));const a=new ae(r,i);return a.assertValidity(),a}static fromUncompressedHex(e){const n=st(e.subarray(1,ht+1)),r=st(e.subarray(ht+1,ht*2+1)),s=new ae(n,r);return s.assertValidity(),s}static fromHex(e){const n=St(e),r=n.length,s=n[0];if(r===ht)return this.fromCompressedHex(n);if(r===Vr&&(s===2||s===3))return this.fromCompressedHex(n);if(r===qr&&s===4)return this.fromUncompressedHex(n);throw new Error(`Point.fromHex: received invalid point. Expected 32-${Vr} compressed bytes or ${qr} uncompressed bytes, not ${r}`)}static fromPrivateKey(e){return ae.BASE.multiply(yn(e))}static fromSignature(e,n,r){const{r:s,s:i}=ia(n);if(![0,1,2,3].includes(r))throw new Error("Cannot recover: invalid recovery bit");const o=li(St(e)),{n:a}=de,f=r===2||r===3?s+a:s,h=Zn(f,a),l=R(-o*h,a),p=R(i*h,a),y=r&1?"03":"02",m=ae.fromHex(y+Qt(f)),b=ae.BASE.multiplyAndAddUnsafe(m,l,p);if(!b)throw new Error("Cannot recover signature: point at infinify");return b.assertValidity(),b}toRawBytes(e=!1){return en(this.toHex(e))}toHex(e=!1){const n=Qt(this.x);return e?`${this.hasEvenY()?"02":"03"}${n}`:`04${n}${Qt(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const e="Point is not on elliptic curve",{x:n,y:r}=this;if(!Nr(n)||!Nr(r))throw new Error(e);const s=R(r*r),i=oo(n);if(R(s-i)!==oe)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new ae(this.x,R(-this.y))}double(){return ge.fromAffine(this).double().toAffine()}add(e){return ge.fromAffine(this).add(ge.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return ge.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,n,r){const s=ge.fromAffine(this),i=n===oe||n===ve||this!==ae.BASE?s.multiplyUnsafe(n):s.multiply(n),o=ge.fromAffine(e).multiplyUnsafe(r),a=i.add(o);return a.equals(ge.ZERO)?void 0:a.toAffine()}};function co(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}function uo(t){if(t.length<2||t[0]!==2)throw new Error(`Invalid signature integer tag: ${Pn(t)}`);const e=t[1],n=t.subarray(2,e+2);if(!e||n.length!==e)throw new Error("Invalid signature integer: wrong length");if(n[0]===0&&n[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:st(n),left:t.subarray(e+2)}}function Ju(t){if(t.length<2||t[0]!=48)throw new Error(`Invalid signature tag: ${Pn(t)}`);if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");const{data:e,left:n}=uo(t.subarray(2)),{data:r,left:s}=uo(n);if(s.length)throw new Error(`Invalid signature: left bytes after parsing: ${Pn(s)}`);return{r:e,s:r}}class $t{constructor(e,n){this.r=e,this.s=n,this.assertValidity()}static fromCompact(e){const n=e instanceof Uint8Array,r="Signature.fromCompact";if(typeof e!="string"&&!n)throw new TypeError(`${r}: Expected string or Uint8Array`);const s=n?Pn(e):e;if(s.length!==128)throw new Error(`${r}: Expected 64-byte hex`);return new $t(Kr(s.slice(0,64)),Kr(s.slice(64,128)))}static fromDER(e){const n=e instanceof Uint8Array;if(typeof e!="string"&&!n)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r,s}=Ju(n?e:en(e));return new $t(r,s)}static fromHex(e){return this.fromDER(e)}assertValidity(){const{r:e,s:n}=this;if(!Hn(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Hn(n))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const e=de.n>>ve;return this.s>e}normalizeS(){return this.hasHighS()?new $t(this.r,R(-this.s,de.n)):this}toDERRawBytes(){return en(this.toDERHex())}toDERHex(){const e=co(Vn(this.s)),n=co(Vn(this.r)),r=e.length/2,s=n.length/2,i=Vn(r),o=Vn(s);return`30${Vn(s+r+4)}02${o}${n}02${i}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return en(this.toCompactHex())}toCompactHex(){return Qt(this.r)+Qt(this.s)}}function Yt(...t){if(!t.every(r=>r instanceof Uint8Array))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];const e=t.reduce((r,s)=>r+s.length,0),n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const Qu=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Pn(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");let e="";for(let n=0;n<t.length;n++)e+=Qu[t[n]];return e}const ef=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function Qt(t){if(typeof t!="bigint")throw new Error("Expected bigint");if(!(oe<=t&&t<ef))throw new Error("Expected number 0 <= n < 2^256");return t.toString(16).padStart(64,"0")}function Cn(t){const e=en(Qt(t));if(e.length!==32)throw new Error("Error: expected 32 bytes");return e}function Vn(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function Kr(t){if(typeof t!="string")throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function en(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+t.length);const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const r=n*2,s=t.slice(r,r+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");e[n]=i}return e}function st(t){return Kr(Pn(t))}function St(t){return t instanceof Uint8Array?Uint8Array.from(t):en(t)}function fo(t){if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)return BigInt(t);if(typeof t=="bigint"&&Hn(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function R(t,e=de.P){const n=t%e;return n>=oe?n:e+n}function ot(t,e){const{P:n}=de;let r=t;for(;e-- >oe;)r*=r,r%=n;return r}function tf(t){const{P:e}=de,n=BigInt(6),r=BigInt(11),s=BigInt(22),i=BigInt(23),o=BigInt(44),a=BigInt(88),f=t*t*t%e,h=f*f*t%e,l=ot(h,Wn)*h%e,p=ot(l,Wn)*h%e,y=ot(p,Jt)*f%e,m=ot(y,r)*y%e,b=ot(m,s)*m%e,w=ot(b,o)*b%e,v=ot(w,a)*w%e,B=ot(v,o)*b%e,_=ot(B,Wn)*h%e,S=ot(_,i)*m%e,C=ot(S,n)*f%e,I=ot(C,Jt);if(I*I%e!==t)throw new Error("Cannot find square root");return I}function Zn(t,e=de.P){if(t===oe||e<=oe)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=R(t,e),r=e,s=oe,i=ve;for(;n!==oe;){const a=r/n,f=r%n,h=s-i*a;r=n,n=f,s=i,i=h}if(r!==ve)throw new Error("invert: does not exist");return R(s,e)}function nf(t,e=de.P){const n=new Array(t.length),r=t.reduce((i,o,a)=>o===oe?i:(n[a]=i,R(i*o,e)),ve),s=Zn(r,e);return t.reduceRight((i,o,a)=>o===oe?i:(n[a]=R(i*n[a],e),R(i*o,e)),s),n}function rf(t){const e=t.length*8-gn*8,n=st(t);return e>0?n>>BigInt(e):n}function li(t,e=!1){const n=rf(t);if(e)return n;const{n:r}=de;return n>=r?n-r:n}let $n,Yn;class ra{constructor(e,n){if(this.hashLen=e,this.qByteLen=n,typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof n!="number"||n<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(e).fill(1),this.k=new Uint8Array(e).fill(0),this.counter=0}hmac(...e){return Fe.hmacSha256(this.k,...e)}hmacSync(...e){return Yn(this.k,...e)}checkSync(){if(typeof Yn!="function")throw new hi("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),e.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),e.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){this.incr();let e=0;const n=[];for(;e<this.qByteLen;){this.v=await this.hmac(this.v);const r=this.v.slice();n.push(r),e+=this.v.length}return Yt(...n)}generateSync(){this.checkSync(),this.incr();let e=0;const n=[];for(;e<this.qByteLen;){this.v=this.hmacSync(this.v);const r=this.v.slice();n.push(r),e+=this.v.length}return Yt(...n)}}function Hn(t){return oe<t&&t<de.n}function Nr(t){return oe<t&&t<de.P}function sa(t,e,n,r=!0){const{n:s}=de,i=li(t,!0);if(!Hn(i))return;const o=Zn(i,s),a=ae.BASE.multiply(i),f=R(a.x,s);if(f===oe)return;const h=R(o*R(e+n*f,s),s);if(h===oe)return;let l=new $t(f,h),p=(a.x===l.r?0:2)|Number(a.y&ve);return r&&l.hasHighS()&&(l=l.normalizeS(),p^=1),{sig:l,recovery:p}}function yn(t){let e;if(typeof t=="bigint")e=t;else if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if(typeof t=="string"){if(t.length!==2*gn)throw new Error("Expected 32 bytes of private key");e=Kr(t)}else if(t instanceof Uint8Array){if(t.length!==gn)throw new Error("Expected 32 bytes of private key");e=st(t)}else throw new TypeError("Expected valid private key");if(!Hn(e))throw new Error("Expected private key: 0 < key < n");return e}function di(t){return t instanceof ae?(t.assertValidity(),t):ae.fromHex(t)}function ia(t){if(t instanceof $t)return t.assertValidity(),t;try{return $t.fromDER(t)}catch{return $t.fromCompact(t)}}function sf(t,e=!1){return ae.fromPrivateKey(t).toRawBytes(e)}function of(t,e,n,r=!1){return ae.fromSignature(t,e,n).toRawBytes(r)}function ho(t){const e=t instanceof Uint8Array,n=typeof t=="string",r=(e||n)&&t.length;return e?r===Vr||r===qr:n?r===Vr*2||r===qr*2:t instanceof ae}function af(t,e,n=!1){if(ho(t))throw new TypeError("getSharedSecret: first arg must be private key");if(!ho(e))throw new TypeError("getSharedSecret: second arg must be public key");const r=di(e);return r.assertValidity(),r.multiply(yn(t)).toRawBytes(n)}function oa(t){const e=t.length>ht?t.slice(0,ht):t;return st(e)}function cf(t){const e=oa(t),n=R(e,de.n);return aa(n<oe?e:n)}function aa(t){return Cn(t)}function ca(t,e,n){if(t==null)throw new Error(`sign: expected valid message hash, not "${t}"`);const r=St(t),s=yn(e),i=[aa(s),cf(r)];if(n!=null){n===!0&&(n=Fe.randomBytes(ht));const f=St(n);if(f.length!==ht)throw new Error(`sign: Expected ${ht} bytes of extra data`);i.push(f)}const o=Yt(...i),a=oa(r);return{seed:o,m:a,d:s}}function ua(t,e){const{sig:n,recovery:r}=t,{der:s,recovered:i}=Object.assign({canonical:!0,der:!0},e),o=s?n.toDERRawBytes():n.toCompactRawBytes();return i?[o,r]:o}async function fa(t,e,n={}){const{seed:r,m:s,d:i}=ca(t,e,n.extraEntropy),o=new ra(na,gn);await o.reseed(r);let a;for(;!(a=sa(await o.generate(),s,i,n.canonical));)await o.reseed();return ua(a,n)}function uf(t,e,n={}){const{seed:r,m:s,d:i}=ca(t,e,n.extraEntropy),o=new ra(na,gn);o.reseedSync(r);let a;for(;!(a=sa(o.generateSync(),s,i,n.canonical));)o.reseedSync();return ua(a,n)}const ff={strict:!0};function ha(t,e,n,r=ff){let s;try{s=ia(t),e=St(e)}catch{return!1}const{r:i,s:o}=s;if(r.strict&&s.hasHighS())return!1;const a=li(e);let f;try{f=di(n)}catch{return!1}const{n:h}=de,l=Zn(o,h),p=R(a*l,h),y=R(i*l,h),m=ae.BASE.multiplyAndAddUnsafe(f,p,y);return m?R(m.x,h)===i:!1}function Gr(t){return R(st(t),de.n)}class Nn{constructor(e,n){this.r=e,this.s=n,this.assertValidity()}static fromHex(e){const n=St(e);if(n.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${n.length}`);const r=st(n.subarray(0,32)),s=st(n.subarray(32,64));return new Nn(r,s)}assertValidity(){const{r:e,s:n}=this;if(!Nr(e)||!Hn(n))throw new Error("Invalid signature")}toHex(){return Qt(this.r)+Qt(this.s)}toRawBytes(){return en(this.toHex())}}function hf(t){return ae.fromPrivateKey(t).toRawX()}class la{constructor(e,n,r=Fe.randomBytes()){if(e==null)throw new TypeError(`sign: Expected valid message, not "${e}"`);this.m=St(e);const{x:s,scalar:i}=this.getScalar(yn(n));if(this.px=s,this.d=i,this.rand=St(r),this.rand.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(e){const n=ae.fromPrivateKey(e),r=n.hasEvenY()?e:de.n-e;return{point:n,scalar:r,x:n.toRawX()}}initNonce(e,n){return Cn(e^st(n))}finalizeNonce(e){const n=R(st(e),de.n);if(n===oe)throw new Error("sign: Creation of signature failed. k is zero");const{point:r,x:s,scalar:i}=this.getScalar(n);return{R:r,rx:s,k:i}}finalizeSig(e,n,r,s){return new Nn(e.x,R(n+r*s,de.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){const{m:e,d:n,px:r,rand:s}=this,i=Fe.taggedHash,o=this.initNonce(n,await i(Kt.aux,s)),{R:a,rx:f,k:h}=this.finalizeNonce(await i(Kt.nonce,o,r,e)),l=Gr(await i(Kt.challenge,f,r,e)),p=this.finalizeSig(a,h,l,n);return await ga(p,e,r)||this.error(),p}calcSync(){const{m:e,d:n,px:r,rand:s}=this,i=Fe.taggedHashSync,o=this.initNonce(n,i(Kt.aux,s)),{R:a,rx:f,k:h}=this.finalizeNonce(i(Kt.nonce,o,r,e)),l=Gr(i(Kt.challenge,f,r,e)),p=this.finalizeSig(a,h,l,n);return ya(p,e,r)||this.error(),p}}async function lf(t,e,n){return new la(t,e,n).calc()}function df(t,e,n){return new la(t,e,n).calcSync()}function da(t,e,n){const r=t instanceof Nn,s=r?t:Nn.fromHex(t);return r&&s.assertValidity(),{...s,m:St(e),P:di(n)}}function pa(t,e,n,r){const s=ae.BASE.multiplyAndAddUnsafe(e,yn(n),R(-r,de.n));return!(!s||!s.hasEvenY()||s.x!==t)}async function ga(t,e,n){try{const{r,s,m:i,P:o}=da(t,e,n),a=Gr(await Fe.taggedHash(Kt.challenge,Cn(r),o.toRawX(),i));return pa(r,o,s,a)}catch{return!1}}function ya(t,e,n){try{const{r,s,m:i,P:o}=da(t,e,n),a=Gr(Fe.taggedHashSync(Kt.challenge,Cn(r),o.toRawX(),i));return pa(r,o,s,a)}catch(r){if(r instanceof hi)throw r;return!1}}const pi={Signature:Nn,getPublicKey:hf,sign:lf,verify:ga,signSync:df,verifySync:ya};ae.BASE._setWindowSize(8);const Kt={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},Br={},Fe={bytesToHex:Pn,hexToBytes:en,concatBytes:Yt,mod:R,invert:Zn,isValidPrivateKey(t){try{return yn(t),!0}catch{return!1}},_bigintTo32Bytes:Cn,_normalizePrivateKey:yn,hashToPrivateKey:t=>{t=St(t);const e=gn+8;if(t.length<e||t.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");const n=R(st(t),de.n-ve)+ve;return Cn(n)},randomBytes:(t=32)=>vr.getRandomValues(new Uint8Array(t)),randomPrivateKey:()=>Fe.hashToPrivateKey(Fe.randomBytes(gn+8)),precompute(t=8,e=ae.BASE){const n=e===ae.BASE?e:new ae(e.x,e.y);return n._setWindowSize(t),n.multiply(Wn),n},sha256:async(...t)=>{const e=await vr.subtle.digest("SHA-256",Yt(...t));return new Uint8Array(e)},hmacSha256:async(t,...e)=>{const n=await vr.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),r=Yt(...e),s=await vr.subtle.sign("HMAC",n,r);return new Uint8Array(s)},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(t,...e)=>{let n=Br[t];if(n===void 0){const r=await Fe.sha256(Uint8Array.from(t,s=>s.charCodeAt(0)));n=Yt(r,r),Br[t]=n}return Fe.sha256(n,...e)},taggedHashSync:(t,...e)=>{if(typeof $n!="function")throw new hi("sha256Sync is undefined, you need to set it");let n=Br[t];if(n===void 0){const r=$n(Uint8Array.from(t,s=>s.charCodeAt(0)));n=Yt(r,r),Br[t]=n}return $n(n,...e)},_JacobianPoint:ge};Object.defineProperties(Fe,{sha256Sync:{configurable:!1,get(){return $n},set(t){$n||($n=t)}},hmacSha256Sync:{configurable:!1,get(){return Yn},set(t){Yn||(Yn=t)}}});var gi=Object.freeze({__proto__:null,CURVE:de,Point:ae,Signature:$t,getPublicKey:sf,getSharedSecret:af,recoverPublicKey:of,schnorr:pi,sign:fa,signSync:uf,utils:Fe,verify:ha});const pf=new TextEncoder,gf=[{name:"base58",charset:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"},{name:"base64",charset:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"},{name:"base64url",charset:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}];function ma(t){for(const e of gf)if(e.name===t)return e.charset;throw TypeError("Charset does not exist: "+t)}function yf(t,e,n=!1){typeof t=="string"&&(t=pf.encode(t));const r=ma(e),s=r.length,i=[];let o="",a,f=0,h,l;for(a=0;a<t.length;a++)for(f=0,h=t[a],o+=h>0||(o.length^a)>0?"":"1";f in i||h>0;)l=i[f],l=l>0?l*256+h:h,h=l/s|0,i[f]=l%s,f++;for(;f-- >0;)o+=r[i[f]];return n&&o.length%4>0?o+"=".repeat(4-o.length%4):o}function mf(t,e){const n=ma(e),r=n.length,s=[],i=[];t=t.replace("=","");let o,a=0,f,h;for(o=0;o<t.length;o++){if(a=0,f=n.indexOf(t[o]),f<0)throw new Error(`Character range out of bounds: ${f}`);for(f>0||(i.length^o)>0||i.push(0);a in s||f>0;)h=s[a],h=h>0?h*r+f:f,f=h>>8,s[a]=h%256,a++}for(;a-- >0;)i.push(s[a]);return new Uint8Array(i)}const Sn={encode:yf,decode:mf},wa="qpzry9x8gf2tvdw0s3jn54khce6mua7l",wf=[996825010,642813549,513874426,1027748829,705979059],lo={BECH32:"bech32",BECH32M:"bech32m"};function xa(t){switch(t){case lo.BECH32:return 1;case lo.BECH32M:return 734539939;default:throw new Error(`Unrecognized encoding: ${t}`)}}function ba(t){let e=1;for(let n=0;n<t.length;++n){const r=e>>25;e=(e&33554431)<<5^t[n];for(let s=0;s<5;++s)(r>>s&1)>0&&(e^=wf[s])}return e}function va(t){const e=[];let n;for(n=0;n<t.length;++n)e.push(t.charCodeAt(n)>>5);for(e.push(0),n=0;n<t.length;++n)e.push(t.charCodeAt(n)&31);return e}function Ea(t,e,n,r=!0){const s=[];let i=0,o=0;const a=(1<<n)-1,f=(1<<e+n-1)-1;for(const h of t){if(h<0||h>>e>0)return[];for(i=(i<<e|h)&f,o+=e;o>=n;)o-=n,s.push(i>>o&a)}if(r)o>0&&s.push(i<<n-o&a);else if(o>=e||(i<<n-o&a)>0)return[];return s}function xf(t,e,n){const r=va(t).concat(e);return ba(r)===xa(n)}function bf(t,e,n){const r=va(t).concat(e).concat([0,0,0,0,0,0]),s=ba(r)^xa(n),i=[];for(let o=0;o<6;++o)i.push(s>>5*(5-o)&31);return i}function vf(t,e,n){const r=e.concat(bf(t,e,n));let s=t+"1";for(let i=0;i<r.length;++i)s+=wa.charAt(r[i]);return s}function Ef(t,e){const n=e>0?"bech32m":"bech32";if(!Af(t))return{hrp:null,data:[255]};if(t=t.toLowerCase(),!Sf(t))return{hrp:null,data:[255]};const r=[],s=t.lastIndexOf("1"),i=t.substring(0,s);for(let o=s+1;o<t.length;++o){const a=wa.indexOf(t.charAt(o));if(a===-1)return{hrp:null,data:[255]};r.push(a)}return xf(i,r,n)?{hrp:i,data:r.slice(0,r.length-6)}:{hrp:null,data:[255]}}function Af(t){let e,n,r=!1,s=!1;for(e=0;e<t.length;++e){if(n=t.charCodeAt(e),n<33||n>126)return!1;n>=97&&n<=122&&(r=!0),n>=65&&n<=90&&(s=!0)}return!(r&&s)}function Sf(t){const e=t.lastIndexOf("1");return!(e<1||e+7>t.length||t.length>90)}function Bf(t,e="bch",n=0){const r=[n,...Ea([...t],8,5)],s=n>0?"bech32m":"bech32",i=vf(e,r,s);return Aa(i,n),i}function Aa(t,e=0){const n=t.split("1",1)[0],{hrp:r,data:s}=Ef(t,e),i=Ea(s.slice(1),5,8,!1),o=i.length;switch(!0){case n!==r:throw new Error("Returned hrp string is invalid.");case(i===null||o<2||o>40):throw new Error("Decoded string is invalid or out of spec.");case s[0]>16:throw new Error("Returned version bit is out of range.");case(s[0]===0&&o!==20&&o!==32):throw new Error("Decoded string does not match version 0 spec.");case(s[0]===0&&e!==0):throw new Error("Decoded version bit does not match.");case(s[0]!==0&&e!==1):throw new Error("Decoded version bit does not match.");default:return Uint8Array.from(i)}}const po={encode:Bf,decode:Aa},Sa=new TextEncoder,_f=new TextDecoder;function Ts(t){return Sa.encode(t)}function Ba(t){const e=[];let n,r=0;if(t.length%2>0)throw new Error(`Invalid hex string length: ${t.length}`);for(n=0;n<t.length;n+=2)e[r]=parseInt(t.slice(n,n+2),16),r+=1;return Uint8Array.from(e)}function _a(t){const e=[];for(;t>0;){const n=t&255;e.push(n),t=(t-n)/256}return Uint8Array.from(e)}function Ia(t){const e=[];for(;t>0n;){const n=t&0xffn;e.push(Number(n)),t=(t-n)/256n}return Uint8Array.from(e)}function _r(t){return _f.decode(t)}function If(t){const e=[];let n;for(n=0;n<t.length;n++)e.push(t[n].toString(16).padStart(2,"0"));return e.join("")}function go(t){let e=0,n;for(n=t.length-1;n>=0;n--)e=e*256+t[n];return Number(e)}function yo(t){let e=0n,n;for(n=t.length-1;n>=0;n--)e=e*256n+BigInt(t[n]);return BigInt(e)}function Tf(t){if(t instanceof ArrayBuffer)return new Uint8Array(t);if(t instanceof Uint8Array)return t;const e=typeof t;switch(e){case"bigint":return Ia(t);case"boolean":return Uint8Array.of(t);case"number":return _a(t);case"string":return t.match(/^(02|03)*[0-9a-fA-F]{64}$/)!==null?Ba(t):Sa.encode(t);default:throw TypeError("Unsupported format:"+e)}}async function mo(t){return crypto.subtle.digest("SHA-256",t).then(e=>new Uint8Array(e))}async function Ta(t){return mo(await mo(t))}async function kf(t){const e=await Ta(t);return Uint8Array.of(...t,...e.slice(0,4))}async function $f(t){const e=t.slice(0,-4),n=t.slice(-4);if((await Ta(e)).slice(0,4).toString()!==n.toString())throw new Error("Invalid checksum!");return e}const{crypto:wo}=globalThis;var K;let $e=(K=class extends Uint8Array{static async b58check(e){const n=Sn.decode(e,"base58");return new K(await $f(n))}constructor(e,n=null,r="be"){if(n!==null){const s=new Uint8Array(n).fill(0);s.set(new Uint8Array(e)),e=s.buffer}return e=r==="le"?new Uint8Array(e).reverse():e,super(e),this}get num(){return this.toNum()}get big(){return this.toBig()}get arr(){return this.toArr()}get str(){return this.toStr()}get hex(){return this.toHex()}get raw(){return new Uint8Array(this)}get hash(){return this.toHash()}get id(){return this.toHash().then(e=>new K(e).hex)}toNum(e="le"){return go(e==="le"?this.reverse():this)}toBig(e="le"){return yo(e==="le"?this.reverse():this)}async toHash(){return wo.subtle.digest("SHA-256",this.raw).then(e=>new Uint8Array(e))}async tob58check(){return Sn.encode(await kf(this),"base58")}toArr(){return Array.from(this)}toStr(){return _r(this)}toHex(){return If(this)}toJson(){return JSON.parse(_r(this))}toBytes(){return new Uint8Array(this)}toB64url(){return Sn.encode(this,"base64url")}toBase64(e){return Sn.encode(this,"base64",e)}toBech32(e,n){return po.encode(this,e,n)}prepend(e){return K.of(...e,...this)}append(e){return K.of(...this,...e)}slice(e,n){return new K(new Uint8Array(this).slice(e,n))}reverse(){return new K(new Uint8Array(this).reverse())}write(e,n){this.set(e,n)}prependVarint(e=this.length){return K.of(...K.readVarint(e),...this)}static from(e){return new K(Uint8Array.from(e))}static of(...e){return new K(Uint8Array.of(...e))}static join(e){let n,r=0;const s=e.reduce((o,a)=>o+a.length,0),i=new Uint8Array(s);for(const o of e)for(n=0;n<o.length;r++,n++)i[r]=o[n];return new K(i,s)}static readVarint(e){if(e<253)return K.num(e,1);if(e<65536)return K.of(253,...K.num(e,2));if(e<4294967296)return K.of(254,...K.num(e,4));if(e<18446744073709552e3)return K.of(255,...K.num(e,8));throw new Error(`Value is too large: ${e}`)}static random(e=32){return new K(wo.getRandomValues(new Uint8Array(e)))}static normalize(e,n){if(e instanceof Uint8Array)return e;if(typeof e=="string")return K.hex(e,n).toBytes();if(typeof e=="number")return K.num(e,n).toBytes();if(typeof e=="bigint")return K.big(e,n).toBytes();throw TypeError(`Unrecognized format: ${typeof e}`)}static serialize(e){if(typeof e=="string")return K.str(e).toBytes();if(typeof e=="object"){if(e instanceof Uint8Array)return e;try{return K.json(e).toBytes()}catch{throw TypeError("Object is not serializable.")}}throw TypeError(`Unrecognized format: ${typeof e}`)}static revitalize(e){if(e instanceof Uint8Array&&(e=_r(e)),typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}},(()=>{K.num=(e,n,r="le")=>new K(_a(e),n,r)})(),(()=>{K.big=(e,n,r="le")=>new K(Ia(e),n,r)})(),(()=>{K.buff=(e,n)=>new K(Tf(e),n)})(),(()=>{K.raw=(e,n)=>new K(e,n)})(),(()=>{K.str=(e,n)=>new K(Ts(e),n)})(),(()=>{K.hex=(e,n)=>new K(Ba(e),n)})(),(()=>{K.json=e=>new K(Ts(JSON.stringify(e)))})(),(()=>{K.base64=e=>new K(Sn.decode(e,"base64"))})(),(()=>{K.b64url=e=>new K(Sn.decode(e,"base64url"))})(),(()=>{K.bech32=(e,n)=>new K(po.decode(e,n))})(),(()=>{K.encode=Ts})(),(()=>{K.decode=_r})(),K);var pe;let Uf=(pe=class extends Uint8Array{static mod(e,n=pe.N){return Fe.mod(e,n)}static normalize(e){return e=Gn(e),e=pe.mod(e),e=Fe._normalizePrivateKey(e),$e.big(e,32).raw}static validate(e){return Fe.isValidPrivateKey(e)}constructor(e){e=pe.normalize(e),super(e)}get buff(){return new $e(this)}get raw(){return this}get num(){return this.buff.toBig()}get point(){return Of.fromNum(this.num)}get hasOddY(){return this.point.hasOddY}get negated(){return this.hasOddY?this.negate():this}gt(e){return new pe(e).num>this.num}lt(e){return new pe(e).num<this.num}eq(e){return new pe(e).num===this.num}ne(e){return new pe(e).num!==this.num}add(e){const n=new pe(e);return new pe(this.num+n.num)}sub(e){const n=new pe(e);return new pe(this.num-n.num)}mul(e){const n=new pe(e);return new pe(this.num*n.num)}pow(e,n=pe.N-1n){const r=new pe(e),s=pe.mod(r.num,n);return new pe(this.num**s)}div(e){const n=new pe(e),r=this.pow(n.num,pe.N-2n);return new pe(this.num*r.num)}negate(){return new pe(pe.N-this.num)}},(()=>{pe.N=de.n})(),(()=>{pe.isField=e=>e instanceof pe})(),pe);var Ie;let Of=(Ie=class{static validate(e){try{e=Gn(e);const n=$e.big(e).toHex();return ae.fromHex(n).assertValidity(),!0}catch{return!1}}static fromNum(e){e=Gn(e);const n=Fe.mod(e,Ie.N),r=ae.BASE.multiply(n);return new Ie(r.x,r.y)}static fromX(e){e=Gn(e);const n=$e.big(e).toHex();return Ie.from(ae.fromHex(n))}static from(e){return new Ie(e.x,e.y)}constructor(e,n){this.__p=new ae(e,n),this.__x=this.__p.x,this.__y=this.__p.y,this.__p.assertValidity()}get p(){return this.__p}get buff(){return new $e(this.rawX.slice(1))}get hex(){return this.buff.hex}get hasOddY(){return!this.__p.hasEvenY()}get rawX(){const e=this.__p.hasEvenY()?2:3,n=$e.big(this.__x);return Uint8Array.of(e,...n)}get rawY(){return $e.big(this.__y)}get x(){return this.__x}get y(){return this.__y}eq(e){return e instanceof Ie?this.p.equals(new ae(e.x,e.y)):e instanceof Uint8Array?this.x.toString()===e.toString():typeof e=="number"?BigInt(e)===this.x:e===this.x}add(e){return e instanceof Ie?Ie.from(this.p.add(e.p)):Ie.from(this.p.add(Ie.fromNum(e).p))}sub(e){return e instanceof Ie?Ie.from(this.p.subtract(e.p)):Ie.from(this.p.subtract(Ie.fromNum(e).p))}mul(e){return e instanceof Ie?Ie.from(this.p.multiply(e.x)):Ie.from(this.p.multiply(Gn(e)))}negate(){return Ie.from(this.__p.negate())}},(()=>{Ie.N=de.n})(),Ie);function Gn(t){if(t instanceof Uint8Array)return $e.raw(t).big;if(typeof t=="string")return $e.hex(t).big;if(typeof t=="number")return BigInt(t);if(typeof t=="bigint")return t;throw TypeError("Invalid input type:"+typeof t)}async function Pf(t,e,n="schnorr"){const r=$e.normalize(t),s=$e.normalize(e);return n==="schnorr"?pi.sign(r,s):fa(r,s)}async function ka(t,e,n,r="schnorr"){const s=$e.normalize(t),i=$e.normalize(e),o=$e.normalize(n);return r==="schnorr"?pi.verify(o,s,Cf(i)):ha(o,s,i)}function Cf(t){return t.length>32?t.slice(1):t}class ds{static generate(){return new ds($e.random(32))}constructor(e){this._buffer=$e.normalize(e,32)}get field(){return new Uf(this._buffer)}get point(){return this.field.point}get buff(){return new $e(this._buffer)}get raw(){return new Uint8Array(this._buffer)}get hex(){return this.buff.hex}get pub(){return new Hf(this.point.rawX)}async sign(e,n){const r=$e.normalize(e);return Pf(r,this.raw,n)}async verify(e,n,r){return ka(e,this.pub.raw,n,r)}}class Hf{static generate(){return new ds($e.random(32)).pub}constructor(e){this._buffer=$e.normalize(e)}get raw(){return new Uint8Array(this._buffer)}get rawX(){return this.raw.length>32?this.raw.slice(1,33):this.raw}get buff(){return new $e(this.raw)}get hex(){return this.buff.hex}async verify(e,n,r){return ka(e,this.raw,n,r)}}function $a(t){let e,n=0;const r=t.reduce((i,o)=>i+o.length,0),s=new Uint8Array(r);for(const i of t)for(e=0;e<i.length;n++,e++)s[n]=i[e];return s}function zs(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Nf(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}function Ua(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Lf(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");zs(t.outputLen),zs(t.blockLen)}function Rf(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Df(t,e){Ua(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Ff={number:zs,bool:Nf,bytes:Ua,hash:Lf,exists:Rf,output:Df};var fn=Ff;const ks=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $s=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),xt=(t,e)=>t<<32-e|t>>>e,jf=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!jf)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Zf(t){if(typeof t!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof t}`);return new TextEncoder().encode(t)}function yi(t){if(typeof t=="string"&&(t=Zf(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}let Oa=class{clone(){return this._cloneInto()}};function vn(t){const e=r=>t().update(yi(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Mf(t=32){if(ks&&typeof ks.getRandomValues=="function")return ks.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function zf(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),f=r?4:0,h=r?0:4;t.setUint32(e+f,o,r),t.setUint32(e+h,a,r)}let mi=class extends Oa{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=$s(this.buffer)}update(e){fn.exists(this);const{view:n,buffer:r,blockLen:s}=this;e=yi(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const f=$s(e);for(;s<=i-o;o+=s)this.process(f,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){fn.exists(this),fn.output(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let p=o;p<s;p++)n[p]=0;zf(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=$s(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=f/4,l=this.get();if(h>l.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<h;p++)a.setUint32(4*p,l[p],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const Vf=(t,e,n)=>t&e^~t&n,qf=(t,e,n)=>t&e^t&n^e&n,Kf=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Nt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Lt=new Uint32Array(64);let Pa=class extends mi{constructor(){super(64,32,8,!1),this.A=Nt[0]|0,this.B=Nt[1]|0,this.C=Nt[2]|0,this.D=Nt[3]|0,this.E=Nt[4]|0,this.F=Nt[5]|0,this.G=Nt[6]|0,this.H=Nt[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:f}=this;return[e,n,r,s,i,o,a,f]}set(e,n,r,s,i,o,a,f){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=f|0}process(e,n){for(let p=0;p<16;p++,n+=4)Lt[p]=e.getUint32(n,!1);for(let p=16;p<64;p++){const y=Lt[p-15],m=Lt[p-2],b=xt(y,7)^xt(y,18)^y>>>3,w=xt(m,17)^xt(m,19)^m>>>10;Lt[p]=w+Lt[p-7]+b+Lt[p-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:f,G:h,H:l}=this;for(let p=0;p<64;p++){const y=xt(a,6)^xt(a,11)^xt(a,25),m=l+y+Vf(a,f,h)+Kf[p]+Lt[p]|0,w=(xt(r,2)^xt(r,13)^xt(r,22))+qf(r,s,i)|0;l=h,h=f,f=a,a=o+m|0,o=i,i=s,s=r,r=m+w|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,f=f+this.F|0,h=h+this.G|0,l=l+this.H|0,this.set(r,s,i,o,a,f,h,l)}roundClean(){Lt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Gf=class extends Pa{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const Xn=vn(()=>new Pa);vn(()=>new Gf);const Ir=BigInt(2**32-1),Vs=BigInt(32);function Ca(t,e=!1){return e?{h:Number(t&Ir),l:Number(t>>Vs&Ir)}:{h:Number(t>>Vs&Ir)|0,l:Number(t&Ir)|0}}function Wf(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=Ca(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const Yf=(t,e)=>BigInt(t>>>0)<<Vs|BigInt(e>>>0),Xf=(t,e,n)=>t>>>n,Jf=(t,e,n)=>t<<32-n|e>>>n,Qf=(t,e,n)=>t>>>n|e<<32-n,eh=(t,e,n)=>t<<32-n|e>>>n,th=(t,e,n)=>t<<64-n|e>>>n-32,nh=(t,e,n)=>t>>>n-32|e<<64-n,rh=(t,e)=>e,sh=(t,e)=>t,ih=(t,e,n)=>t<<n|e>>>32-n,oh=(t,e,n)=>e<<n|t>>>32-n,ah=(t,e,n)=>e<<n-32|t>>>64-n,ch=(t,e,n)=>t<<n-32|e>>>64-n;function uh(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const fh=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),hh=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,lh=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),dh=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,ph=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),gh=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,yh={fromBig:Ca,split:Wf,toBig:Yf,shrSH:Xf,shrSL:Jf,rotrSH:Qf,rotrSL:eh,rotrBH:th,rotrBL:nh,rotr32H:rh,rotr32L:sh,rotlSH:ih,rotlSL:oh,rotlBH:ah,rotlBL:ch,add:uh,add3L:fh,add3H:hh,add4L:lh,add4H:dh,add5H:gh,add5L:ph};var te=yh;const[mh,wh]=te.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Rt=new Uint32Array(80),Dt=new Uint32Array(80);let ps=class extends mi{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:f,Eh:h,El:l,Fh:p,Fl:y,Gh:m,Gl:b,Hh:w,Hl:v}=this;return[e,n,r,s,i,o,a,f,h,l,p,y,m,b,w,v]}set(e,n,r,s,i,o,a,f,h,l,p,y,m,b,w,v){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=f|0,this.Eh=h|0,this.El=l|0,this.Fh=p|0,this.Fl=y|0,this.Gh=m|0,this.Gl=b|0,this.Hh=w|0,this.Hl=v|0}process(e,n){for(let S=0;S<16;S++,n+=4)Rt[S]=e.getUint32(n),Dt[S]=e.getUint32(n+=4);for(let S=16;S<80;S++){const C=Rt[S-15]|0,I=Dt[S-15]|0,U=te.rotrSH(C,I,1)^te.rotrSH(C,I,8)^te.shrSH(C,I,7),O=te.rotrSL(C,I,1)^te.rotrSL(C,I,8)^te.shrSL(C,I,7),$=Rt[S-2]|0,N=Dt[S-2]|0,j=te.rotrSH($,N,19)^te.rotrBH($,N,61)^te.shrSH($,N,6),q=te.rotrSL($,N,19)^te.rotrBL($,N,61)^te.shrSL($,N,6),Y=te.add4L(O,q,Dt[S-7],Dt[S-16]),ie=te.add4H(Y,U,j,Rt[S-7],Rt[S-16]);Rt[S]=ie|0,Dt[S]=Y|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:f,Dh:h,Dl:l,Eh:p,El:y,Fh:m,Fl:b,Gh:w,Gl:v,Hh:B,Hl:_}=this;for(let S=0;S<80;S++){const C=te.rotrSH(p,y,14)^te.rotrSH(p,y,18)^te.rotrBH(p,y,41),I=te.rotrSL(p,y,14)^te.rotrSL(p,y,18)^te.rotrBL(p,y,41),U=p&m^~p&w,O=y&b^~y&v,$=te.add5L(_,I,O,wh[S],Dt[S]),N=te.add5H($,B,C,U,mh[S],Rt[S]),j=$|0,q=te.rotrSH(r,s,28)^te.rotrBH(r,s,34)^te.rotrBH(r,s,39),Y=te.rotrSL(r,s,28)^te.rotrBL(r,s,34)^te.rotrBL(r,s,39),ie=r&i^r&a^i&a,ce=s&o^s&f^o&f;B=w|0,_=v|0,w=m|0,v=b|0,m=p|0,b=y|0,{h:p,l:y}=te.add(h|0,l|0,N|0,j|0),h=a|0,l=f|0,a=i|0,f=o|0,i=r|0,o=s|0;const k=te.add3L(j,Y,ce);r=te.add3H(k,N,q,ie),s=k|0}({h:r,l:s}=te.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=te.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:f}=te.add(this.Ch|0,this.Cl|0,a|0,f|0),{h,l}=te.add(this.Dh|0,this.Dl|0,h|0,l|0),{h:p,l:y}=te.add(this.Eh|0,this.El|0,p|0,y|0),{h:m,l:b}=te.add(this.Fh|0,this.Fl|0,m|0,b|0),{h:w,l:v}=te.add(this.Gh|0,this.Gl|0,w|0,v|0),{h:B,l:_}=te.add(this.Hh|0,this.Hl|0,B|0,_|0),this.set(r,s,i,o,a,f,h,l,p,y,m,b,w,v,B,_)}roundClean(){Rt.fill(0),Dt.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},xh=class extends ps{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},bh=class extends ps{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},vh=class extends ps{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};const wi=vn(()=>new ps);vn(()=>new xh);vn(()=>new bh);vn(()=>new vh);const Eh=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Ha=Uint8Array.from({length:16},(t,e)=>e),Ah=Ha.map(t=>(9*t+5)%16);let xi=[Ha],bi=[Ah];for(let t=0;t<4;t++)for(let e of[xi,bi])e.push(e[t].map(n=>Eh[n]));const Na=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),Sh=xi.map((t,e)=>t.map(n=>Na[e][n])),Bh=bi.map((t,e)=>t.map(n=>Na[e][n])),_h=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Ih=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Tr=(t,e)=>t<<e|t>>>32-e;function xo(t,e,n,r){return t===0?e^n^r:t===1?e&n|~e&r:t===2?(e|~n)^r:t===3?e&r|n&~r:e^(n|~r)}const kr=new Uint32Array(16);let Th=class extends mi{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:n,h2:r,h3:s,h4:i}=this;return[e,n,r,s,i]}set(e,n,r,s,i){this.h0=e|0,this.h1=n|0,this.h2=r|0,this.h3=s|0,this.h4=i|0}process(e,n){for(let m=0;m<16;m++,n+=4)kr[m]=e.getUint32(n,!0);let r=this.h0|0,s=r,i=this.h1|0,o=i,a=this.h2|0,f=a,h=this.h3|0,l=h,p=this.h4|0,y=p;for(let m=0;m<5;m++){const b=4-m,w=_h[m],v=Ih[m],B=xi[m],_=bi[m],S=Sh[m],C=Bh[m];for(let I=0;I<16;I++){const U=Tr(r+xo(m,i,a,h)+kr[B[I]]+w,S[I])+p|0;r=p,p=h,h=Tr(a,10)|0,a=i,i=U}for(let I=0;I<16;I++){const U=Tr(s+xo(b,o,f,l)+kr[_[I]]+v,C[I])+y|0;s=y,y=l,l=Tr(f,10)|0,f=o,o=U}}this.set(this.h1+a+l|0,this.h2+h+y|0,this.h3+p+s|0,this.h4+r+o|0,this.h0+i+f|0)}roundClean(){kr.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}};const kh=vn(()=>new Th);let La=class extends Oa{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,fn.hash(e);const r=yi(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return fn.exists(this),this.iHash.update(e),this}digestInto(e){fn.exists(this),fn.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const vi=(t,e,n)=>new La(t,e).update(n).digest();vi.create=(t,e)=>new La(t,e);const Ra=new TextEncoder,$h=new TextDecoder;function Lr(t){return Ra.encode(t)}function Da(t){const e=new Uint8Array(t.length/2);let n,r=0;if(t.match(/[^a-fA-f0-9]/)!==null)throw new TypeError("Invalid hex string: "+t);if(t.length%2>0)throw new Error(`Hex string length is uneven: ${t.length}`);for(n=0;n<t.length;n+=2)e[r]=parseInt(t.slice(n,n+2),16),r+=1;return e}function Fa(t){if(t===0)return Uint8Array.of(0);const e=[];for(;t>0;){const n=t&255;e.push(n),t=(t-n)/256}return new Uint8Array(e)}function Uh(t){if(typeof t=="string")t=t.split("").map(Number);else if(!Array.isArray(t))throw new Error("Invalid input type: expected a string or an array of numbers.");if(t.length%8!==0)throw new Error(`Binary array is invalid length: ${t.length}`);const e=new Uint8Array(t.length/8);for(let n=0,r=0;n<t.length;n+=8,r++){let s=0;for(let i=0;i<8;i++)s|=t[n+i]<<7-i;e[r]=s}return e}function bo(t){const e=new Array(t.length*8);let n=0;for(const r of t){if(r>255)throw new Error(`Invalid byte value: ${r}. Byte values must be between 0 and 255.`);for(let s=7;s>=0;s--,n++)e[n]=r>>s&1}return e}function ja(t){if(t===0n)return Uint8Array.of(0);const e=[];for(;t>0n;){const n=t&0xffn;e.push(Number(n)),t=(t-n)/256n}return new Uint8Array(e)}function Rr(t){return $h.decode(t)}function Za(t){const e=new Array(t.length);for(let n=0;n<t.length;n++)e.push(t[n].toString(16).padStart(2,"0"));return e.join("")}function vo(t){let e=0,n;for(n=t.length-1;n>=0;n--)e=e*256+t[n];return Number(e)}function Eo(t){let e=0n,n;for(n=t.length-1;n>=0;n--)e=e*256n+BigInt(t[n]);return BigInt(e)}function Ke(t,e=!0){if(t instanceof ArrayBuffer)return new Uint8Array(t);if(t instanceof Uint8Array)return new Uint8Array(t);switch(typeof t){case"bigint":return ja(t);case"boolean":return Uint8Array.of(t?1:0);case"number":return Fa(t);case"string":return e?Da(t):Ra.encode(t);default:throw TypeError("Unsupported format:"+typeof t)}}function Oh(t){return t=Ke(t,!0),Za(t)}function Ph(t){if(typeof t=="object"){if(t instanceof Uint8Array)return t;try{return Lr(JSON.stringify(t))}catch{throw TypeError("Object is not serializable.")}}return Ke(t,!1)}function Ch(t){if(t instanceof Uint8Array&&(t=Rr(t)),typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}function Hh(t){return Xn(Ke(t))}function Nh(t){return wi(Ke(t))}function Lh(t){return wi(Ke(t))}function Ei(t){return Xn(Xn(Ke(t)))}function Rh(t){return kh(Xn(Ke(t)))}function Dh(t,e){return vi(Xn,Ke(t),Ke(e))}function Fh(t,e){return vi(wi,Ke(t),Ke(e))}const Bn={sha256:Hh,sha512:Nh,ripe160:Lh,hash256:Ei,hash160:Rh,hmac256:Dh,hmac512:Fh},jh=new TextEncoder,Zh=[{name:"base58",charset:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}];function Ma(t){for(const e of Zh)if(e.name===t)return e.charset;throw TypeError("Charset does not exist: "+t)}function Mh(t,e,n=!1){typeof t=="string"&&(t=jh.encode(t));const r=Ma(e),s=r.length,i=[];let o="",a,f=0,h,l;for(a=0;a<t.length;a++)for(f=0,h=t[a],o+=h>0||(o.length^a)>0?"":"1";f in i||h>0;)l=i[f],l=l>0?l*256+h:h,h=l/s|0,i[f]=l%s,f++;for(;f-- >0;)o+=r[i[f]];return n&&o.length%4>0?o+"=".repeat(4-o.length%4):o}function zh(t,e){const n=Ma(e),r=n.length,s=[],i=[];t=t.replace("=","");let o,a=0,f,h;for(o=0;o<t.length;o++){if(a=0,f=n.indexOf(t[o]),f<0)throw new Error(`Character range out of bounds: ${f}`);for(f>0||(i.length^o)>0||i.push(0);a in s||f>0;)h=s[a],h=h>0?h*r+f:f,f=h>>8,s[a]=h%256,a++}for(;a-- >0;)i.push(s[a]);return new Uint8Array(i)}function Vh(t){const e=Ei(t);return $a([t,e.slice(0,4)])}function qh(t){const e=t.slice(0,-4),n=t.slice(-4);if(Ei(e).slice(0,4).toString()!==n.toString())throw new Error("Invalid checksum!");return e}const Ao={encode:Mh,decode:zh},So={encode:t=>{const e=Vh(t);return Ao.encode(e,"base58")},decode:t=>{const e=Ao.decode(t,"base58");return qh(e)}},za="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Kh=[996825010,642813549,513874426,1027748829,705979059],Wr=[{version:0,name:"bech32",const:1},{version:1,name:"bech32m",const:734539939}];function Va(t){let e=1;for(let n=0;n<t.length;++n){const r=e>>25;e=(e&33554431)<<5^t[n];for(let s=0;s<5;++s)r>>s&1&&(e^=Kh[s])}return e}function qa(t){const e=[];let n;for(n=0;n<t.length;++n)e.push(t.charCodeAt(n)>>5);for(e.push(0),n=0;n<t.length;++n)e.push(t.charCodeAt(n)&31);return e}function Gh(t,e,n){const r=qa(t).concat(e);return Va(r)===n.const}function Wh(t,e,n){const r=qa(t).concat(e).concat([0,0,0,0,0,0]),s=Va(r)^n.const,i=[];for(let o=0;o<6;++o)i.push(s>>5*(5-o)&31);return i}function Ka(t,e,n,r=!0){const s=[];let i=0,o=0;const a=(1<<n)-1,f=(1<<e+n-1)-1;for(const h of t){if(h<0||h>>e>0)throw new Error("Failed to perform base conversion. Invalid value: "+String(h));for(i=(i<<e|h)&f,o+=e;o>=n;)o-=n,s.push(i>>o&a)}if(r)o>0&&s.push(i<<n-o&a);else if(o>=e||(i<<n-o&a)>0)throw new Error("Failed to perform base conversion. Invalid Size!");return s}function Yh(t,e,n){const r=e.concat(Wh(t,e,n));let s=t+"1";for(let i=0;i<r.length;++i)s+=za.charAt(r[i]);return s}function Ga(t){if(!Xh(t))throw new Error("Encoded string goes out of bounds!");if(t=t.toLowerCase(),!Jh(t))throw new Error("Encoded string has invalid separator!");const e=[],n=t.lastIndexOf("1"),r=t.substring(0,n);for(let i=n+1;i<t.length;++i){const o=za.indexOf(t.charAt(i));if(o===-1)throw new Error("Character idx out of bounds: "+String(i));e.push(o)}const s=Wr.find(i=>i.version===e[0])??Wr[0];if(!Gh(r,e,s))throw new Error("Checksum verification failed!");return[r,e.slice(0,e.length-6)]}function Xh(t){let e,n,r=!1,s=!1;for(e=0;e<t.length;++e){if(n=t.charCodeAt(e),n<33||n>126)return!1;n>=97&&n<=122&&(r=!0),n>=65&&n<=90&&(s=!0)}return!(r&&s)}function Jh(t){const e=t.lastIndexOf("1");return!(e<1||e+7>t.length||t.length>90)}function Qh(t,e="bc",n=0){const r=[n,...Ka([...t],8,5)],s=Wr.find(o=>o.version===n)??Wr[0],i=Yh(e,r,s);return Wa(i),i}function Wa(t){t=t.toLowerCase();const e=t.split("1",1)[0],[n,r]=Ga(t),s=Ka(r.slice(1),5,8,!1),i=s.length;switch(!0){case e!==n:throw new Error("Returned hrp string is invalid.");case(s===null||i<2||i>40):throw new Error("Decoded string is invalid or out of spec.");case r[0]>16:throw new Error("Returned version bit is out of range.");default:return Uint8Array.from(s)}}function el(t){t=t.toLowerCase();const[e,n]=Ga(t);return n[0]}const Bo={encode:Qh,decode:Wa,version:el},Ya="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",tl=new TextEncoder;function Ja(t,e=!1){typeof t=="string"&&(t=tl.encode(t));const n=e?Xa:Ya;let r="",s=0,i=0;for(let o=0;o<t.length;o++)for(i=i<<8|t[o],s+=8;s>=6;)s-=6,r+=n[i>>s&63];if(s>0)for(i<<=6-s,r+=n[i&63];s<6;)r+=e?"":"=",s+=2;return r}function Qa(t,e=!1){const n=e||t.includes("-")||t.includes("_")?Xa.split(""):Ya.split("");t=t.replace(/=+$/,"");const r=t.split("");let s=0,i=0;const o=[];for(let a=0;a<r.length;a++){const f=r[a],h=n.indexOf(f);if(h===-1)throw new Error("Invalid character: "+f);s+=6,i<<=6,i|=h,s>=8&&(s-=8,o.push(i>>>s&255))}return new Uint8Array(o)}const _o={encode:Ja,decode:Qa},Io={encode:t=>Ja(t,!0),decode:t=>Qa(t,!0)};var Z;let A=(Z=class extends Uint8Array{constructor(e,n){if(e=Ke(e,!0),typeof n=="number"){const r=new Uint8Array(n).fill(0);r.set(new Uint8Array(e)),e=r.buffer}return super(e),this}get arr(){return[...this]}get num(){return this.toNum()}get big(){return this.toBig()}get str(){return this.toStr()}get hex(){return this.toHex()}get raw(){return new Uint8Array(this)}get bits(){return this.toBits()}get bin(){return this.toBin()}get b58chk(){return this.tob58chk()}get base64(){return this.toBase64()}get b64url(){return this.toB64url()}get digest(){return this.toHash()}get id(){return this.toHash().hex}get stream(){return new Mn(this)}toNum(e="le"){return vo(e==="le"?this.reverse():this)}toBig(e="le"){return Eo(e==="le"?this.reverse():this)}toHash(e="sha256"){switch(e){case"sha256":return new Z(Bn.sha256(this));case"hash256":return new Z(Bn.hash256(this));case"ripe160":return new Z(Bn.ripe160(this));case"hash160":return new Z(Bn.hash160(this));default:throw new Error("Unrecognized format:"+String(e))}}toHmac(e,n="hmac256"){switch(n){case"hmac256":return new Z(Bn.hmac256(e,this));case"hmac512":return new Z(Bn.hmac512(e,this));default:throw new Error("Unrecognized format:"+String(n))}}toStr(){return Rr(this)}toHex(){return Za(this)}toJson(){return JSON.parse(Rr(this))}toBytes(){return new Uint8Array(this)}toBits(){return bo(this)}toBin(){return bo(this).join("")}tob58chk(){return So.encode(this)}toB64url(){return Io.encode(this)}toBase64(){return _o.encode(this)}toBech32(e,n=0){return Bo.encode(this,e,n)}prepend(e){return Z.join([Z.bytes(e),this])}append(e){return Z.join([this,Z.bytes(e)])}slice(e,n){return new Z(new Uint8Array(this).slice(e,n))}subarray(e,n){return new Z(new Uint8Array(this).subarray(e,n))}reverse(){return new Z(new Uint8Array(this).reverse())}write(e,n){this.set(e,n)}prefixSize(e){const n=Z.varInt(this.length,e);return Z.join([n,this])}static from(e){return new Z(Uint8Array.from(e))}static of(...e){return new Z(Uint8Array.of(...e))}static join(e){const n=e.map(r=>Z.bytes(r));return new Z($a(n))}static varInt(e,n){if(e<253)return Z.num(e,1);if(e<65536)return Z.of(253,...Z.num(e,2,n));if(e<4294967296)return Z.of(254,...Z.num(e,4,n));if(BigInt(e)<0x10000000000000000n)return Z.of(255,...Z.num(e,8,n));throw new Error(`Value is too large: ${e}`)}static random(e=32){return new Z(Mf(e),e)}static normalize(e,n){return new Z(Ke(e,!0),n)}static hexify(e){return Oh(e)}static serialize(e,n){return new Z(Ph(e),n)}static revive(e){return Ch(e)}},(()=>{Z.num=(e,n,r="le")=>{const s=new Z(Fa(e),n);return r==="le"?s.reverse():s}})(),(()=>{Z.big=(e,n,r="le")=>{const s=new Z(ja(e),n);return r==="le"?s.reverse():s}})(),(()=>{Z.bin=(e,n)=>new Z(Uh(e),n)})(),(()=>{Z.any=(e,n)=>new Z(Ke(e,!1),n)})(),(()=>{Z.raw=(e,n)=>new Z(e,n)})(),(()=>{Z.str=(e,n)=>new Z(Lr(e),n)})(),(()=>{Z.hex=(e,n)=>new Z(Da(e),n)})(),(()=>{Z.json=e=>new Z(Lr(JSON.stringify(e)))})(),(()=>{Z.bytes=(e,n)=>new Z(Ke(e,!0),n)})(),(()=>{Z.base64=e=>new Z(_o.decode(e))})(),(()=>{Z.b64url=e=>new Z(Io.decode(e))})(),(()=>{Z.bech32=e=>new Z(Bo.decode(e))})(),(()=>{Z.b58chk=e=>new Z(So.decode(e))})(),(()=>{Z.encode=Lr})(),(()=>{Z.decode=Rr})(),Z),Mn=class{constructor(e){this.data=new Uint8Array(e),this.size=this.data.length}peek(e){if(e>this.size)throw new Error(`Size greater than stream: ${e} > ${this.size}`);return new A(this.data.slice(0,e).buffer)}read(e){e=e??this.readSize();const n=this.peek(e);return this.data=this.data.slice(e),this.size=this.data.length,n}readSize(e){const n=this.read(1).num;switch(!0){case(n>=0&&n<253):return n;case n===253:return this.read(2).toNum(e);case n===254:return this.read(4).toNum(e);case n===255:return this.read(8).toNum(e);default:throw new Error(`Varint is out of range: ${n}`)}}};function yt(t,e){const n=A.bytes(t);if(n.length!==e)throw new Error(`Invalid input size: ${n.hex} !== ${e}`)}function Me(t,e){if(e)throw new Error(t);return!1}function Dr(t,...e){const n=A.str(t).digest.raw,r=e.map(s=>A.normalize(s));return A.join([n,n,A.join(r)]).digest}function ec(t,e="main"){const n=e==="main"?["1"]:["m","n"];for(const r of n)if(t.startsWith(r))return!0;return!1}function tc(t,e="main"){const n=A.bytes(t),r=e==="main"?A.num(0):A.num(111);return yt(t,20),n.prepend(r).tob58chk()}function nl(t,e="main"){if(!ec(t,e))throw new TypeError("Invalid p2pkh address!");return A.b58chk(t).slice(1)}function rl(t){const e=A.bytes(t);return yt(e,20),["OP_DUP","OP_HASH160",e.hex,"OP_EQUALVERIFY","OP_CHECKSIG"]}function sl(t,e){const n=A.bytes(t);yt(n,33);const r=n.toHash("hash160");return tc(r,e)}const nc={check:ec,encode:tc,decode:nl,scriptPubKey:rl,fromPubKey:sl},rc={OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_SUCCESS80:80,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_SUCCESS98:98,OP_IF:99,OP_NOTIF:100,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_SUCCESS126:126,OP_SUCCESS127:127,OP_SUCCESS128:128,OP_SUCCESS129:129,OP_SIZE:130,OP_SUCCESS131:131,OP_SUCCESS132:132,OP_SUCCESS133:133,OP_SUCCESS134:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_SUCCESS137:137,OP_SUCCESS138:138,OP_1ADD:139,OP_1SUB:140,OP_SUCCESS141:141,OP_SUCCESS142:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_SUCCESS149:149,OP_SUCCESS150:150,OP_SUCCESS151:151,OP_SUCCESS152:152,OP_SUCCESS153:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_CHECKLOCKTIMEVERIFY:177,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKSIGADD:186};function il(t){if(t>186&&t<255)return"OP_SUCCESS"+String(t);for(const[e,n]of Object.entries(rc))if(n===t)return e;throw new Error("OPCODE not found:"+String(t))}function ol(t){for(const[e,n]of Object.entries(rc))if(e===t)return Number(n);throw new Error("OPCODE not found:"+t)}function al(t){switch(!0){case t===0:return"opcode";case(t>=1&&t<=75):return"varint";case t===76:return"pushdata1";case t===77:return"pushdata2";case t===78:return"pushdata4";case t<=254:return"opcode";default:throw new Error(`Invalid word range: ${t}`)}}function cl(t){const r=[];switch(!0){case typeof t!="number":return!1;case t===0:return!0;case r.includes(t):return!1;case(75<t&&t<254):return!0;default:return!1}}function Ct(t){return typeof t=="string"&&t.length%2===0&&/[0-9a-fA-F]/.test(t)}function sc(t){return Ct(t)||t instanceof Uint8Array}const Yr=520;function En(t=[],e=!0){let n=A.num(0);return Array.isArray(t)&&(n=A.raw(ic(t))),Ct(t)&&(n=A.hex(t)),t instanceof Uint8Array&&(n=A.raw(t)),e&&(n=n.prefixSize("be")),n}function ic(t){const e=[];for(const n of t)e.push(ul(n));return e.length>0?A.join(e):new Uint8Array}function ul(t){let e=new Uint8Array;if(typeof t=="string"){if(t.startsWith("OP_"))return A.num(ol(t),1);Ct(t)?e=A.hex(t):e=A.str(t)}else if(e=A.bytes(t),e.length===1&&e[0]<=16)return e[0]!==0&&(e[0]+=80),e;if(e.length>Yr){const n=hl(e);return ic(n)}return A.join([fl(e.length),e])}function fl(t){const e=A.num(76,1),n=A.num(77,1);switch(!0){case t<=75:return A.num(t);case(t>75&&t<256):return A.join([e,A.num(t,1)]);case(t>=256&&t<=Yr):return A.join([n,A.num(t,2,"be")]);default:throw new Error("Invalid word size:"+t.toString())}}function hl(t){const e=[],n=new Mn(t);for(;n.size>Yr;)e.push(n.read(Yr));return e.push(n.read(n.size)),e}function Ai(t,e=!1){let n=A.bytes(t);if(e){const s=n.stream.readSize("be");if(n.length!==s)throw new Error(`Varint does not match stream size: ${s} !== ${n.length}`);n=n.slice(1)}return ll(n)}function ll(t){const e=new Mn(t),n=[],r=e.size;let s,i,o,a=0;for(;a<r;)switch(s=e.read(1).num,i=al(s),a++,i){case"varint":n.push(e.read(s).hex),a+=s;break;case"pushdata1":o=e.read(1).reverse().num,n.push(e.read(o).hex),a+=o+1;break;case"pushdata2":o=e.read(2).reverse().num,n.push(e.read(o).hex),a+=o+2;break;case"pushdata4":o=e.read(4).reverse().num,n.push(e.read(o).hex),a+=o+4;break;case"opcode":if(!cl(s))throw new Error(`Invalid OPCODE: ${s}`);n.push(il(s));break;default:throw new Error(`Word type undefined: ${s}`)}return n}function dl(t,e){if(Array.isArray(t)&&(t=En(t,e)),t instanceof Uint8Array||Ct(t))return Ai(t,e);throw new Error("Invalid format: "+typeof t)}function pl(t,e){if((t instanceof Uint8Array||Ct(t))&&(t=Ai(t,e)),Array.isArray(t))return En(t,e);throw new Error("Invalid format: "+typeof t)}function gl(t){if(!Array.isArray(t))return A.bytes(t);throw new Error("Invalid format: "+typeof t)}const yl={toAsm:dl,toBytes:pl,toParam:gl},je={encode:En,decode:Ai,fmt:yl};function oc(t,e="main"){const n=e==="main"?["3"]:["2"];for(const r of n)if(t.startsWith(r))return!0;return!1}function ac(t,e="main"){const n=e==="main"?A.num(5):A.num(196),r=A.bytes(t);return yt(r,20),r.prepend(n).tob58chk()}function ml(t,e="main"){if(!oc(t,e))throw new TypeError(`Invalid p2sh address for network ${e}:`+t);return A.b58chk(t).slice(1)}function wl(t){return["OP_HASH160",A.bytes(t).hex,"OP_EQUAL"]}function xl(t,e){const n=je.fmt.toBytes(t,!1);return ac(n.toHash("hash160"),e)}const cc={check:oc,encode:ac,decode:ml,scriptPubKey:wl,fromScript:xl},Si={main:"bc",testnet:"tb",signet:"tb",regtest:"bcrt"},bl=["bc1q","tb1q","bcrt1q"];function uc(t){for(const e of bl)if(t.startsWith(e))return!0;return!1}function fc(t,e="main"){const n=Si[e],r=A.bytes(t);return yt(r,20),r.toBech32(n,0)}function vl(t){if(!uc(t))throw new TypeError("Invalid segwit address!");return A.bech32(t)}function El(t){const e=A.bytes(t);return yt(e,20),["OP_0",e.hex]}function Al(t,e){const n=A.bytes(t);yt(n,33);const r=n.toHash("hash160");return fc(r,e)}const hc={check:uc,encode:fc,decode:vl,scriptPubKey:El,fromPubKey:Al},Sl=["bc1q","tb1q","bcrt1q"];function lc(t){for(const e of Sl)if(t.startsWith(e))return!0;return!1}function dc(t,e="main"){const n=Si[e],r=A.bytes(t);return yt(r,32),r.toBech32(n,0)}function Bl(t){if(!lc(t))throw new TypeError("Invalid segwit address!");return A.bech32(t)}function _l(t){const e=A.bytes(t);return yt(e,32),["OP_0",e.hex]}function Il(t,e){const r=je.fmt.toBytes(t,!1).toHash("sha256");return dc(r,e)}const pc={check:lc,encode:dc,decode:Bl,scriptPubKey:_l,fromScript:Il};function mn(t){const e=A.bytes(t);return e.length>32?e.slice(1,33):e}const Tl=["bc1p","tb1p","bcrt1p"];function gc(t){for(const e of Tl)if(t.startsWith(e))return!0;return!1}function yc(t,e="main"){const n=Si[e],r=A.bytes(t);return yt(r,32),r.toBech32(n,1)}function kl(t){if(!gc(t))throw new TypeError("Invalid taproot address!");return A.bech32(t)}function $l(t){const e=A.bytes(t);return yt(e,32),["OP_1",e.hex]}function Ul(t,e){const n=mn(t);return yc(n,e)}const mc={check:gc,encode:yc,decode:kl,scriptPubKey:$l,fromPubKey:Ul},Ol={version:2,vin:[],vout:[],locktime:0},Pl={scriptSig:[],sequence:4294967293,witness:[]},Cl={value:0n,scriptPubKey:[]};function Bi(t){const e={...Ol,...t};return e.vin=e.vin.map(n=>({...Pl,...n})),e.vout=e.vout.map(n=>({...Cl,...n})),e}function gs(t,e){const{version:n,vin:r,vout:s,locktime:i}=Bi(t),o=e!==!0&&Hl(r),a=[_i(n)];o&&a.push(A.hex("0001")),a.push(Nl(r)),a.push(Ll(s));for(const f of r)o&&a.push(Dl(f.witness));return a.push(Ii(i)),A.join(a)}function Hl(t){for(const e of t){const{witness:n}=e;if(typeof n=="string"||n instanceof Uint8Array||Array.isArray(n)&&n.length>0)return!0}return!1}function _i(t){return A.num(t,4).reverse()}function pr(t){return A.hex(t,32).reverse()}function gr(t){return A.num(t,4).reverse()}function yr(t=4294967293){return A.bytes(t).reverse()}function Nl(t){const e=[A.varInt(t.length)];for(const n of t){const{txid:r,vout:s,scriptSig:i,sequence:o}=n;e.push(pr(r)),e.push(gr(s)),e.push(En(i,!0)),e.push(yr(o))}return A.join(e)}function nn(t){if(typeof t=="number"){if(t%1!==0)throw new Error("Value must be an integer:"+String(t));return A.num(t,8).reverse()}return A.big(t,8).reverse()}function Ll(t){const e=[A.varInt(t.length)];for(const n of t)e.push(Rl(n));return A.join(e)}function Rl(t){const{value:e,scriptPubKey:n}=t,r=[];return r.push(nn(e)),r.push(En(n,!0)),A.join(r)}function Dl(t=[]){const e=[];if(Array.isArray(t)){const n=A.varInt(t.length);e.push(n);for(const r of t)e.push(Fl(r));return A.join(e)}else return A.normalize(t)}function Fl(t){return jl(t)?new A(0):En(t,!0)}function jl(t){if(Array.isArray(t))return t.length===0;if(typeof t=="string"&&t==="")return!0;const e=A.bytes(t);return e.length===1&&e[0]===0}function Ii(t){if(typeof t=="string")return A.hex(t,4);if(typeof t=="number")return A.num(t,4).reverse();throw new Error("Unrecognized format: "+String(t))}function Ti(t){typeof t=="string"&&(t=A.hex(t).raw);const e=new Mn(t),n=Zl(e),r=Ml(e),s=zl(e),i=ql(e);if(r)for(const a of s)a.witness=Gl(e);const o=Wl(e);return{version:n,vin:s,vout:i,locktime:o}}function Zl(t){return t.read(4).reverse().toNum()}function Ml(t){const[e,n]=[...t.peek(2)];if(e===0){if(t.read(2),n===1)return!0;throw new Error(`Invalid witness flag: ${n}`)}return!1}function zl(t){const e=[],n=t.readSize();for(let r=0;r<n;r++)e.push(Vl(t));return e}function Vl(t){return{txid:t.read(32).reverse().toHex(),vout:t.read(4).reverse().toNum(),scriptSig:xc(t,!0),sequence:t.read(4).reverse().toHex(),witness:[]}}function ql(t){const e=[],n=t.readSize();for(let r=0;r<n;r++)e.push(Kl(t));return e}function Kl(t){return{value:t.read(8).reverse().big,scriptPubKey:xc(t,!0)}}function Gl(t){const e=[],n=t.readSize();for(let r=0;r<n;r++){const s=wc(t,!0);e.push(s??"")}return e}function wc(t,e){const n=e===!0?t.readSize("be"):t.size;return n>0?t.read(n).hex:null}function xc(t,e){const n=wc(t,e);return n!==null?n:[]}function Wl(t){return t.read(4).reverse().toNum()}function Yl(t){if(sc(t))return Ti(t);if(typeof t=="object"&&!(t instanceof Uint8Array))return gs(t),Bi(t);throw new Error("Invalid format: "+typeof t)}function Xl(t){if(sc(t))return Ti(t),A.bytes(t);if(typeof t=="object")return gs(t);throw new Error("Invalid format: "+typeof t)}const bc={toBytes:Xl,toJson:Yl},Jl=[["p2pkh",/^76a914(?<hash>\w{40})88ac$/],["p2sh",/^a914(?<hash>\w{40})87$/],["p2w-pkh",/^0014(?<hash>\w{40})$/],["p2w-sh",/^0020(?<hash>\w{64})$/],["p2tr",/^5120(?<hash>\w{64})$/]],Ql=[192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,254,102,126,128,132,150,152,186,188,190];function e0(t){let e=t.at(-1);return Ct(e)&&(e=A.hex(e)),t.length>1&&e instanceof Uint8Array&&e[0]===80?(t.pop(),A.raw(e)):null}function t0(t){let e=t.at(-1);return Ct(e)&&(e=A.hex(e)),t.length>1&&e instanceof Uint8Array&&e.length>32&&Ql.includes(e[0]&254)?(t.pop(),A.raw(e)):null}function n0(t){if(t.length>1){const e=t.at(-1);try{const n=je.fmt.toBytes(e);return t.pop(),n}catch{return null}}return null}function r0(t){const e=[];for(const n of t)(Ct(n)||n instanceof Uint8Array)&&e.push(n);return e}function s0(t=[]){const e=[...t],n=e0(e),r=t0(e),s=n0(e),i=r0(e);return{annex:n,cblock:r,script:s,params:i}}function i0(t){const e=je.fmt.toBytes(t,!1).hex;for(const[n,r]of Jl){const s=n,{groups:i}=r.exec(e)??{},{hash:o}=i??{};if(Ct(o))return{type:s,data:A.hex(o)}}return{type:"raw",data:A.hex(e)}}function o0(t){const e=bc.toJson(t);return gs(e,!0).toHash("hash256").reverse().hex}const it={create:Bi,encode:gs,decode:Ti,fmt:bc,util:{getTxid:o0,readScriptPubKey:i0,readWitness:s0}},a0=[["1","p2pkh","main",20,"base58"],["3","p2sh","main",20,"base58"],["m","p2pkh","testnet",20,"base58"],["n","p2pkh","testnet",20,"base58"],["2","p2sh","testnet",20,"base58"],["bc1q","p2w-pkh","main",20,"bech32"],["tb1q","p2w-pkh","testnet",20,"bech32"],["bcrt1q","p2w-pkh","regtest",20,"bech32"],["bc1q","p2w-sh","main",32,"bech32"],["tb1q","p2w-sh","testnet",32,"bech32"],["bcrt1q","p2w-sh","regtest",32,"bech32"],["bc1p","p2tr","main",32,"bech32m"],["tb1p","p2tr","testnet",32,"bech32m"],["bcrt1p","p2tr","regtest",32,"bech32m"]];function c0(t,e){switch(e){case"base58":return A.b58chk(t).slice(1);case"bech32":return A.bech32(t);case"bech32m":return A.bech32(t);default:throw new Error("Invalid address format: "+e)}}function u0(t){for(const e of a0){const[n,r,s,i,o]=e;if(t.startsWith(n)&&c0(t,o).length===i)return e}throw new Error("Invalid address: "+t)}function vc(t){switch(t){case"p2pkh":return nc;case"p2sh":return cc;case"p2w-pkh":return hc;case"p2w-sh":return pc;case"p2tr":return mc;default:throw new Error("Invalid address type: "+t)}}function Ec(t){const[e,n,r]=u0(t),s=vc(n),i=s.decode(t,r),o=s.scriptPubKey(i);return{prefix:e,type:n,network:r,data:i,script:o}}function f0(t,e){const{type:n,data:r}=it.util.readScriptPubKey(t);return vc(n).encode(r,e)}function h0(t){const{script:e}=Ec(t);return je.fmt.toAsm(e,!1)}const $r={p2pkh:nc,p2sh:cc,p2wpkh:hc,p2wsh:pc,p2tr:mc,decode:Ec,fromScriptPubKey:f0,toScriptPubKey:h0},l0=[1,2,3];function ki(t,e,n={}){const{sigflag:r=1}=n,s=(r&128)===128,i=r%128;if(!l0.includes(i))throw new Error("Invalid hash type: "+String(r));const o=it.fmt.toJson(t),{version:a,vin:f,vout:h,locktime:l}=o,{txid:p,vout:y,prevout:m,sequence:b}=f[e],{value:w}=m??{};if(w===void 0)throw new Error("Prevout value is empty!");let v=n.script;if(v===void 0&&n.pubkey!==void 0&&(v=`76a914${A.bytes(n.pubkey).toHash("hash160").hex}88ac`),v===void 0)throw new Error("No pubkey / script has been set!");if(je.fmt.toAsm(v).includes("OP_CODESEPARATOR"))throw new Error("This library does not currently support the use of OP_CODESEPARATOR in segwit scripts.");const B=[_i(a),d0(f,s),p0(f,i,s),pr(p),gr(y),je.encode(v,!0),nn(w),yr(b),g0(h,e,i),Ii(l),A.num(r,4).reverse()];return A.join(B).toHash("hash256")}function d0(t,e){if(e===!0)return A.num(0,32);const n=[];for(const{txid:r,vout:s}of t)n.push(pr(r)),n.push(gr(s));return A.join(n).toHash("hash256")}function p0(t,e,n){if(n||e!==1)return A.num(0,32);const r=[];for(const{sequence:s}of t)r.push(yr(s));return A.join(r).toHash("hash256")}function g0(t,e,n){const r=[];if(n===1){for(const{value:s,scriptPubKey:i}of t)r.push(nn(s)),r.push(je.encode(i,!0));return A.join(r).toHash("hash256")}if(n===3&&e<t.length){const{value:s,scriptPubKey:i}=t[e];return r.push(nn(s)),r.push(je.encode(i,!0)),A.join(r).toHash("hash256")}return A.num(0,32)}function qs(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function y0(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}function Ac(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function m0(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");qs(t.outputLen),qs(t.blockLen)}function w0(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function x0(t,e){Ac(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const b0={number:qs,bool:y0,bytes:Ac,hash:m0,exists:w0,output:x0};var hn=b0;const Us=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Os=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),bt=(t,e)=>t<<32-e|t>>>e,v0=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!v0)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function E0(t){if(typeof t!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof t}`);return new TextEncoder().encode(t)}function $i(t){if(typeof t=="string"&&(t=E0(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}function A0(...t){if(!t.every(r=>r instanceof Uint8Array))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];const e=t.reduce((r,s)=>r+s.length,0),n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let Sc=class{clone(){return this._cloneInto()}};function Bc(t){const e=r=>t().update($i(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function _c(t=32){if(Us&&typeof Us.getRandomValues=="function")return Us.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function S0(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),f=r?4:0,h=r?0:4;t.setUint32(e+f,o,r),t.setUint32(e+h,a,r)}let B0=class extends Sc{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Os(this.buffer)}update(e){hn.exists(this);const{view:n,buffer:r,blockLen:s}=this;e=$i(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const f=Os(e);for(;s<=i-o;o+=s)this.process(f,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){hn.exists(this),hn.output(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let p=o;p<s;p++)n[p]=0;S0(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Os(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=f/4,l=this.get();if(h>l.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<h;p++)a.setUint32(4*p,l[p],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const _0=(t,e,n)=>t&e^~t&n,I0=(t,e,n)=>t&e^t&n^e&n,T0=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ft=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),jt=new Uint32Array(64);let Ic=class extends B0{constructor(){super(64,32,8,!1),this.A=Ft[0]|0,this.B=Ft[1]|0,this.C=Ft[2]|0,this.D=Ft[3]|0,this.E=Ft[4]|0,this.F=Ft[5]|0,this.G=Ft[6]|0,this.H=Ft[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:f}=this;return[e,n,r,s,i,o,a,f]}set(e,n,r,s,i,o,a,f){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=f|0}process(e,n){for(let p=0;p<16;p++,n+=4)jt[p]=e.getUint32(n,!1);for(let p=16;p<64;p++){const y=jt[p-15],m=jt[p-2],b=bt(y,7)^bt(y,18)^y>>>3,w=bt(m,17)^bt(m,19)^m>>>10;jt[p]=w+jt[p-7]+b+jt[p-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:f,G:h,H:l}=this;for(let p=0;p<64;p++){const y=bt(a,6)^bt(a,11)^bt(a,25),m=l+y+_0(a,f,h)+T0[p]+jt[p]|0,w=(bt(r,2)^bt(r,13)^bt(r,22))+I0(r,s,i)|0;l=h,h=f,f=a,a=o+m|0,o=i,i=s,s=r,r=m+w|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,f=f+this.F|0,h=h+this.G|0,l=l+this.H|0,this.set(r,s,i,o,a,f,h,l)}roundClean(){jt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},k0=class extends Ic{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const Xr=Bc(()=>new Ic);Bc(()=>new k0);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $0=BigInt(0),Ui=BigInt(1),U0=BigInt(2),ys=t=>t instanceof Uint8Array,O0=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ln(t){if(!ys(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=O0[t[n]];return e}function Tc(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function Oi(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function Rn(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(t.length%2)throw new Error("hex string is invalid: unpadded "+t.length);const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const r=n*2,s=t.slice(r,r+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("invalid byte sequence");e[n]=i}return e}function Ye(t){return Oi(Ln(t))}function Pi(t){if(!ys(t))throw new Error("Uint8Array expected");return Oi(Ln(Uint8Array.from(t).reverse()))}const tn=(t,e)=>Rn(t.toString(16).padStart(e*2,"0")),kc=(t,e)=>tn(t,e).reverse(),P0=t=>Rn(Tc(t));function Re(t,e,n){let r;if(typeof e=="string")try{r=Rn(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(ys(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${t} expected ${n} bytes, got ${s}`);return r}function nt(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!ys(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function C0(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function ms(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new TextEncoder().encode(t)}function H0(t){let e;for(e=0;t>0n;t>>=Ui,e+=1);return e}const N0=(t,e)=>t>>BigInt(e)&1n,L0=(t,e,n)=>t|(n?Ui:$0)<<BigInt(e),Ci=t=>(U0<<BigInt(t-1))-Ui,Ps=t=>new Uint8Array(t),To=t=>Uint8Array.from(t);function $c(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Ps(t),s=Ps(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...p)=>n(s,r,...p),f=(p=Ps())=>{s=a(To([0]),p),r=a(),p.length!==0&&(s=a(To([1]),p),r=a())},h=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let p=0;const y=[];for(;p<e;){r=a();const m=r.slice();y.push(m),p+=r.length}return nt(...y)};return(p,y)=>{o(),f(p);let m;for(;!(m=y(h()));)f();return o(),m}}const R0={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function zn(t,e,n={}){const r=(s,i,o)=>{const a=R0[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const f=t[s];if(!(o&&f===void 0)&&!a(f,t))throw new Error(`Invalid param ${String(s)}=${f} (${typeof f}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}var D0=Object.freeze({__proto__:null,bitGet:N0,bitLen:H0,bitMask:Ci,bitSet:L0,bytesToHex:Ln,bytesToNumberBE:Ye,bytesToNumberLE:Pi,concatBytes:nt,createHmacDrbg:$c,ensureBytes:Re,equalBytes:C0,hexToBytes:Rn,hexToNumber:Oi,numberToBytesBE:tn,numberToBytesLE:kc,numberToHexUnpadded:Tc,numberToVarBytesBE:P0,utf8ToBytes:ms,validateObject:zn});/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Le=BigInt(0),ke=BigInt(1),un=BigInt(2),F0=BigInt(3),Ks=BigInt(4),ko=BigInt(5),$o=BigInt(8);BigInt(9);BigInt(16);function Ne(t,e){const n=t%e;return n>=Le?n:e+n}function j0(t,e,n){if(n<=Le||e<Le)throw new Error("Expected power/modulo > 0");if(n===ke)return Le;let r=ke;for(;e>Le;)e&ke&&(r=r*t%n),t=t*t%n,e>>=ke;return r}function at(t,e,n){let r=t;for(;e-- >Le;)r*=r,r%=n;return r}function Gs(t,e){if(t===Le||e<=Le)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Ne(t,e),r=e,s=Le,i=ke;for(;n!==Le;){const a=r/n,f=r%n,h=s-i*a;r=n,n=f,s=i,i=h}if(r!==ke)throw new Error("invert: does not exist");return Ne(s,e)}function Z0(t){const e=(t-ke)/un;let n,r,s;for(n=t-ke,r=0;n%un===Le;n/=un,r++);for(s=un;s<t&&j0(s,e,t)!==t-ke;s++);if(r===1){const o=(t+ke)/Ks;return function(f,h){const l=f.pow(h,o);if(!f.eql(f.sqr(l),h))throw new Error("Cannot find square root");return l}}const i=(n+ke)/un;return function(a,f){if(a.pow(f,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let h=r,l=a.pow(a.mul(a.ONE,s),n),p=a.pow(f,i),y=a.pow(f,n);for(;!a.eql(y,a.ONE);){if(a.eql(y,a.ZERO))return a.ZERO;let m=1;for(let w=a.sqr(y);m<h&&!a.eql(w,a.ONE);m++)w=a.sqr(w);const b=a.pow(l,ke<<BigInt(h-m-1));l=a.sqr(b),p=a.mul(p,b),y=a.mul(y,l),h=m}return p}}function M0(t){if(t%Ks===F0){const e=(t+ke)/Ks;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%$o===ko){const e=(t-ko)/$o;return function(r,s){const i=r.mul(s,un),o=r.pow(i,e),a=r.mul(s,o),f=r.mul(r.mul(a,un),o),h=r.mul(a,r.sub(f,r.ONE));if(!r.eql(r.sqr(h),s))throw new Error("Cannot find square root");return h}}return Z0(t)}const z0=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Uc(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=z0.reduce((r,s)=>(r[s]="function",r),e);return zn(t,n)}function V0(t,e,n){if(n<Le)throw new Error("Expected power > 0");if(n===Le)return t.ONE;if(n===ke)return e;let r=t.ONE,s=e;for(;n>Le;)n&ke&&(r=t.mul(r,s)),s=t.sqr(s),n>>=ke;return r}function q0(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function Hi(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function K0(t,e,n=!1,r={}){if(t<=Le)throw new Error(`Expected Fp ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=Hi(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=M0(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:Ci(s),ZERO:Le,ONE:ke,create:f=>Ne(f,t),isValid:f=>{if(typeof f!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof f}`);return Le<=f&&f<t},is0:f=>f===Le,isOdd:f=>(f&ke)===ke,neg:f=>Ne(-f,t),eql:(f,h)=>f===h,sqr:f=>Ne(f*f,t),add:(f,h)=>Ne(f+h,t),sub:(f,h)=>Ne(f-h,t),mul:(f,h)=>Ne(f*h,t),pow:(f,h)=>V0(a,f,h),div:(f,h)=>Ne(f*Gs(h,t),t),sqrN:f=>f*f,addN:(f,h)=>f+h,subN:(f,h)=>f-h,mulN:(f,h)=>f*h,inv:f=>Gs(f,t),sqrt:r.sqrt||(f=>o(a,f)),invertBatch:f=>q0(a,f),cmov:(f,h,l)=>l?h:f,toBytes:f=>n?kc(f,i):tn(f,i),fromBytes:f=>{if(f.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${f.length}`);return n?Pi(f):Ye(f)}});return Object.freeze(a)}function G0(t,e,n=!1){t=Re("privateHash",t);const r=t.length,s=Hi(e).nByteLength+8;if(s<24||r<s||r>1024)throw new Error(`hashToPrivateScalar: expected ${s}-1024 bytes of input, got ${r}`);const i=n?Pi(t):Ye(t);return Ne(i,e-ke)+ke}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const W0=BigInt(0),Cs=BigInt(1);function Y0(t,e){const n=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>W0;)i&Cs&&(o=o.add(a)),a=a.double(),i>>=Cs;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=r(i),f=[];let h=s,l=h;for(let p=0;p<o;p++){l=h,f.push(l);for(let y=1;y<a;y++)l=l.add(h),f.push(l);h=l.double()}return f},wNAF(s,i,o){const{windows:a,windowSize:f}=r(s);let h=t.ZERO,l=t.BASE;const p=BigInt(2**s-1),y=2**s,m=BigInt(s);for(let b=0;b<a;b++){const w=b*f;let v=Number(o&p);o>>=m,v>f&&(v-=y,o+=Cs);const B=w,_=w+Math.abs(v)-1,S=b%2!==0,C=v<0;v===0?l=l.add(n(S,i[B])):h=h.add(n(C,i[_]))}return{p:h,f:l}},wNAFCached(s,i,o,a){const f=s._WINDOW_SIZE||1;let h=i.get(s);return h||(h=this.precomputeWindow(s,f),f!==1&&i.set(s,a(h))),this.wNAF(f,h,o)}}}function Oc(t){return Uc(t.Fp),zn(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Hi(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function X0(t){const e=Oc(t);zn(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:J0,hexToBytes:Q0}=D0,ln={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=ln;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]===0&&r[1]<=127)throw new e("Invalid signature integer: trailing length");return{d:J0(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=ln,n=typeof t=="string"?Q0(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=ln._parseInt(n.subarray(2)),{d:o,l:a}=ln._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=h=>Number.parseInt(h[0],16)>=8?"00"+h:h,n=h=>{const l=h.toString(16);return l.length&1?`0${l}`:l},r=e(n(t.s)),s=e(n(t.r)),i=r.length/2,o=s.length/2,a=n(i),f=n(o);return`30${n(o+i+4)}02${f}${s}02${a}${r}`}},ft=BigInt(0),Ce=BigInt(1),Tt=BigInt(2),Jr=BigInt(3),Uo=BigInt(4);function ed(t){const e=X0(t),{Fp:n}=e,r=e.toBytes||((b,w,v)=>{const B=w.toAffine();return nt(Uint8Array.from([4]),n.toBytes(B.x),n.toBytes(B.y))}),s=e.fromBytes||(b=>{const w=b.subarray(1),v=n.fromBytes(w.subarray(0,n.BYTES)),B=n.fromBytes(w.subarray(n.BYTES,2*n.BYTES));return{x:v,y:B}});function i(b){const{a:w,b:v}=e,B=n.sqr(b),_=n.mul(B,b);return n.add(n.add(_,n.mul(b,w)),v)}function o(b){return typeof b=="bigint"&&ft<b&&b<e.n}function a(b){if(!o(b))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function f(b){const{allowedPrivateKeyLengths:w,nByteLength:v,wrapPrivateKey:B,n:_}=e;if(w&&typeof b!="bigint"){if(b instanceof Uint8Array&&(b=Ln(b)),typeof b!="string"||!w.includes(b.length))throw new Error("Invalid key");b=b.padStart(v*2,"0")}let S;try{S=typeof b=="bigint"?b:Ye(Re("private key",b,v))}catch{throw new Error(`private key must be ${v} bytes, hex or bigint, not ${typeof b}`)}return B&&(S=Ne(S,_)),a(S),S}const h=new Map;function l(b){if(!(b instanceof p))throw new Error("ProjectivePoint expected")}class p{constructor(w,v,B){if(this.px=w,this.py=v,this.pz=B,w==null||!n.isValid(w))throw new Error("x required");if(v==null||!n.isValid(v))throw new Error("y required");if(B==null||!n.isValid(B))throw new Error("z required")}static fromAffine(w){const{x:v,y:B}=w||{};if(!w||!n.isValid(v)||!n.isValid(B))throw new Error("invalid affine point");if(w instanceof p)throw new Error("projective point not allowed");const _=S=>n.eql(S,n.ZERO);return _(v)&&_(B)?p.ZERO:new p(v,B,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){const v=n.invertBatch(w.map(B=>B.pz));return w.map((B,_)=>B.toAffine(v[_])).map(p.fromAffine)}static fromHex(w){const v=p.fromAffine(s(Re("pointHex",w)));return v.assertValidity(),v}static fromPrivateKey(w){return p.BASE.multiply(f(w))}_setWindowSize(w){this._WINDOW_SIZE=w,h.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:w,y:v}=this.toAffine();if(!n.isValid(w)||!n.isValid(v))throw new Error("bad point: x or y not FE");const B=n.sqr(v),_=i(w);if(!n.eql(B,_))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:w}=this.toAffine();if(n.isOdd)return!n.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){l(w);const{px:v,py:B,pz:_}=this,{px:S,py:C,pz:I}=w,U=n.eql(n.mul(v,I),n.mul(S,_)),O=n.eql(n.mul(B,I),n.mul(C,_));return U&&O}negate(){return new p(this.px,n.neg(this.py),this.pz)}double(){const{a:w,b:v}=e,B=n.mul(v,Jr),{px:_,py:S,pz:C}=this;let I=n.ZERO,U=n.ZERO,O=n.ZERO,$=n.mul(_,_),N=n.mul(S,S),j=n.mul(C,C),q=n.mul(_,S);return q=n.add(q,q),O=n.mul(_,C),O=n.add(O,O),I=n.mul(w,O),U=n.mul(B,j),U=n.add(I,U),I=n.sub(N,U),U=n.add(N,U),U=n.mul(I,U),I=n.mul(q,I),O=n.mul(B,O),j=n.mul(w,j),q=n.sub($,j),q=n.mul(w,q),q=n.add(q,O),O=n.add($,$),$=n.add(O,$),$=n.add($,j),$=n.mul($,q),U=n.add(U,$),j=n.mul(S,C),j=n.add(j,j),$=n.mul(j,q),I=n.sub(I,$),O=n.mul(j,N),O=n.add(O,O),O=n.add(O,O),new p(I,U,O)}add(w){l(w);const{px:v,py:B,pz:_}=this,{px:S,py:C,pz:I}=w;let U=n.ZERO,O=n.ZERO,$=n.ZERO;const N=e.a,j=n.mul(e.b,Jr);let q=n.mul(v,S),Y=n.mul(B,C),ie=n.mul(_,I),ce=n.add(v,B),k=n.add(S,C);ce=n.mul(ce,k),k=n.add(q,Y),ce=n.sub(ce,k),k=n.add(v,_);let H=n.add(S,I);return k=n.mul(k,H),H=n.add(q,ie),k=n.sub(k,H),H=n.add(B,_),U=n.add(C,I),H=n.mul(H,U),U=n.add(Y,ie),H=n.sub(H,U),$=n.mul(N,k),U=n.mul(j,ie),$=n.add(U,$),U=n.sub(Y,$),$=n.add(Y,$),O=n.mul(U,$),Y=n.add(q,q),Y=n.add(Y,q),ie=n.mul(N,ie),k=n.mul(j,k),Y=n.add(Y,ie),ie=n.sub(q,ie),ie=n.mul(N,ie),k=n.add(k,ie),q=n.mul(Y,k),O=n.add(O,q),q=n.mul(H,k),U=n.mul(ce,U),U=n.sub(U,q),q=n.mul(ce,Y),$=n.mul(H,$),$=n.add($,q),new p(U,O,$)}subtract(w){return this.add(w.negate())}is0(){return this.equals(p.ZERO)}wNAF(w){return m.wNAFCached(this,h,w,v=>{const B=n.invertBatch(v.map(_=>_.pz));return v.map((_,S)=>_.toAffine(B[S])).map(p.fromAffine)})}multiplyUnsafe(w){const v=p.ZERO;if(w===ft)return v;if(a(w),w===Ce)return this;const{endo:B}=e;if(!B)return m.unsafeLadder(this,w);let{k1neg:_,k1:S,k2neg:C,k2:I}=B.splitScalar(w),U=v,O=v,$=this;for(;S>ft||I>ft;)S&Ce&&(U=U.add($)),I&Ce&&(O=O.add($)),$=$.double(),S>>=Ce,I>>=Ce;return _&&(U=U.negate()),C&&(O=O.negate()),O=new p(n.mul(O.px,B.beta),O.py,O.pz),U.add(O)}multiply(w){a(w);let v=w,B,_;const{endo:S}=e;if(S){const{k1neg:C,k1:I,k2neg:U,k2:O}=S.splitScalar(v);let{p:$,f:N}=this.wNAF(I),{p:j,f:q}=this.wNAF(O);$=m.constTimeNegate(C,$),j=m.constTimeNegate(U,j),j=new p(n.mul(j.px,S.beta),j.py,j.pz),B=$.add(j),_=N.add(q)}else{const{p:C,f:I}=this.wNAF(v);B=C,_=I}return p.normalizeZ([B,_])[0]}multiplyAndAddUnsafe(w,v,B){const _=p.BASE,S=(I,U)=>U===ft||U===Ce||!I.equals(_)?I.multiplyUnsafe(U):I.multiply(U),C=S(this,v).add(S(w,B));return C.is0()?void 0:C}toAffine(w){const{px:v,py:B,pz:_}=this,S=this.is0();w==null&&(w=S?n.ONE:n.inv(_));const C=n.mul(v,w),I=n.mul(B,w),U=n.mul(_,w);if(S)return{x:n.ZERO,y:n.ZERO};if(!n.eql(U,n.ONE))throw new Error("invZ was invalid");return{x:C,y:I}}isTorsionFree(){const{h:w,isTorsionFree:v}=e;if(w===Ce)return!0;if(v)return v(p,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:w,clearCofactor:v}=e;return w===Ce?this:v?v(p,this):this.multiplyUnsafe(e.h)}toRawBytes(w=!0){return this.assertValidity(),r(p,this,w)}toHex(w=!0){return Ln(this.toRawBytes(w))}}p.BASE=new p(e.Gx,e.Gy,n.ONE),p.ZERO=new p(n.ZERO,n.ONE,n.ZERO);const y=e.nBitLength,m=Y0(p,e.endo?Math.ceil(y/2):y);return{CURVE:e,ProjectivePoint:p,normPrivateKeyToScalar:f,weierstrassEquation:i,isWithinCurveOrder:o}}function td(t){const e=Oc(t);return zn(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function nd(t){const e=td(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(k){return ft<k&&k<n.ORDER}function a(k){return Ne(k,r)}function f(k){return Gs(k,r)}const{ProjectivePoint:h,normPrivateKeyToScalar:l,weierstrassEquation:p,isWithinCurveOrder:y}=ed({...e,toBytes(k,H,L){const z=H.toAffine(),X=n.toBytes(z.x),me=nt;return L?me(Uint8Array.from([H.hasEvenY()?2:3]),X):me(Uint8Array.from([4]),X,n.toBytes(z.y))},fromBytes(k){const H=k.length,L=k[0],z=k.subarray(1);if(H===s&&(L===2||L===3)){const X=Ye(z);if(!o(X))throw new Error("Point is not on curve");const me=p(X);let G=n.sqrt(me);const Q=(G&Ce)===Ce;return(L&1)===1!==Q&&(G=n.neg(G)),{x:X,y:G}}else if(H===i&&L===4){const X=n.fromBytes(z.subarray(0,n.BYTES)),me=n.fromBytes(z.subarray(n.BYTES,2*n.BYTES));return{x:X,y:me}}else throw new Error(`Point of length ${H} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),m=k=>Ln(tn(k,e.nByteLength));function b(k){const H=r>>Ce;return k>H}function w(k){return b(k)?a(-k):k}const v=(k,H,L)=>Ye(k.slice(H,L));class B{constructor(H,L,z){this.r=H,this.s=L,this.recovery=z,this.assertValidity()}static fromCompact(H){const L=e.nByteLength;return H=Re("compactSignature",H,L*2),new B(v(H,0,L),v(H,L,2*L))}static fromDER(H){const{r:L,s:z}=ln.toSig(Re("DER",H));return new B(L,z)}assertValidity(){if(!y(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!y(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(H){return new B(this.r,this.s,H)}recoverPublicKey(H){const{r:L,s:z,recovery:X}=this,me=O(Re("msgHash",H));if(X==null||![0,1,2,3].includes(X))throw new Error("recovery id invalid");const G=X===2||X===3?L+e.n:L;if(G>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const Q=X&1?"03":"02",xe=h.fromHex(Q+m(G)),he=f(G),ue=a(-me*he),Te=a(z*he),Pe=h.BASE.multiplyAndAddUnsafe(xe,ue,Te);if(!Pe)throw new Error("point at infinify");return Pe.assertValidity(),Pe}hasHighS(){return b(this.s)}normalizeS(){return this.hasHighS()?new B(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Rn(this.toDERHex())}toDERHex(){return ln.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Rn(this.toCompactHex())}toCompactHex(){return m(this.r)+m(this.s)}}const _={isValidPrivateKey(k){try{return l(k),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const k=e.randomBytes(n.BYTES+8),H=G0(k,r);return tn(H,e.nByteLength)},precompute(k=8,H=h.BASE){return H._setWindowSize(k),H.multiply(BigInt(3)),H}};function S(k,H=!0){return h.fromPrivateKey(k).toRawBytes(H)}function C(k){const H=k instanceof Uint8Array,L=typeof k=="string",z=(H||L)&&k.length;return H?z===s||z===i:L?z===2*s||z===2*i:k instanceof h}function I(k,H,L=!0){if(C(k))throw new Error("first arg must be private key");if(!C(H))throw new Error("second arg must be public key");return h.fromHex(H).multiply(l(k)).toRawBytes(L)}const U=e.bits2int||function(k){const H=Ye(k),L=k.length*8-e.nBitLength;return L>0?H>>BigInt(L):H},O=e.bits2int_modN||function(k){return a(U(k))},$=Ci(e.nBitLength);function N(k){if(typeof k!="bigint")throw new Error("bigint expected");if(!(ft<=k&&k<$))throw new Error(`bigint expected < 2^${e.nBitLength}`);return tn(k,e.nByteLength)}function j(k,H,L=q){if(["recovered","canonical"].some(He=>He in L))throw new Error("sign() legacy options not supported");const{hash:z,randomBytes:X}=e;let{lowS:me,prehash:G,extraEntropy:Q}=L;me==null&&(me=!0),k=Re("msgHash",k),G&&(k=Re("prehashed msgHash",z(k)));const xe=O(k),he=l(H),ue=[N(he),N(xe)];if(Q!=null){const He=Q===!0?X(n.BYTES):Q;ue.push(Re("extraEntropy",He,n.BYTES))}const Te=nt(...ue),Pe=xe;function Ue(He){const Ve=U(He);if(!y(Ve))return;const mt=f(Ve),qe=h.BASE.multiply(Ve).toAffine(),Se=a(qe.x);if(Se===ft)return;const Ze=a(mt*a(Pe+Se*he));if(Ze===ft)return;let wr=(qe.x===Se?0:2)|Number(qe.y&Ce),xr=Ze;return me&&b(Ze)&&(xr=w(Ze),wr^=1),new B(Se,xr,wr)}return{seed:Te,k2sig:Ue}}const q={lowS:e.lowS,prehash:!1},Y={lowS:e.lowS,prehash:!1};function ie(k,H,L=q){const{seed:z,k2sig:X}=j(k,H,L);return $c(e.hash.outputLen,e.nByteLength,e.hmac)(z,X)}h.BASE._setWindowSize(8);function ce(k,H,L,z=Y){var qe;const X=k;if(H=Re("msgHash",H),L=Re("publicKey",L),"strict"in z)throw new Error("options.strict was renamed to lowS");const{lowS:me,prehash:G}=z;let Q,xe;try{if(typeof X=="string"||X instanceof Uint8Array)try{Q=B.fromDER(X)}catch(Se){if(!(Se instanceof ln.Err))throw Se;Q=B.fromCompact(X)}else if(typeof X=="object"&&typeof X.r=="bigint"&&typeof X.s=="bigint"){const{r:Se,s:Ze}=X;Q=new B(Se,Ze)}else throw new Error("PARSE");xe=h.fromHex(L)}catch(Se){if(Se.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(me&&Q.hasHighS())return!1;G&&(H=e.hash(H));const{r:he,s:ue}=Q,Te=O(H),Pe=f(ue),Ue=a(Te*Pe),He=a(he*Pe),Ve=(qe=h.BASE.multiplyAndAddUnsafe(xe,Ue,He))==null?void 0:qe.toAffine();return Ve?a(Ve.x)===he:!1}return{CURVE:e,getPublicKey:S,getSharedSecret:I,sign:ie,verify:ce,ProjectivePoint:h,Signature:B,utils:_}}function rd(t,e){const n=t.ORDER;let r=ft;for(let y=n-Ce;y%Tt===ft;y/=Tt)r+=Ce;const s=r,i=(n-Ce)/Tt**s,o=(i-Ce)/Tt,a=Tt**s-Ce,f=Tt**(s-Ce),h=t.pow(e,i),l=t.pow(e,(i+Ce)/Tt);let p=(y,m)=>{let b=h,w=t.pow(m,a),v=t.sqr(w);v=t.mul(v,m);let B=t.mul(y,v);B=t.pow(B,o),B=t.mul(B,w),w=t.mul(B,m),v=t.mul(B,y);let _=t.mul(v,w);B=t.pow(_,f);let S=t.eql(B,t.ONE);w=t.mul(v,l),B=t.mul(_,b),v=t.cmov(w,v,S),_=t.cmov(B,_,S);for(let C=s;C>1;C--){let I=Tt**(C-Tt),U=t.pow(_,I);const O=t.eql(U,t.ONE);w=t.mul(v,b),b=t.mul(b,b),U=t.mul(_,b),v=t.cmov(w,v,O),_=t.cmov(U,_,O)}return{isValid:S,value:v}};if(t.ORDER%Uo===Jr){const y=(t.ORDER-Jr)/Uo,m=t.sqrt(t.neg(e));p=(b,w)=>{let v=t.sqr(w);const B=t.mul(b,w);v=t.mul(v,B);let _=t.pow(v,y);_=t.mul(_,B);const S=t.mul(_,m),C=t.mul(t.sqr(_),w),I=t.eql(C,b);let U=t.cmov(S,_,I);return{isValid:I,value:U}}}return p}function sd(t,e){if(Uc(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=rd(t,e.Z);if(!t.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let s,i,o,a,f,h,l,p;s=t.sqr(r),s=t.mul(s,e.Z),i=t.sqr(s),i=t.add(i,s),o=t.add(i,t.ONE),o=t.mul(o,e.B),a=t.cmov(e.Z,t.neg(i),!t.eql(i,t.ZERO)),a=t.mul(a,e.A),i=t.sqr(o),h=t.sqr(a),f=t.mul(h,e.A),i=t.add(i,f),i=t.mul(i,o),h=t.mul(h,a),f=t.mul(h,e.B),i=t.add(i,f),l=t.mul(s,o);const{isValid:y,value:m}=n(i,h);p=t.mul(s,r),p=t.mul(p,m),l=t.cmov(l,o,y),p=t.cmov(p,m,y);const b=t.isOdd(r)===t.isOdd(p);return p=t.cmov(t.neg(p),p,b),l=t.div(l,a),{x:l,y:p}}}function id(t){if(t instanceof Uint8Array)return t;if(typeof t=="string")return ms(t);throw new Error("DST must be Uint8Array or string")}const od=Ye;function Gt(t,e){if(t<0||t>=1<<8*e)throw new Error(`bad I2OSP call: value=${t} length=${e}`);const n=Array.from({length:e}).fill(0);for(let r=e-1;r>=0;r--)n[r]=t&255,t>>>=8;return new Uint8Array(n)}function ad(t,e){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[r]^e[r];return n}function Jn(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected")}function Ni(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function cd(t,e,n,r){Jn(t),Jn(e),Ni(n),e.length>255&&(e=r(nt(ms("H2C-OVERSIZE-DST-"),e)));const{outputLen:s,blockLen:i}=r,o=Math.ceil(n/s);if(o>255)throw new Error("Invalid xmd length");const a=nt(e,Gt(e.length,1)),f=Gt(0,i),h=Gt(n,2),l=new Array(o),p=r(nt(f,t,h,Gt(0,1),a));l[0]=r(nt(p,Gt(1,1),a));for(let m=1;m<=o;m++){const b=[ad(p,l[m-1]),Gt(m+1,1),a];l[m]=r(nt(...b))}return nt(...l).slice(0,n)}function ud(t,e,n,r,s){if(Jn(t),Jn(e),Ni(n),e.length>255){const i=Math.ceil(2*r/8);e=s.create({dkLen:i}).update(ms("H2C-OVERSIZE-DST-")).update(e).digest()}if(n>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return s.create({dkLen:n}).update(t).update(Gt(n,2)).update(e).update(Gt(e.length,1)).digest()}function Oo(t,e,n){zn(n,{DST:"string",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:r,k:s,m:i,hash:o,expand:a,DST:f}=n;Jn(t),Ni(e);const h=id(f),l=r.toString(2).length,p=Math.ceil((l+s)/8),y=e*i*p;let m;if(a==="xmd")m=cd(t,h,y,o);else if(a==="xof")m=ud(t,h,y,s,o);else if(a===void 0)m=t;else throw new Error('expand must be "xmd", "xof" or undefined');const b=new Array(e);for(let w=0;w<e;w++){const v=new Array(i);for(let B=0;B<i;B++){const _=p*(B+w*i),S=m.subarray(_,_+p);v[B]=Ne(od(S),r)}b[w]=v}return b}function fd(t,e){const n=e.map(r=>Array.from(r).reverse());return(r,s)=>{const[i,o,a,f]=n.map(h=>h.reduce((l,p)=>t.add(t.mul(l,r),p)));return r=t.div(i,o),s=t.mul(s,t.div(a,f)),{x:r,y:s}}}function hd(t,e,n){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,s){const i=Oo(r,2,{...n,DST:n.DST,...s}),o=t.fromAffine(e(i[0])),a=t.fromAffine(e(i[1])),f=o.add(a).clearCofactor();return f.assertValidity(),f},encodeToCurve(r,s){const i=Oo(r,1,{...n,DST:n.encodeDST,...s}),o=t.fromAffine(e(i[0])).clearCofactor();return o.assertValidity(),o}}}let Pc=class extends Sc{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,hn.hash(e);const r=$i(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return hn.exists(this),this.iHash.update(e),this}digestInto(e){hn.exists(this),hn.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Cc=(t,e,n)=>new Pc(t,e).update(n).digest();Cc.create=(t,e)=>new Pc(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ld(t){return{hash:t,hmac:(e,...n)=>Cc(t,e,A0(...n)),randomBytes:_c}}function dd(t,e){const n=r=>nd({...t,...ld(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ws=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Qr=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Hc=BigInt(1),es=BigInt(2),Po=(t,e)=>(t+e/es)/e;function Nc(t){const e=ws,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),f=BigInt(88),h=t*t*t%e,l=h*h*t%e,p=at(l,n,e)*l%e,y=at(p,n,e)*l%e,m=at(y,es,e)*h%e,b=at(m,s,e)*m%e,w=at(b,i,e)*b%e,v=at(w,a,e)*w%e,B=at(v,f,e)*v%e,_=at(B,a,e)*w%e,S=at(_,n,e)*l%e,C=at(S,o,e)*b%e,I=at(C,r,e)*h%e,U=at(I,es,e);if(!rn.eql(rn.sqr(U),t))throw new Error("Cannot find square root");return U}const rn=K0(ws,void 0,void 0,{sqrt:Nc}),Bt=dd({a:BigInt(0),b:BigInt(7),Fp:rn,n:Qr,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=Qr,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Hc*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=Po(i*t,e),f=Po(-r*t,e);let h=Ne(t-a*n-f*s,e),l=Ne(-a*r-f*i,e);const p=h>o,y=l>o;if(p&&(h=e-h),y&&(l=e-l),h>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:p,k1:h,k2neg:y,k2:l}}}},Xr),xs=BigInt(0),Lc=t=>typeof t=="bigint"&&xs<t&&t<ws,pd=t=>typeof t=="bigint"&&xs<t&&t<Qr,Co={};function ts(t,...e){let n=Co[t];if(n===void 0){const r=Xr(Uint8Array.from(t,s=>s.charCodeAt(0)));n=nt(r,r),Co[t]=n}return Xr(nt(n,...e))}const Li=t=>t.toRawBytes(!0).slice(1),Ws=t=>tn(t,32),Hs=t=>Ne(t,ws),Qn=t=>Ne(t,Qr),Ri=Bt.ProjectivePoint,gd=(t,e,n)=>Ri.BASE.multiplyAndAddUnsafe(t,e,n);function Ys(t){let e=Bt.utils.normPrivateKeyToScalar(t),n=Ri.fromPrivateKey(e);return{scalar:n.hasEvenY()?e:Qn(-e),bytes:Li(n)}}function Rc(t){if(!Lc(t))throw new Error("bad x: need 0 < x < p");const e=Hs(t*t),n=Hs(e*t+BigInt(7));let r=Nc(n);r%es!==xs&&(r=Hs(-r));const s=new Ri(t,r,Hc);return s.assertValidity(),s}function Dc(...t){return Qn(Ye(ts("BIP0340/challenge",...t)))}function yd(t){return Ys(t).bytes}function md(t,e,n=_c(32)){const r=Re("message",t),{bytes:s,scalar:i}=Ys(e),o=Re("auxRand",n,32),a=Ws(i^Ye(ts("BIP0340/aux",o))),f=ts("BIP0340/nonce",a,s,r),h=Qn(Ye(f));if(h===xs)throw new Error("sign failed: k is zero");const{bytes:l,scalar:p}=Ys(h),y=Dc(l,s,r),m=new Uint8Array(64);if(m.set(l,0),m.set(Ws(Qn(p+y*i)),32),!Fc(m,r,s))throw new Error("sign: Invalid signature produced");return m}function Fc(t,e,n){const r=Re("signature",t,64),s=Re("message",e),i=Re("publicKey",n,32);try{const o=Rc(Ye(i)),a=Ye(r.subarray(0,32));if(!Lc(a))return!1;const f=Ye(r.subarray(32,64));if(!pd(f))return!1;const h=Dc(Ws(a),Li(o),s),l=gd(o,f,Qn(-h));return!(!l||!l.hasEvenY()||l.toAffine().x!==a)}catch{return!1}}const Di={getPublicKey:yd,sign:md,verify:Fc,utils:{randomPrivateKey:Bt.utils.randomPrivateKey,lift_x:Rc,pointToBytes:Li,numberToBytesBE:tn,bytesToNumberBE:Ye,taggedHash:ts,mod:Ne}},wd=fd(rn,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(e=>BigInt(e)))),xd=sd(rn,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:rn.create(BigInt("-11"))});hd(Bt.ProjectivePoint,t=>{const{x:e,y:n}=xd(rn.create(t[0]));return wd(e,n)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:rn.ORDER,m:1,k:128,expand:"xmd",hash:Xr});function jc(t){let e,n=0;const r=t.reduce((i,o)=>i+o.length,0),s=new Uint8Array(r);for(const i of t)for(e=0;e<i.length;n++,e++)s[n]=i[e];return s}function Xs(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function bd(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}function Zc(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function vd(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Xs(t.outputLen),Xs(t.blockLen)}function Ed(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Ad(t,e){Zc(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Sd={number:Xs,bool:bd,bytes:Zc,hash:vd,exists:Ed,output:Ad};var dn=Sd;const Ns=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ls=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),vt=(t,e)=>t<<32-e|t>>>e,Bd=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Bd)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function _d(t){if(typeof t!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof t}`);return new TextEncoder().encode(t)}function Fi(t){if(typeof t=="string"&&(t=_d(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}let Mc=class{clone(){return this._cloneInto()}};function An(t){const e=r=>t().update(Fi(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Id(t=32){if(Ns&&typeof Ns.getRandomValues=="function")return Ns.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function Td(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),f=r?4:0,h=r?0:4;t.setUint32(e+f,o,r),t.setUint32(e+h,a,r)}class ji extends Mc{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Ls(this.buffer)}update(e){dn.exists(this);const{view:n,buffer:r,blockLen:s}=this;e=Fi(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const f=Ls(e);for(;s<=i-o;o+=s)this.process(f,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){dn.exists(this),dn.output(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let p=o;p<s;p++)n[p]=0;Td(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Ls(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=f/4,l=this.get();if(h>l.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<h;p++)a.setUint32(4*p,l[p],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}}const kd=(t,e,n)=>t&e^~t&n,$d=(t,e,n)=>t&e^t&n^e&n,Ud=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Zt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Mt=new Uint32Array(64);class zc extends ji{constructor(){super(64,32,8,!1),this.A=Zt[0]|0,this.B=Zt[1]|0,this.C=Zt[2]|0,this.D=Zt[3]|0,this.E=Zt[4]|0,this.F=Zt[5]|0,this.G=Zt[6]|0,this.H=Zt[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:f}=this;return[e,n,r,s,i,o,a,f]}set(e,n,r,s,i,o,a,f){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=f|0}process(e,n){for(let p=0;p<16;p++,n+=4)Mt[p]=e.getUint32(n,!1);for(let p=16;p<64;p++){const y=Mt[p-15],m=Mt[p-2],b=vt(y,7)^vt(y,18)^y>>>3,w=vt(m,17)^vt(m,19)^m>>>10;Mt[p]=w+Mt[p-7]+b+Mt[p-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:f,G:h,H:l}=this;for(let p=0;p<64;p++){const y=vt(a,6)^vt(a,11)^vt(a,25),m=l+y+kd(a,f,h)+Ud[p]+Mt[p]|0,w=(vt(r,2)^vt(r,13)^vt(r,22))+$d(r,s,i)|0;l=h,h=f,f=a,a=o+m|0,o=i,i=s,s=r,r=m+w|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,f=f+this.F|0,h=h+this.G|0,l=l+this.H|0,this.set(r,s,i,o,a,f,h,l)}roundClean(){Mt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Od extends zc{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const er=An(()=>new zc);An(()=>new Od);const Ur=BigInt(2**32-1),Js=BigInt(32);function Vc(t,e=!1){return e?{h:Number(t&Ur),l:Number(t>>Js&Ur)}:{h:Number(t>>Js&Ur)|0,l:Number(t&Ur)|0}}function Pd(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=Vc(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const Cd=(t,e)=>BigInt(t>>>0)<<Js|BigInt(e>>>0),Hd=(t,e,n)=>t>>>n,Nd=(t,e,n)=>t<<32-n|e>>>n,Ld=(t,e,n)=>t>>>n|e<<32-n,Rd=(t,e,n)=>t<<32-n|e>>>n,Dd=(t,e,n)=>t<<64-n|e>>>n-32,Fd=(t,e,n)=>t>>>n-32|e<<64-n,jd=(t,e)=>e,Zd=(t,e)=>t,Md=(t,e,n)=>t<<n|e>>>32-n,zd=(t,e,n)=>e<<n|t>>>32-n,Vd=(t,e,n)=>e<<n-32|t>>>64-n,qd=(t,e,n)=>t<<n-32|e>>>64-n;function Kd(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const Gd=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Wd=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Yd=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Xd=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,Jd=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),Qd=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,ep={fromBig:Vc,split:Pd,toBig:Cd,shrSH:Hd,shrSL:Nd,rotrSH:Ld,rotrSL:Rd,rotrBH:Dd,rotrBL:Fd,rotr32H:jd,rotr32L:Zd,rotlSH:Md,rotlSL:zd,rotlBH:Vd,rotlBL:qd,add:Kd,add3L:Gd,add3H:Wd,add4L:Yd,add4H:Xd,add5H:Qd,add5L:Jd};var ne=ep;const[tp,np]=ne.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),zt=new Uint32Array(80),Vt=new Uint32Array(80);class bs extends ji{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:f,Eh:h,El:l,Fh:p,Fl:y,Gh:m,Gl:b,Hh:w,Hl:v}=this;return[e,n,r,s,i,o,a,f,h,l,p,y,m,b,w,v]}set(e,n,r,s,i,o,a,f,h,l,p,y,m,b,w,v){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=f|0,this.Eh=h|0,this.El=l|0,this.Fh=p|0,this.Fl=y|0,this.Gh=m|0,this.Gl=b|0,this.Hh=w|0,this.Hl=v|0}process(e,n){for(let S=0;S<16;S++,n+=4)zt[S]=e.getUint32(n),Vt[S]=e.getUint32(n+=4);for(let S=16;S<80;S++){const C=zt[S-15]|0,I=Vt[S-15]|0,U=ne.rotrSH(C,I,1)^ne.rotrSH(C,I,8)^ne.shrSH(C,I,7),O=ne.rotrSL(C,I,1)^ne.rotrSL(C,I,8)^ne.shrSL(C,I,7),$=zt[S-2]|0,N=Vt[S-2]|0,j=ne.rotrSH($,N,19)^ne.rotrBH($,N,61)^ne.shrSH($,N,6),q=ne.rotrSL($,N,19)^ne.rotrBL($,N,61)^ne.shrSL($,N,6),Y=ne.add4L(O,q,Vt[S-7],Vt[S-16]),ie=ne.add4H(Y,U,j,zt[S-7],zt[S-16]);zt[S]=ie|0,Vt[S]=Y|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:f,Dh:h,Dl:l,Eh:p,El:y,Fh:m,Fl:b,Gh:w,Gl:v,Hh:B,Hl:_}=this;for(let S=0;S<80;S++){const C=ne.rotrSH(p,y,14)^ne.rotrSH(p,y,18)^ne.rotrBH(p,y,41),I=ne.rotrSL(p,y,14)^ne.rotrSL(p,y,18)^ne.rotrBL(p,y,41),U=p&m^~p&w,O=y&b^~y&v,$=ne.add5L(_,I,O,np[S],Vt[S]),N=ne.add5H($,B,C,U,tp[S],zt[S]),j=$|0,q=ne.rotrSH(r,s,28)^ne.rotrBH(r,s,34)^ne.rotrBH(r,s,39),Y=ne.rotrSL(r,s,28)^ne.rotrBL(r,s,34)^ne.rotrBL(r,s,39),ie=r&i^r&a^i&a,ce=s&o^s&f^o&f;B=w|0,_=v|0,w=m|0,v=b|0,m=p|0,b=y|0,{h:p,l:y}=ne.add(h|0,l|0,N|0,j|0),h=a|0,l=f|0,a=i|0,f=o|0,i=r|0,o=s|0;const k=ne.add3L(j,Y,ce);r=ne.add3H(k,N,q,ie),s=k|0}({h:r,l:s}=ne.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=ne.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:f}=ne.add(this.Ch|0,this.Cl|0,a|0,f|0),{h,l}=ne.add(this.Dh|0,this.Dl|0,h|0,l|0),{h:p,l:y}=ne.add(this.Eh|0,this.El|0,p|0,y|0),{h:m,l:b}=ne.add(this.Fh|0,this.Fl|0,m|0,b|0),{h:w,l:v}=ne.add(this.Gh|0,this.Gl|0,w|0,v|0),{h:B,l:_}=ne.add(this.Hh|0,this.Hl|0,B|0,_|0),this.set(r,s,i,o,a,f,h,l,p,y,m,b,w,v,B,_)}roundClean(){zt.fill(0),Vt.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class rp extends bs{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class sp extends bs{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class ip extends bs{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const Zi=An(()=>new bs);An(()=>new rp);An(()=>new sp);An(()=>new ip);const op=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),qc=Uint8Array.from({length:16},(t,e)=>e),ap=qc.map(t=>(9*t+5)%16);let Mi=[qc],zi=[ap];for(let t=0;t<4;t++)for(let e of[Mi,zi])e.push(e[t].map(n=>op[n]));const Kc=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),cp=Mi.map((t,e)=>t.map(n=>Kc[e][n])),up=zi.map((t,e)=>t.map(n=>Kc[e][n])),fp=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),hp=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Or=(t,e)=>t<<e|t>>>32-e;function Ho(t,e,n,r){return t===0?e^n^r:t===1?e&n|~e&r:t===2?(e|~n)^r:t===3?e&r|n&~r:e^(n|~r)}const Pr=new Uint32Array(16);class lp extends ji{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:n,h2:r,h3:s,h4:i}=this;return[e,n,r,s,i]}set(e,n,r,s,i){this.h0=e|0,this.h1=n|0,this.h2=r|0,this.h3=s|0,this.h4=i|0}process(e,n){for(let m=0;m<16;m++,n+=4)Pr[m]=e.getUint32(n,!0);let r=this.h0|0,s=r,i=this.h1|0,o=i,a=this.h2|0,f=a,h=this.h3|0,l=h,p=this.h4|0,y=p;for(let m=0;m<5;m++){const b=4-m,w=fp[m],v=hp[m],B=Mi[m],_=zi[m],S=cp[m],C=up[m];for(let I=0;I<16;I++){const U=Or(r+Ho(m,i,a,h)+Pr[B[I]]+w,S[I])+p|0;r=p,p=h,h=Or(a,10)|0,a=i,i=U}for(let I=0;I<16;I++){const U=Or(s+Ho(b,o,f,l)+Pr[_[I]]+v,C[I])+y|0;s=y,y=l,l=Or(f,10)|0,f=o,o=U}}this.set(this.h1+a+l|0,this.h2+h+y|0,this.h3+p+s|0,this.h4+r+o|0,this.h0+i+f|0)}roundClean(){Pr.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const dp=An(()=>new lp);class Gc extends Mc{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,dn.hash(e);const r=Fi(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return dn.exists(this),this.iHash.update(e),this}digestInto(e){dn.exists(this),dn.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Vi=(t,e,n)=>new Gc(t,e).update(n).digest();Vi.create=(t,e)=>new Gc(t,e);const Wc=new TextEncoder,pp=new TextDecoder;function Fr(t){return Wc.encode(t)}function Yc(t){const e=new Uint8Array(t.length/2);let n,r=0;if(t.match(/[^a-fA-f0-9]/)!==null)throw new TypeError("Invalid hex string: "+t);if(t.length%2>0)throw new Error(`Hex string length is uneven: ${t.length}`);for(n=0;n<t.length;n+=2)e[r]=parseInt(t.slice(n,n+2),16),r+=1;return e}function Xc(t){if(t===0)return Uint8Array.of(0);const e=[];for(;t>0;){const n=t&255;e.push(n),t=(t-n)/256}return new Uint8Array(e)}function gp(t){if(typeof t=="string")t=t.split("").map(Number);else if(!Array.isArray(t))throw new Error("Invalid input type: expected a string or an array of numbers.");if(t.length%8!==0)throw new Error(`Binary array is invalid length: ${t.length}`);const e=new Uint8Array(t.length/8);for(let n=0,r=0;n<t.length;n+=8,r++){let s=0;for(let i=0;i<8;i++)s|=t[n+i]<<7-i;e[r]=s}return e}function No(t){const e=new Array(t.length*8);let n=0;for(const r of t){if(r>255)throw new Error(`Invalid byte value: ${r}. Byte values must be between 0 and 255.`);for(let s=7;s>=0;s--,n++)e[n]=r>>s&1}return e}function Jc(t){if(t===0n)return Uint8Array.of(0);const e=[];for(;t>0n;){const n=t&0xffn;e.push(Number(n)),t=(t-n)/256n}return new Uint8Array(e)}function jr(t){return pp.decode(t)}function Qc(t){const e=new Array(t.length);for(let n=0;n<t.length;n++)e.push(t[n].toString(16).padStart(2,"0"));return e.join("")}function Lo(t){let e=0,n;for(n=t.length-1;n>=0;n--)e=e*256+t[n];return Number(e)}function Ro(t){let e=0n,n;for(n=t.length-1;n>=0;n--)e=e*256n+BigInt(t[n]);return BigInt(e)}function Ge(t,e=!0){if(t instanceof ArrayBuffer)return new Uint8Array(t);if(t instanceof Uint8Array)return new Uint8Array(t);switch(typeof t){case"bigint":return Jc(t);case"boolean":return Uint8Array.of(t?1:0);case"number":return Xc(t);case"string":return e?Yc(t):Wc.encode(t);default:throw TypeError("Unsupported format:"+typeof t)}}function yp(t){return t=Ge(t,!0),Qc(t)}function mp(t){if(typeof t=="object"){if(t instanceof Uint8Array)return t;try{return Fr(JSON.stringify(t))}catch{throw TypeError("Object is not serializable.")}}return Ge(t,!1)}function wp(t){if(t instanceof Uint8Array&&(t=jr(t)),typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}function xp(t){return er(Ge(t))}function bp(t){return Zi(Ge(t))}function vp(t){return Zi(Ge(t))}function qi(t){return er(er(Ge(t)))}function Ep(t){return dp(er(Ge(t)))}function Ap(t,e){return Vi(er,Ge(t),Ge(e))}function Sp(t,e){return Vi(Zi,Ge(t),Ge(e))}const _n={sha256:xp,sha512:bp,ripe160:vp,hash256:qi,hash160:Ep,hmac256:Ap,hmac512:Sp},Bp=new TextEncoder,_p=[{name:"base58",charset:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}];function eu(t){for(const e of _p)if(e.name===t)return e.charset;throw TypeError("Charset does not exist: "+t)}function Ip(t,e,n=!1){typeof t=="string"&&(t=Bp.encode(t));const r=eu(e),s=r.length,i=[];let o="",a,f=0,h,l;for(a=0;a<t.length;a++)for(f=0,h=t[a],o+=h>0||(o.length^a)>0?"":"1";f in i||h>0;)l=i[f],l=l>0?l*256+h:h,h=l/s|0,i[f]=l%s,f++;for(;f-- >0;)o+=r[i[f]];return n&&o.length%4>0?o+"=".repeat(4-o.length%4):o}function Tp(t,e){const n=eu(e),r=n.length,s=[],i=[];t=t.replace("=","");let o,a=0,f,h;for(o=0;o<t.length;o++){if(a=0,f=n.indexOf(t[o]),f<0)throw new Error(`Character range out of bounds: ${f}`);for(f>0||(i.length^o)>0||i.push(0);a in s||f>0;)h=s[a],h=h>0?h*r+f:f,f=h>>8,s[a]=h%256,a++}for(;a-- >0;)i.push(s[a]);return new Uint8Array(i)}function kp(t){const e=qi(t);return jc([t,e.slice(0,4)])}function $p(t){const e=t.slice(0,-4),n=t.slice(-4);if(qi(e).slice(0,4).toString()!==n.toString())throw new Error("Invalid checksum!");return e}const Do={encode:Ip,decode:Tp},Fo={encode:t=>{const e=kp(t);return Do.encode(e,"base58")},decode:t=>{const e=Do.decode(t,"base58");return $p(e)}},tu="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Up=[996825010,642813549,513874426,1027748829,705979059],ns=[{version:0,name:"bech32",const:1},{version:1,name:"bech32m",const:734539939}];function nu(t){let e=1;for(let n=0;n<t.length;++n){const r=e>>25;e=(e&33554431)<<5^t[n];for(let s=0;s<5;++s)r>>s&1&&(e^=Up[s])}return e}function ru(t){const e=[];let n;for(n=0;n<t.length;++n)e.push(t.charCodeAt(n)>>5);for(e.push(0),n=0;n<t.length;++n)e.push(t.charCodeAt(n)&31);return e}function Op(t,e,n){const r=ru(t).concat(e);return nu(r)===n.const}function Pp(t,e,n){const r=ru(t).concat(e).concat([0,0,0,0,0,0]),s=nu(r)^n.const,i=[];for(let o=0;o<6;++o)i.push(s>>5*(5-o)&31);return i}function su(t,e,n,r=!0){const s=[];let i=0,o=0;const a=(1<<n)-1,f=(1<<e+n-1)-1;for(const h of t){if(h<0||h>>e>0)throw new Error("Failed to perform base conversion. Invalid value: "+String(h));for(i=(i<<e|h)&f,o+=e;o>=n;)o-=n,s.push(i>>o&a)}if(r)o>0&&s.push(i<<n-o&a);else if(o>=e||(i<<n-o&a)>0)throw new Error("Failed to perform base conversion. Invalid Size!");return s}function Cp(t,e,n){const r=e.concat(Pp(t,e,n));let s=t+"1";for(let i=0;i<r.length;++i)s+=tu.charAt(r[i]);return s}function iu(t){if(!Hp(t))throw new Error("Encoded string goes out of bounds!");if(t=t.toLowerCase(),!Np(t))throw new Error("Encoded string has invalid separator!");const e=[],n=t.lastIndexOf("1"),r=t.substring(0,n);for(let i=n+1;i<t.length;++i){const o=tu.indexOf(t.charAt(i));if(o===-1)throw new Error("Character idx out of bounds: "+String(i));e.push(o)}const s=ns.find(i=>i.version===e[0])??ns[0];if(!Op(r,e,s))throw new Error("Checksum verification failed!");return[r,e.slice(0,e.length-6)]}function Hp(t){let e,n,r=!1,s=!1;for(e=0;e<t.length;++e){if(n=t.charCodeAt(e),n<33||n>126)return!1;n>=97&&n<=122&&(r=!0),n>=65&&n<=90&&(s=!0)}return!(r&&s)}function Np(t){const e=t.lastIndexOf("1");return!(e<1||e+7>t.length||t.length>90)}function Lp(t,e="bc",n=0){const r=[n,...su([...t],8,5)],s=ns.find(o=>o.version===n)??ns[0],i=Cp(e,r,s);return ou(i),i}function ou(t){t=t.toLowerCase();const e=t.split("1",1)[0],[n,r]=iu(t),s=su(r.slice(1),5,8,!1),i=s.length;switch(!0){case e!==n:throw new Error("Returned hrp string is invalid.");case(s===null||i<2||i>40):throw new Error("Decoded string is invalid or out of spec.");case r[0]>16:throw new Error("Returned version bit is out of range.");default:return Uint8Array.from(s)}}function Rp(t){t=t.toLowerCase();const[e,n]=iu(t);return n[0]}const jo={encode:Lp,decode:ou,version:Rp},au="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",cu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",Dp=new TextEncoder;function uu(t,e=!1){typeof t=="string"&&(t=Dp.encode(t));const n=e?cu:au;let r="",s=0,i=0;for(let o=0;o<t.length;o++)for(i=i<<8|t[o],s+=8;s>=6;)s-=6,r+=n[i>>s&63];if(s>0)for(i<<=6-s,r+=n[i&63];s<6;)r+=e?"":"=",s+=2;return r}function fu(t,e=!1){const n=e||t.includes("-")||t.includes("_")?cu.split(""):au.split("");t=t.replace(/=+$/,"");const r=t.split("");let s=0,i=0;const o=[];for(let a=0;a<r.length;a++){const f=r[a],h=n.indexOf(f);if(h===-1)throw new Error("Invalid character: "+f);s+=6,i<<=6,i|=h,s>=8&&(s-=8,o.push(i>>>s&255))}return new Uint8Array(o)}const Zo={encode:uu,decode:fu},Mo={encode:t=>uu(t,!0),decode:t=>fu(t,!0)},M=class extends Uint8Array{constructor(e,n){if(e=Ge(e,!0),typeof n=="number"){const r=new Uint8Array(n).fill(0);r.set(new Uint8Array(e)),e=r.buffer}return super(e),this}get arr(){return[...this]}get num(){return this.toNum()}get big(){return this.toBig()}get str(){return this.toStr()}get hex(){return this.toHex()}get raw(){return new Uint8Array(this)}get bits(){return this.toBits()}get bin(){return this.toBin()}get b58chk(){return this.tob58chk()}get base64(){return this.toBase64()}get b64url(){return this.toB64url()}get digest(){return this.toHash()}get id(){return this.toHash().hex}get stream(){return new Fp(this)}toNum(e="le"){return Lo(e==="le"?this.reverse():this)}toBig(e="le"){return Ro(e==="le"?this.reverse():this)}toHash(e="sha256"){switch(e){case"sha256":return new M(_n.sha256(this));case"hash256":return new M(_n.hash256(this));case"ripe160":return new M(_n.ripe160(this));case"hash160":return new M(_n.hash160(this));default:throw new Error("Unrecognized format:"+String(e))}}toHmac(e,n="hmac256"){switch(n){case"hmac256":return new M(_n.hmac256(e,this));case"hmac512":return new M(_n.hmac512(e,this));default:throw new Error("Unrecognized format:"+String(n))}}toStr(){return jr(this)}toHex(){return Qc(this)}toJson(){return JSON.parse(jr(this))}toBytes(){return new Uint8Array(this)}toBits(){return No(this)}toBin(){return No(this).join("")}tob58chk(){return Fo.encode(this)}toB64url(){return Mo.encode(this)}toBase64(){return Zo.encode(this)}toBech32(e,n=0){return jo.encode(this,e,n)}prepend(e){return M.join([M.bytes(e),this])}append(e){return M.join([this,M.bytes(e)])}slice(e,n){return new M(new Uint8Array(this).slice(e,n))}subarray(e,n){return new M(new Uint8Array(this).subarray(e,n))}reverse(){return new M(new Uint8Array(this).reverse())}write(e,n){this.set(e,n)}prefixSize(e){const n=M.varInt(this.length,e);return M.join([n,this])}static from(e){return new M(Uint8Array.from(e))}static of(...e){return new M(Uint8Array.of(...e))}static join(e){const n=e.map(r=>M.bytes(r));return new M(jc(n))}static varInt(e,n){if(e<253)return M.num(e,1);if(e<65536)return M.of(253,...M.num(e,2,n));if(e<4294967296)return M.of(254,...M.num(e,4,n));if(BigInt(e)<0x10000000000000000n)return M.of(255,...M.num(e,8,n));throw new Error(`Value is too large: ${e}`)}static random(e=32){return new M(Id(e),e)}static normalize(e,n){return new M(Ge(e,!0),n)}static hexify(e){return yp(e)}static serialize(e,n){return new M(mp(e),n)}static revive(e){return wp(e)}};let Ee=M;(()=>{M.num=(e,n,r="le")=>{const s=new M(Xc(e),n);return r==="le"?s.reverse():s}})(),(()=>{M.big=(e,n,r="le")=>{const s=new M(Jc(e),n);return r==="le"?s.reverse():s}})(),(()=>{M.bin=(e,n)=>new M(gp(e),n)})(),(()=>{M.any=(e,n)=>new M(Ge(e,!1),n)})(),(()=>{M.raw=(e,n)=>new M(e,n)})(),(()=>{M.str=(e,n)=>new M(Fr(e),n)})(),(()=>{M.hex=(e,n)=>new M(Yc(e),n)})(),(()=>{M.json=e=>new M(Fr(JSON.stringify(e)))})(),(()=>{M.bytes=(e,n)=>new M(Ge(e,!0),n)})(),(()=>{M.base64=e=>new M(Zo.decode(e))})(),(()=>{M.b64url=e=>new M(Mo.decode(e))})(),(()=>{M.bech32=e=>new M(jo.decode(e))})(),(()=>{M.b58chk=e=>new M(Fo.decode(e))})(),(()=>{M.encode=Fr})(),(()=>{M.decode=jr})();class Fp{constructor(e){this.data=new Uint8Array(e),this.size=this.data.length}peek(e){if(e>this.size)throw new Error(`Size greater than stream: ${e} > ${this.size}`);return new Ee(this.data.slice(0,e).buffer)}read(e){e=e??this.readSize();const n=this.peek(e);return this.data=this.data.slice(e),this.size=this.data.length,n}readSize(e){const n=this.read(1).num;switch(!0){case(n>=0&&n<253):return n;case n===253:return this.read(2).toNum(e);case n===254:return this.read(4).toNum(e);case n===255:return this.read(8).toNum(e);default:throw new Error(`Varint is out of range: ${n}`)}}}const{ProjectivePoint:Zr}=Bt,le=class extends Uint8Array{static mod(e,n=le.N){return Di.utils.mod(e,n)}static pow(e,n,r=le.N){if(e=le.mod(e,r),n=le.mod(n,r),e===0n)return 0n;let s=1n;for(;n>0n;)(n&1n)===1n&&(s=le.mod(s*e,r)),n=n>>1n,e=le.mod(e*e,r);return s}static normalize(e){return e=hu(e),e=le.mod(e),le.validate(e),Ee.big(e,32)}static validate(e){return Bt.utils.isValidPrivateKey(e)}constructor(e){super(le.normalize(e),32)}get buff(){return new Ee(this)}get raw(){return this.buff.raw}get big(){return this.buff.big}get hex(){return this.buff.hex}get point(){return this.generate()}get xpoint(){return new Ot(this.point.x)}get hasOddY(){return this.point.hasOddY}get negated(){return this.hasOddY?this.negate():this}gt(e){return new le(e).big>this.big}lt(e){return new le(e).big<this.big}eq(e){return new le(e).big===this.big}ne(e){return new le(e).big!==this.big}add(e){const n=new le(e);return new le(this.big+n.big)}sub(e){const n=new le(e);return new le(this.big-n.big)}mul(e){const n=new le(e);return new le(this.big*n.big)}pow(e,n=le.N-1n){const r=new le(e),s=le.mod(r.big,n);return new le(this.big**s)}div(e){const n=new le(e),r=this.pow(n.big,le.N-2n);return new le(this.big*r.big)}negate(){return new le(le.N-this.big)}generate(){return Ot.import(Zr.BASE.multiply(this.big))}};let We=le;(()=>{le.N=Bt.CURVE.n})();const Oe=class{static validate(e){try{return e=new Oe(e),!0}catch{return!1}}static normalize(e){let n=jp(e);return n.length===32&&(n=n.prepend(2)),Zr.fromHex(n.hex)}static generate(e){return new We(e).generate()}static import(e){const n=e instanceof Oe?{x:e.x.big,y:e.y.big}:{x:e.x,y:e.y};return new Oe(n.x,n.y)}constructor(e,n){this.__p=typeof e=="bigint"&&typeof n=="bigint"?new Zr(e,n,1n):Oe.normalize(e),this.p.assertValidity()}get p(){return this.__p}get x(){return Ee.big(this.p.x,32)}get y(){return Ee.big(this.p.y,32)}get buff(){return Ee.raw(this.p.toRawBytes(!0))}get raw(){return this.buff.raw}get hex(){return this.buff.hex}get hasEvenY(){return this.p.hasEvenY()}get hasOddY(){return!this.p.hasEvenY()}eq(e){return e instanceof Oe?this.p.equals(new Zr(e.x.big,e.y.big,1n)):e instanceof Uint8Array?this.x.big===Ee.raw(e).big:typeof e=="number"?BigInt(e)===this.x.big:e===this.x.big}add(e){return e instanceof Oe?Oe.import(this.p.add(e.p)):Oe.import(this.p.add(Oe.generate(e).p))}sub(e){return e instanceof Oe?Oe.import(this.p.subtract(e.p)):Oe.import(this.p.subtract(Oe.generate(e).p))}mul(e){return e instanceof Oe?Oe.import(this.p.multiply(e.x.big)):Oe.import(this.p.multiply(hu(e)))}negate(){return Oe.import(this.p.negate())}};let Ot=Oe;(()=>{Oe.N=Bt.CURVE.n})();function hu(t){if(t instanceof We)return t.big;if(t instanceof Ot)return t.x.big;if(t instanceof Uint8Array)return Ee.raw(t).big;if(typeof t=="string")return Ee.hex(t).big;if(typeof t=="number")return Ee.num(t).big;if(typeof t=="bigint")return BigInt(t);throw TypeError("Invalid input type:"+typeof t)}function jp(t){if(t instanceof We||t instanceof Ot)return t.buff;if(t instanceof Uint8Array||typeof t=="string"||typeof t=="number"||typeof t=="bigint")return Ee.bytes(t);throw TypeError("Invalid input type:"+typeof t)}function lu(t){const e=Ee.bytes(t);if(e.length===33)return e.slice(1,33);if(e.length===32)return e;throw new Error("Invalid key length: "+String(e.length))}function du(t,e,n="taproot"){const r=Ee.bytes(e).raw,s=Ee.bytes(t).raw;switch(n){case"ecdsa":return Bt.sign(r,s).toDERRawBytes();case"taproot":return Di.sign(r,s);default:throw new Error("Unknown signature type:"+String(n))}}function Ki(t,e,n,r="taproot"){const s=Ee.bytes(t).raw,i=Ee.bytes(e).raw,o=Ee.bytes(n).raw;switch(r){case"ecdsa":return Bt.verify(s,i,o);case"taproot":return Di.verify(s,i,lu(o));default:throw new Error("Unknown signature type:"+String(r))}}const Qs={type:"ecdsa"};class tt extends Uint8Array{static random(e){return new tt(Ee.random(32),e)}constructor(e,n={}){super(new We(e)),this.config={...Qs,...n},this.xonly=this.config.type==="taproot"}get buff(){return new Ee(this)}get raw(){return this.buff.raw}get hex(){return this.buff.hex}get field(){return new We(this)}get point(){return this.field.point}get pub(){return new ei(this.point.raw,this.config)}get hasEvenY(){return this.point.hasEvenY}get hasOddY(){return this.point.hasOddY}get xfilter(){return this.xonly&&this.hasOddY?this.negate():this}add(e){const n=this.xfilter.field;return new tt(n.add(e),this.config)}sub(e){const n=this.xfilter.field;return new tt(n.sub(e),this.config)}mul(e){const n=this.xfilter.field;return new tt(n.mul(e),this.config)}div(e){const n=this.xfilter.field;return new tt(n.div(e),this.config)}pow(e){const n=this.xfilter.field;return new tt(n.pow(e),this.config)}negate(){return new tt(this.field.negate(),this.config)}sign(e,n=this.config.type){return du(this.raw,e,n)}verify(e,n,r=this.config.type){return Ki(e,n,this.pub.raw,r)}toWIF(e=128){return Ee.join([e,this,1]).b58chk}}const Wt=class extends Uint8Array{static random(e){return tt.random(e).pub}static fromSecret(e,n){return new tt(e,n).pub}constructor(e,n={}){const r={...Qs,...n};r.type==="taproot"?super(Wt.xfilter(e),32):super(Ee.bytes(e),33),this.config={...Qs,...n},this.xonly=r.type==="taproot"}get buff(){return this.xonly?this.x:new Ee(this)}get raw(){return this.buff.raw}get hex(){return this.buff.hex}get point(){return new Ot(this)}get x(){return this.point.x}get y(){return this.point.y}get hasEvenY(){return this.point.hasEvenY}get hasOddY(){return this.point.hasOddY}add(e){return new Wt(this.point.add(e).raw,this.config)}sub(e){return new Wt(this.point.sub(e).raw,this.config)}mul(e){return new Wt(this.point.mul(e).raw,this.config)}negate(){return new Wt(this.point.negate().raw,this.config)}verify(e,n,r=this.config.type){return Ki(e,n,this.raw,r)}};let ei=Wt;(()=>{Wt.xfilter=lu})();function Zp(t,e,n,r={}){const{sigflag:s=1}=r,i=ki(e,n,r),o=du(t,i,"ecdsa");return A.join([o,s])}function Mp(t,e,n={}){const r=it.fmt.toJson(t),{throws:s=!1}=n,{witness:i=[]}=r.vin[e],o=it.util.readWitness(i),{script:a,params:f}=o;let h=null;if(f.length<1)return Me("Invalid witness data: "+String(i),s);if(n.script===void 0&&a!==null&&(n.script=a),n.pubkey!==void 0)h=A.bytes(n.pubkey);else if(f.length>1&&f[1].length===33)h=A.bytes(f[1]);else return Me("No pubkey provided!",s);const l=je.fmt.toParam(f[0]),p=l.slice(0,-1),y=l.slice(-1)[0],m=ki(r,e,{...n,sigflag:y});return Ki(p.hex,m.hex,h.hex,"ecdsa")?!0:Me("Invalid signature!",s)}const zp={hash:ki,sign:Zp,verify:Mp},Vp=[0,1,2,3,129,130,131];function Gi(t,e,n={}){const{extension:r,sigflag:s=0,extflag:i=0,key_version:o=0,separator_pos:a=4294967295}=n,f=it.fmt.toJson(t),{version:h,vin:l,vout:p,locktime:y}=f;if(e>=l.length)throw new Error("Index out of bounds: "+String(e));if(!Vp.includes(s))throw new Error("Invalid hash type: "+String(s));if(i<0||i>127)throw new Error("Extention flag out of range: "+String(i));const{txid:m,vout:b,sequence:w,witness:v=[]}=l[e],B=(s&128)===128,_=Jp(v),S=_!==void 0?1:0,I=(i+(r!==void 0?1:0))*2+S,U=A.str("TapSighash").digest,O=[U,U,A.num(0,1),A.num(s,1),_i(h),Ii(y)];if(!B){const $=l.map(N=>zo(N));O.push(qp(l),Gp($),Wp($),Kp(l))}if(((s&3)<2||(s&3)>3)&&O.push(Yp(p)),O.push(A.num(I,1)),B){const{value:$,scriptPubKey:N}=zo(l[e]);O.push(pr(m),gr(b),nn($),je.encode(N,!0),yr(w))}else O.push(A.num(e,4).reverse());return _!==void 0&&O.push(_),(s&3)===3&&O.push(Xp(p[e])),r!==void 0&&O.push(A.bytes(r),A.num(o),A.num(a,4)),A.join(O).digest}function qp(t){const e=[];for(const{txid:n,vout:r}of t)e.push(pr(n)),e.push(gr(r));return A.join(e).digest}function Kp(t){const e=[];for(const{sequence:n}of t)e.push(yr(n));return A.join(e).digest}function Gp(t){const e=[];for(const{value:n}of t)e.push(nn(n));return A.join(e).digest}function Wp(t){const e=[];for(const{scriptPubKey:n}of t)e.push(En(n,!0));return A.join(e).digest}function Yp(t){const e=[];for(const{value:n,scriptPubKey:r}of t)e.push(nn(n)),e.push(je.encode(r,!0));return A.join(e).digest}function Xp(t){return A.join([nn(t.value),je.encode(t.scriptPubKey,!0)]).digest}function Jp(t){if(t===void 0||t.length<2)return;let e=t.at(-1);if(typeof e=="string"&&(e=A.hex(e)),e instanceof Uint8Array&&e[0]===80)return A.raw(e).prefixSize("be").digest}function zo(t){if(t.prevout===void 0)throw new Error("Prevout data missing for input: "+String(t.txid));return t.prevout}const Qp=0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2fn,eg=0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141n;function tg(t,e,n,r={}){const{sigflag:s=0}=r,i=Gi(e,n,r),o=ng(t,i);return s===0?A.raw(o):A.join([o,s])}function ng(t,e,n=A.random(32)){const r=A.bytes(e),s=new We(t),i=s.point,o=i.hasEvenY?s.big:s.negated.big,a=Dr("BIP0340/aux",A.bytes(n)),f=o^a.big,h=Dr("BIP0340/nonce",f,i.x.raw,r),l=new We(h),p=l.point,y=p.hasEvenY?l.big:l.negated.big,m=new We(Dr("BIP0340/challenge",p.x.raw,i.x.raw,r)),b=new We(y+m.big*o);return A.join([p.x.raw,b.raw])}function rg(t,e,n,r=!1){const s=new Ot(mn(n)),i=A.bytes(e),o=A.bytes(t).stream;o.size<64&&Me("Signature length is too small: "+String(o.size),r);const a=o.read(32);a.big>Qp&&Me("Signature r value greater than field size!",r);const f=o.read(32);f.big>eg&&Me("Signature s value greater than curve order!",r);const h=new We(Dr("BIP0340/challenge",a.raw,s.x.raw,i)),l=new We(f).point,p=s.mul(h.big),y=l.sub(p);return y.hasOddY&&Me("Signature R value has odd Y coordinate!",r),y.x.big===0n&&Me("Signature R value is infinite!",r),y.x.big===a.big}const sg=192;function vs(t){const e=A.str(t).digest;return A.join([e,e])}function Wi(t,e=sg){return A.join([vs("TapLeaf"),ag(e),A.normalize(t)]).digest.hex}function ig(t,e){return Wi(je.fmt.toBytes(t),e)}function Yi(t,e){return e<t&&([t,e]=[e,t]),A.join([vs("TapBranch"),A.hex(t).raw,A.hex(e).raw]).digest.hex}function og(t){return A.hex(rs(t)[0])}function rs(t,e,n=[]){const r=[],s=[];if(t.length<1)throw new Error("Tree is empty!");for(let i=0;i<t.length;i++){const o=t[i];if(Array.isArray(o)){const[a,f,h]=rs(o,e);e=f,r.push(a);for(const l of h)n.push(l)}else r.push(o)}if(r.length===1)return[r[0],e,n];r.sort(),r.length%2!==0&&r.push(r[r.length-1]);for(let i=0;i<r.length-1;i+=2){const o=Yi(r[i],r[i+1]);s.push(o),typeof e=="string"&&(e===r[i]?(n.push(r[i+1]),e=o):e===r[i+1]&&(n.push(r[i]),e=o))}return rs(s,e,n)}function ag(t=192){return t&254}function pu(t,e=new Uint8Array,n=!1){const r=n?new We(t).point.x.raw:mn(t);return A.join([vs("TapTweak"),r,A.bytes(e)]).digest}function Un(t,e,n=!1){e===void 0&&(e=new Uint8Array);const r=A.bytes(t),s=pu(t,e,n);return n?gu(r,s):yu(r,s)}function cg(t,e){return Un(t,e)}function ug(t,e){return Un(t,e,!0)}function gu(t,e){let n=new We(t);return n.point.hasOddY&&(n=n.negate()),A.raw(n.add(e).raw)}function yu(t,e){t=mn(t);const r=new Ot(t).add(e);return A.raw(r.raw)}const fg=192;function hg(t,e={}){return mu(t,{...e,isPrivate:!0})}function lg(t,e={}){return mu(t,{...e,isPrivate:!1})}function mu(t,e={}){const{isPrivate:n=!1,tree:r=[],version:s=fg}=e,i=n?new tt(t).pub.x.raw:mn(t);let{target:o}=e;o!==void 0&&(o=A.bytes(o).hex);let a,f=[];if(r.length>0){const[m,b,w]=rs(r,o);f=w,a=Un(t,m,n)}else o!==void 0?a=Un(t,o,n):a=Un(t,void 0,n);const h=n?new tt(a).point.raw[0]:a[0],p=[A.num(s+xu(h)),i];f.length>0&&f.forEach(m=>p.push(A.hex(m)));const y=A.join(p);if(o!==void 0&&!Xi(a,o,y,e))throw new Error("Path checking failed! Unable to generate path.");return[mn(a).hex,y.hex]}function Xi(t,e,n,r={}){const{isPrivate:s=!1,throws:i=!1}=r,{parity:o,paths:a,intkey:f}=wu(n),h=s?new tt(t).pub.x.raw:mn(t),l=A.join([o,h]);if(l.length!==33)return Me("Invalid tapkey: "+l.hex,i);let p=A.bytes(e).hex;for(const m of a)p=Yi(p,m);const y=Un(f,p);return A.raw(y).hex===A.raw(l).hex}function wu(t){const e=new Mn(A.bytes(t)),n=e.read(1).num,r=e.read(32),[s,i]=n%2===0?[n,2]:[n-1,3],o=[];for(;e.size>=32;)o.push(e.read(32).hex);if(e.size!==0)throw new Error("Non-empty buffer on control block: "+String(e));return{intkey:r,paths:o,parity:i,version:s}}function xu(t=2){if(t===0||t===1)return t;if(t===2||t==="02")return 0;if(t===3||t==="03")return 1;throw new Error("Invalid parity bit: "+String(t))}function dg(t,e,n={}){const r=it.fmt.toJson(t),{throws:s=!1}=n,{prevout:i,witness:o=[]}=r.vin[e],a=it.util.readWitness(o),{cblock:f,script:h,params:l}=a;let p;if(l.length<1)return Me("Invalid witness data: "+String(o),s);const{scriptPubKey:y}=i??{};if(y===void 0)return Me("Prevout scriptPubKey is empty!",s);const{type:m,data:b}=it.util.readScriptPubKey(y);if(m!=="p2tr")return Me("Prevout script is not a valid taproot output:"+b.hex,s);if(b.length!==32)return Me("Invalid tapkey length: "+String(b.length),s);if(f!==null&&h!==null){const S=f[0]&254,C=Wi(h,S);if(n.extension=C,!Xi(b,C,f,{throws:s}))return Me("cblock verification failed!",s)}n.pubkey!==void 0?p=A.bytes(n.pubkey):l.length>1&&l[1].length===32?p=A.bytes(l[1]):p=A.bytes(b);const w=je.fmt.toParam(l[0]),v=new Mn(w),B=v.read(64).raw;if(v.size===1&&(n.sigflag=v.read(1).num,n.sigflag===0))return Me("0x00 is not a valid appended sigflag!",s);const _=Gi(r,e,n);return rg(B,_,p,s)?!0:Me("Invalid signature!",s)}const pg={hash:Gi,sign:tg,verify:dg},Mr={segwit:zp,taproot:pg},gg={getTag:vs,getLeaf:Wi,getBranch:Yi,getRoot:og},yg={readCtrlBlock:wu,readParityBit:xu},mg={getPubKey:cg,getSecKey:ug,getTweak:pu,tweakSecKey:gu,tweakPubKey:yu},Cr={getPubKey:lg,getSecKey:hg,encodeScript:ig,checkPath:Xi,tree:gg,tweak:mg,util:yg};var fe;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(fe||(fe={}));var ti;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(ti||(ti={}));const D=fe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Xt=t=>{switch(typeof t){case"undefined":return D.undefined;case"string":return D.string;case"number":return isNaN(t)?D.nan:D.number;case"boolean":return D.boolean;case"function":return D.function;case"bigint":return D.bigint;case"symbol":return D.symbol;case"object":return Array.isArray(t)?D.array:t===null?D.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?D.promise:typeof Map<"u"&&t instanceof Map?D.map:typeof Set<"u"&&t instanceof Set?D.set:typeof Date<"u"&&t instanceof Date?D.date:D.object;default:return D.unknown}},P=fe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),wg=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class dt extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,f=0;for(;f<o.path.length;){const h=o.path[f];f===o.path.length-1?(a[h]=a[h]||{_errors:[]},a[h]._errors.push(n(o))):a[h]=a[h]||{_errors:[]},a=a[h],f++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,fe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}dt.create=t=>new dt(t);const tr=(t,e)=>{let n;switch(t.code){case P.invalid_type:t.received===D.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case P.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,fe.jsonStringifyReplacer)}`;break;case P.unrecognized_keys:n=`Unrecognized key(s) in object: ${fe.joinValues(t.keys,", ")}`;break;case P.invalid_union:n="Invalid input";break;case P.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${fe.joinValues(t.options)}`;break;case P.invalid_enum_value:n=`Invalid enum value. Expected ${fe.joinValues(t.options)}, received '${t.received}'`;break;case P.invalid_arguments:n="Invalid function arguments";break;case P.invalid_return_type:n="Invalid function return type";break;case P.invalid_date:n="Invalid date";break;case P.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:fe.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case P.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case P.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case P.custom:n="Invalid input";break;case P.invalid_intersection_types:n="Intersection results could not be merged";break;case P.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case P.not_finite:n="Number must be finite";break;default:n=e.defaultError,fe.assertNever(t)}return{message:n}};let bu=tr;function xg(t){bu=t}function ss(){return bu}const is=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const f=r.filter(h=>!!h).slice().reverse();for(const h of f)a=h(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},bg=[];function F(t,e){const n=is({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ss(),tr].filter(r=>!!r)});t.common.issues.push(n)}class ze{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return J;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return ze.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return J;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const J=Object.freeze({status:"aborted"}),vu=t=>({status:"dirty",value:t}),Je=t=>({status:"valid",value:t}),ni=t=>t.status==="aborted",ri=t=>t.status==="dirty",os=t=>t.status==="valid",as=t=>typeof Promise<"u"&&t instanceof Promise;var V;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(V||(V={}));class _t{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Vo=(t,e)=>{if(os(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new dt(t.common.issues);return this._error=n,this._error}}};function ee(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class re{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Xt(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Xt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ze,ctx:{common:e.parent.common,data:e.data,parsedType:Xt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(as(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xt(e)},i=this._parseSync({data:e,path:s.path,parent:s});return Vo(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xt(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(as(s)?s:Promise.resolve(s));return Vo(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:P.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(f=>f?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new gt({schema:this,typeName:W.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Ut.create(this,this._def)}nullable(){return bn.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return pt.create(this,this._def)}promise(){return Fn.create(this,this._def)}or(e){return ir.create([this,e],this._def)}and(e){return or.create(this,e,this._def)}transform(e){return new gt({...ee(this._def),schema:this,typeName:W.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new hr({...ee(this._def),innerType:this,defaultValue:n,typeName:W.ZodDefault})}brand(){return new Au({typeName:W.ZodBranded,type:this,...ee(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new hs({...ee(this._def),innerType:this,catchValue:n,typeName:W.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return mr.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const vg=/^c[^\s-]{8,}$/i,Eg=/^[a-z][a-z0-9]*$/,Ag=/[0-9A-HJKMNP-TV-Z]{26}/,Sg=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,Bg=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,_g=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,Ig=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Tg=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,kg=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function $g(t,e){return!!((e==="v4"||!e)&&Ig.test(t)||(e==="v6"||!e)&&Tg.test(t))}class lt extends re{constructor(){super(...arguments),this._regex=(e,n,r)=>this.refinement(s=>e.test(s),{validation:n,code:P.invalid_string,...V.errToObj(r)}),this.nonempty=e=>this.min(1,V.errToObj(e)),this.trim=()=>new lt({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new lt({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new lt({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==D.string){const i=this._getOrReturnCtx(e);return F(i,{code:P.invalid_type,expected:D.string,received:i.parsedType}),J}const r=new ze;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),F(s,{code:P.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),F(s,{code:P.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?F(s,{code:P.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&F(s,{code:P.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")Bg.test(e.data)||(s=this._getOrReturnCtx(e,s),F(s,{validation:"email",code:P.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")_g.test(e.data)||(s=this._getOrReturnCtx(e,s),F(s,{validation:"emoji",code:P.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")Sg.test(e.data)||(s=this._getOrReturnCtx(e,s),F(s,{validation:"uuid",code:P.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")vg.test(e.data)||(s=this._getOrReturnCtx(e,s),F(s,{validation:"cuid",code:P.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")Eg.test(e.data)||(s=this._getOrReturnCtx(e,s),F(s,{validation:"cuid2",code:P.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")Ag.test(e.data)||(s=this._getOrReturnCtx(e,s),F(s,{validation:"ulid",code:P.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),F(s,{validation:"url",code:P.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),F(s,{validation:"regex",code:P.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),F(s,{code:P.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),F(s,{code:P.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),F(s,{code:P.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?kg(i).test(e.data)||(s=this._getOrReturnCtx(e,s),F(s,{code:P.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?$g(e.data,i.version)||(s=this._getOrReturnCtx(e,s),F(s,{validation:"ip",code:P.invalid_string,message:i.message}),r.dirty()):fe.assertNever(i);return{status:r.value,value:e.data}}_addCheck(e){return new lt({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...V.errToObj(e)})}url(e){return this._addCheck({kind:"url",...V.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...V.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...V.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...V.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...V.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...V.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...V.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...V.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...V.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...V.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...V.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...V.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...V.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...V.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...V.errToObj(n)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}lt.create=t=>{var e;return new lt({checks:[],typeName:W.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...ee(t)})};function Ug(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class sn extends re{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==D.number){const i=this._getOrReturnCtx(e);return F(i,{code:P.invalid_type,expected:D.number,received:i.parsedType}),J}let r;const s=new ze;for(const i of this._def.checks)i.kind==="int"?fe.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),F(r,{code:P.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),F(r,{code:P.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),F(r,{code:P.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?Ug(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),F(r,{code:P.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),F(r,{code:P.not_finite,message:i.message}),s.dirty()):fe.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,V.toString(n))}gt(e,n){return this.setLimit("min",e,!1,V.toString(n))}lte(e,n){return this.setLimit("max",e,!0,V.toString(n))}lt(e,n){return this.setLimit("max",e,!1,V.toString(n))}setLimit(e,n,r,s){return new sn({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:V.toString(s)}]})}_addCheck(e){return new sn({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:V.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:V.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:V.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:V.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:V.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:V.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:V.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:V.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:V.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&fe.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}sn.create=t=>new sn({checks:[],typeName:W.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...ee(t)});class on extends re{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==D.bigint){const i=this._getOrReturnCtx(e);return F(i,{code:P.invalid_type,expected:D.bigint,received:i.parsedType}),J}let r;const s=new ze;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),F(r,{code:P.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),F(r,{code:P.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),F(r,{code:P.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):fe.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,V.toString(n))}gt(e,n){return this.setLimit("min",e,!1,V.toString(n))}lte(e,n){return this.setLimit("max",e,!0,V.toString(n))}lt(e,n){return this.setLimit("max",e,!1,V.toString(n))}setLimit(e,n,r,s){return new on({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:V.toString(s)}]})}_addCheck(e){return new on({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:V.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:V.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:V.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:V.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:V.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}on.create=t=>{var e;return new on({checks:[],typeName:W.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...ee(t)})};class nr extends re{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==D.boolean){const r=this._getOrReturnCtx(e);return F(r,{code:P.invalid_type,expected:D.boolean,received:r.parsedType}),J}return Je(e.data)}}nr.create=t=>new nr({typeName:W.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...ee(t)});class wn extends re{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==D.date){const i=this._getOrReturnCtx(e);return F(i,{code:P.invalid_type,expected:D.date,received:i.parsedType}),J}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return F(i,{code:P.invalid_date}),J}const r=new ze;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),F(s,{code:P.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),F(s,{code:P.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):fe.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new wn({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:V.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:V.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}wn.create=t=>new wn({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:W.ZodDate,...ee(t)});class cs extends re{_parse(e){if(this._getType(e)!==D.symbol){const r=this._getOrReturnCtx(e);return F(r,{code:P.invalid_type,expected:D.symbol,received:r.parsedType}),J}return Je(e.data)}}cs.create=t=>new cs({typeName:W.ZodSymbol,...ee(t)});class rr extends re{_parse(e){if(this._getType(e)!==D.undefined){const r=this._getOrReturnCtx(e);return F(r,{code:P.invalid_type,expected:D.undefined,received:r.parsedType}),J}return Je(e.data)}}rr.create=t=>new rr({typeName:W.ZodUndefined,...ee(t)});class sr extends re{_parse(e){if(this._getType(e)!==D.null){const r=this._getOrReturnCtx(e);return F(r,{code:P.invalid_type,expected:D.null,received:r.parsedType}),J}return Je(e.data)}}sr.create=t=>new sr({typeName:W.ZodNull,...ee(t)});class Dn extends re{constructor(){super(...arguments),this._any=!0}_parse(e){return Je(e.data)}}Dn.create=t=>new Dn({typeName:W.ZodAny,...ee(t)});class pn extends re{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Je(e.data)}}pn.create=t=>new pn({typeName:W.ZodUnknown,...ee(t)});class Pt extends re{_parse(e){const n=this._getOrReturnCtx(e);return F(n,{code:P.invalid_type,expected:D.never,received:n.parsedType}),J}}Pt.create=t=>new Pt({typeName:W.ZodNever,...ee(t)});class us extends re{_parse(e){if(this._getType(e)!==D.undefined){const r=this._getOrReturnCtx(e);return F(r,{code:P.invalid_type,expected:D.void,received:r.parsedType}),J}return Je(e.data)}}us.create=t=>new us({typeName:W.ZodVoid,...ee(t)});class pt extends re{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==D.array)return F(n,{code:P.invalid_type,expected:D.array,received:n.parsedType}),J;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(F(n,{code:o?P.too_big:P.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(F(n,{code:P.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(F(n,{code:P.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new _t(n,o,n.path,a)))).then(o=>ze.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new _t(n,o,n.path,a)));return ze.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new pt({...this._def,minLength:{value:e,message:V.toString(n)}})}max(e,n){return new pt({...this._def,maxLength:{value:e,message:V.toString(n)}})}length(e,n){return new pt({...this._def,exactLength:{value:e,message:V.toString(n)}})}nonempty(e){return this.min(1,e)}}pt.create=(t,e)=>new pt({type:t,minLength:null,maxLength:null,exactLength:null,typeName:W.ZodArray,...ee(e)});function kn(t){if(t instanceof Ae){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Ut.create(kn(r))}return new Ae({...t._def,shape:()=>e})}else return t instanceof pt?new pt({...t._def,type:kn(t.element)}):t instanceof Ut?Ut.create(kn(t.unwrap())):t instanceof bn?bn.create(kn(t.unwrap())):t instanceof It?It.create(t.items.map(e=>kn(e))):t}class Ae extends re{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=fe.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==D.object){const h=this._getOrReturnCtx(e);return F(h,{code:P.invalid_type,expected:D.object,received:h.parsedType}),J}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Pt&&this._def.unknownKeys==="strip"))for(const h in s.data)o.includes(h)||a.push(h);const f=[];for(const h of o){const l=i[h],p=s.data[h];f.push({key:{status:"valid",value:h},value:l._parse(new _t(s,p,s.path,h)),alwaysSet:h in s.data})}if(this._def.catchall instanceof Pt){const h=this._def.unknownKeys;if(h==="passthrough")for(const l of a)f.push({key:{status:"valid",value:l},value:{status:"valid",value:s.data[l]}});else if(h==="strict")a.length>0&&(F(s,{code:P.unrecognized_keys,keys:a}),r.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const l of a){const p=s.data[l];f.push({key:{status:"valid",value:l},value:h._parse(new _t(s,p,s.path,l)),alwaysSet:l in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const h=[];for(const l of f){const p=await l.key;h.push({key:p,value:await l.value,alwaysSet:l.alwaysSet})}return h}).then(h=>ze.mergeObjectSync(r,h)):ze.mergeObjectSync(r,f)}get shape(){return this._def.shape()}strict(e){return new Ae({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const f=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=V.errToObj(e).message)!==null&&a!==void 0?a:f}:{message:f}}}:{}})}strip(){return new Ae({...this._def,unknownKeys:"strip"})}passthrough(){return new Ae({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ae({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ae({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:W.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Ae({...this._def,catchall:e})}pick(e){const n={};return fe.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Ae({...this._def,shape:()=>n})}omit(e){const n={};return fe.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Ae({...this._def,shape:()=>n})}deepPartial(){return kn(this)}partial(e){const n={};return fe.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new Ae({...this._def,shape:()=>n})}required(e){const n={};return fe.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Ut;)i=i._def.innerType;n[r]=i}}),new Ae({...this._def,shape:()=>n})}keyof(){return Eu(fe.objectKeys(this.shape))}}Ae.create=(t,e)=>new Ae({shape:()=>t,unknownKeys:"strip",catchall:Pt.create(),typeName:W.ZodObject,...ee(e)});Ae.strictCreate=(t,e)=>new Ae({shape:()=>t,unknownKeys:"strict",catchall:Pt.create(),typeName:W.ZodObject,...ee(e)});Ae.lazycreate=(t,e)=>new Ae({shape:t,unknownKeys:"strip",catchall:Pt.create(),typeName:W.ZodObject,...ee(e)});class ir extends re{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new dt(a.ctx.common.issues));return F(n,{code:P.invalid_union,unionErrors:o}),J}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const f of r){const h={...n,common:{...n.common,issues:[]},parent:null},l=f._parseSync({data:n.data,path:n.path,parent:h});if(l.status==="valid")return l;l.status==="dirty"&&!i&&(i={result:l,ctx:h}),h.common.issues.length&&o.push(h.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(f=>new dt(f));return F(n,{code:P.invalid_union,unionErrors:a}),J}}get options(){return this._def.options}}ir.create=(t,e)=>new ir({options:t,typeName:W.ZodUnion,...ee(e)});const zr=t=>t instanceof cr?zr(t.schema):t instanceof gt?zr(t.innerType()):t instanceof ur?[t.value]:t instanceof an?t.options:t instanceof fr?Object.keys(t.enum):t instanceof hr?zr(t._def.innerType):t instanceof rr?[void 0]:t instanceof sr?[null]:null;class Es extends re{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==D.object)return F(n,{code:P.invalid_type,expected:D.object,received:n.parsedType}),J;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(F(n,{code:P.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),J)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=zr(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new Es({typeName:W.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...ee(r)})}}function si(t,e){const n=Xt(t),r=Xt(e);if(t===e)return{valid:!0,data:t};if(n===D.object&&r===D.object){const s=fe.objectKeys(e),i=fe.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const f=si(t[a],e[a]);if(!f.valid)return{valid:!1};o[a]=f.data}return{valid:!0,data:o}}else if(n===D.array&&r===D.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],f=si(o,a);if(!f.valid)return{valid:!1};s.push(f.data)}return{valid:!0,data:s}}else return n===D.date&&r===D.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class or extends re{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(ni(i)||ni(o))return J;const a=si(i.value,o.value);return a.valid?((ri(i)||ri(o))&&n.dirty(),{status:n.value,value:a.data}):(F(r,{code:P.invalid_intersection_types}),J)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}or.create=(t,e,n)=>new or({left:t,right:e,typeName:W.ZodIntersection,...ee(n)});class It extends re{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==D.array)return F(r,{code:P.invalid_type,expected:D.array,received:r.parsedType}),J;if(r.data.length<this._def.items.length)return F(r,{code:P.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),J;!this._def.rest&&r.data.length>this._def.items.length&&(F(r,{code:P.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const f=this._def.items[a]||this._def.rest;return f?f._parse(new _t(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>ze.mergeArray(n,o)):ze.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new It({...this._def,rest:e})}}It.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new It({items:t,typeName:W.ZodTuple,rest:null,...ee(e)})};class ar extends re{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==D.object)return F(r,{code:P.invalid_type,expected:D.object,received:r.parsedType}),J;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new _t(r,a,r.path,a)),value:o._parse(new _t(r,r.data[a],r.path,a))});return r.common.async?ze.mergeObjectAsync(n,s):ze.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof re?new ar({keyType:e,valueType:n,typeName:W.ZodRecord,...ee(r)}):new ar({keyType:lt.create(),valueType:e,typeName:W.ZodRecord,...ee(n)})}}class fs extends re{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==D.map)return F(r,{code:P.invalid_type,expected:D.map,received:r.parsedType}),J;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,f],h)=>({key:s._parse(new _t(r,a,r.path,[h,"key"])),value:i._parse(new _t(r,f,r.path,[h,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const f of o){const h=await f.key,l=await f.value;if(h.status==="aborted"||l.status==="aborted")return J;(h.status==="dirty"||l.status==="dirty")&&n.dirty(),a.set(h.value,l.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const f of o){const h=f.key,l=f.value;if(h.status==="aborted"||l.status==="aborted")return J;(h.status==="dirty"||l.status==="dirty")&&n.dirty(),a.set(h.value,l.value)}return{status:n.value,value:a}}}}fs.create=(t,e,n)=>new fs({valueType:e,keyType:t,typeName:W.ZodMap,...ee(n)});class xn extends re{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==D.set)return F(r,{code:P.invalid_type,expected:D.set,received:r.parsedType}),J;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(F(r,{code:P.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(F(r,{code:P.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(f){const h=new Set;for(const l of f){if(l.status==="aborted")return J;l.status==="dirty"&&n.dirty(),h.add(l.value)}return{status:n.value,value:h}}const a=[...r.data.values()].map((f,h)=>i._parse(new _t(r,f,r.path,h)));return r.common.async?Promise.all(a).then(f=>o(f)):o(a)}min(e,n){return new xn({...this._def,minSize:{value:e,message:V.toString(n)}})}max(e,n){return new xn({...this._def,maxSize:{value:e,message:V.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}xn.create=(t,e)=>new xn({valueType:t,minSize:null,maxSize:null,typeName:W.ZodSet,...ee(e)});class On extends re{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==D.function)return F(n,{code:P.invalid_type,expected:D.function,received:n.parsedType}),J;function r(a,f){return is({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,ss(),tr].filter(h=>!!h),issueData:{code:P.invalid_arguments,argumentsError:f}})}function s(a,f){return is({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,ss(),tr].filter(h=>!!h),issueData:{code:P.invalid_return_type,returnTypeError:f}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;return this._def.returns instanceof Fn?Je(async(...a)=>{const f=new dt([]),h=await this._def.args.parseAsync(a,i).catch(y=>{throw f.addIssue(r(a,y)),f}),l=await o(...h);return await this._def.returns._def.type.parseAsync(l,i).catch(y=>{throw f.addIssue(s(l,y)),f})}):Je((...a)=>{const f=this._def.args.safeParse(a,i);if(!f.success)throw new dt([r(a,f.error)]);const h=o(...f.data),l=this._def.returns.safeParse(h,i);if(!l.success)throw new dt([s(h,l.error)]);return l.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new On({...this._def,args:It.create(e).rest(pn.create())})}returns(e){return new On({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new On({args:e||It.create([]).rest(pn.create()),returns:n||pn.create(),typeName:W.ZodFunction,...ee(r)})}}class cr extends re{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}cr.create=(t,e)=>new cr({getter:t,typeName:W.ZodLazy,...ee(e)});class ur extends re{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return F(n,{received:n.data,code:P.invalid_literal,expected:this._def.value}),J}return{status:"valid",value:e.data}}get value(){return this._def.value}}ur.create=(t,e)=>new ur({value:t,typeName:W.ZodLiteral,...ee(e)});function Eu(t,e){return new an({values:t,typeName:W.ZodEnum,...ee(e)})}class an extends re{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return F(n,{expected:fe.joinValues(r),received:n.parsedType,code:P.invalid_type}),J}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return F(n,{received:n.data,code:P.invalid_enum_value,options:r}),J}return Je(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return an.create(e)}exclude(e){return an.create(this.options.filter(n=>!e.includes(n)))}}an.create=Eu;class fr extends re{_parse(e){const n=fe.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==D.string&&r.parsedType!==D.number){const s=fe.objectValues(n);return F(r,{expected:fe.joinValues(s),received:r.parsedType,code:P.invalid_type}),J}if(n.indexOf(e.data)===-1){const s=fe.objectValues(n);return F(r,{received:r.data,code:P.invalid_enum_value,options:s}),J}return Je(e.data)}get enum(){return this._def.values}}fr.create=(t,e)=>new fr({values:t,typeName:W.ZodNativeEnum,...ee(e)});class Fn extends re{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==D.promise&&n.common.async===!1)return F(n,{code:P.invalid_type,expected:D.promise,received:n.parsedType}),J;const r=n.parsedType===D.promise?n.data:Promise.resolve(n.data);return Je(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Fn.create=(t,e)=>new Fn({type:t,typeName:W.ZodPromise,...ee(e)});class gt extends re{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===W.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null;if(s.type==="preprocess"){const o=s.transform(r.data);return r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}const i={addIssue:o=>{F(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="refinement"){const o=a=>{const f=s.refinement(a,i);if(r.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?J:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?J:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!os(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>os(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);fe.assertNever(s)}}gt.create=(t,e,n)=>new gt({schema:t,typeName:W.ZodEffects,effect:e,...ee(n)});gt.createWithPreprocess=(t,e,n)=>new gt({schema:e,effect:{type:"preprocess",transform:t},typeName:W.ZodEffects,...ee(n)});class Ut extends re{_parse(e){return this._getType(e)===D.undefined?Je(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ut.create=(t,e)=>new Ut({innerType:t,typeName:W.ZodOptional,...ee(e)});class bn extends re{_parse(e){return this._getType(e)===D.null?Je(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}bn.create=(t,e)=>new bn({innerType:t,typeName:W.ZodNullable,...ee(e)});class hr extends re{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===D.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}hr.create=(t,e)=>new hr({innerType:t,typeName:W.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ee(e)});class hs extends re{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return as(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new dt(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new dt(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}hs.create=(t,e)=>new hs({innerType:t,typeName:W.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ee(e)});class ls extends re{_parse(e){if(this._getType(e)!==D.nan){const r=this._getOrReturnCtx(e);return F(r,{code:P.invalid_type,expected:D.nan,received:r.parsedType}),J}return{status:"valid",value:e.data}}}ls.create=t=>new ls({typeName:W.ZodNaN,...ee(t)});const Og=Symbol("zod_brand");class Au extends re{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class mr extends re{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?J:i.status==="dirty"?(n.dirty(),vu(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?J:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new mr({in:e,out:n,typeName:W.ZodPipeline})}}const Su=(t,e={},n)=>t?Dn.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,f=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,h=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...h,fatal:f})}}):Dn.create(),Pg={object:Ae.lazycreate};var W;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline"})(W||(W={}));const Cg=(t,e={message:`Input not instance of ${t.name}`})=>Su(n=>n instanceof t,e),Bu=lt.create,_u=sn.create,Hg=ls.create,Ng=on.create,Iu=nr.create,Lg=wn.create,Rg=cs.create,Dg=rr.create,Fg=sr.create,jg=Dn.create,Zg=pn.create,Mg=Pt.create,zg=us.create,Vg=pt.create,qg=Ae.create,Kg=Ae.strictCreate,Gg=ir.create,Wg=Es.create,Yg=or.create,Xg=It.create,Jg=ar.create,Qg=fs.create,e1=xn.create,t1=On.create,n1=cr.create,r1=ur.create,s1=an.create,i1=fr.create,o1=Fn.create,qo=gt.create,a1=Ut.create,c1=bn.create,u1=gt.createWithPreprocess,f1=mr.create,h1=()=>Bu().optional(),l1=()=>_u().optional(),d1=()=>Iu().optional(),p1={string:t=>lt.create({...t,coerce:!0}),number:t=>sn.create({...t,coerce:!0}),boolean:t=>nr.create({...t,coerce:!0}),bigint:t=>on.create({...t,coerce:!0}),date:t=>wn.create({...t,coerce:!0})},g1=J;var Xe=Object.freeze({__proto__:null,defaultErrorMap:tr,setErrorMap:xg,getErrorMap:ss,makeIssue:is,EMPTY_PATH:bg,addIssueToContext:F,ParseStatus:ze,INVALID:J,DIRTY:vu,OK:Je,isAborted:ni,isDirty:ri,isValid:os,isAsync:as,get util(){return fe},get objectUtil(){return ti},ZodParsedType:D,getParsedType:Xt,ZodType:re,ZodString:lt,ZodNumber:sn,ZodBigInt:on,ZodBoolean:nr,ZodDate:wn,ZodSymbol:cs,ZodUndefined:rr,ZodNull:sr,ZodAny:Dn,ZodUnknown:pn,ZodNever:Pt,ZodVoid:us,ZodArray:pt,ZodObject:Ae,ZodUnion:ir,ZodDiscriminatedUnion:Es,ZodIntersection:or,ZodTuple:It,ZodRecord:ar,ZodMap:fs,ZodSet:xn,ZodFunction:On,ZodLazy:cr,ZodLiteral:ur,ZodEnum:an,ZodNativeEnum:fr,ZodPromise:Fn,ZodEffects:gt,ZodTransformer:gt,ZodOptional:Ut,ZodNullable:bn,ZodDefault:hr,ZodCatch:hs,ZodNaN:ls,BRAND:Og,ZodBranded:Au,ZodPipeline:mr,custom:Su,Schema:re,ZodSchema:re,late:Pg,get ZodFirstPartyTypeKind(){return W},coerce:p1,any:jg,array:Vg,bigint:Ng,boolean:Iu,date:Lg,discriminatedUnion:Wg,effect:qo,enum:s1,function:t1,instanceof:Cg,intersection:Yg,lazy:n1,literal:r1,map:Qg,nan:Hg,nativeEnum:i1,never:Mg,null:Fg,nullable:c1,number:_u,object:qg,oboolean:d1,onumber:l1,optional:a1,ostring:h1,pipeline:f1,preprocess:u1,promise:o1,record:Jg,set:e1,strictObject:Kg,string:Bu,symbol:Rg,transformer:qo,tuple:Xg,undefined:Dg,union:Gg,unknown:Zg,void:zg,NEVER:g1,ZodIssueCode:P,quotelessJson:wg,ZodError:dt});const Tu=Xe.string().regex(/^[a-fA-F0-9]$/),y1=Xe.string().regex(/^[a-fA-F0-9]{64}$/),jn=Xe.number().min(0).max(4294967295),m1=Xe.bigint(),ku=Xe.instanceof(Uint8Array),w1=Xe.union([Tu,jn,Xe.string(),ku]).array(),Ji=Xe.union([w1,Tu,ku]),x1=Xe.array(Ji),$u=Xe.object({value:Xe.union([jn,m1]),scriptPubKey:Ji}),b1=Xe.object({txid:y1,vout:jn,scriptSig:Ji,sequence:jn,prevout:$u.optional(),witness:x1});Xe.object({version:jn,vin:Xe.array(b1),vout:Xe.array($u),locktime:jn});var Uu={},As={};As.byteLength=A1;As.toByteArray=B1;As.fromByteArray=T1;var Et=[],ct=[],v1=typeof Uint8Array<"u"?Uint8Array:Array,Rs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var In=0,E1=Rs.length;In<E1;++In)Et[In]=Rs[In],ct[Rs.charCodeAt(In)]=In;ct["-".charCodeAt(0)]=62;ct["_".charCodeAt(0)]=63;function Ou(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function A1(t){var e=Ou(t),n=e[0],r=e[1];return(n+r)*3/4-r}function S1(t,e,n){return(e+n)*3/4-n}function B1(t){var e,n=Ou(t),r=n[0],s=n[1],i=new v1(S1(t,r,s)),o=0,a=s>0?r-4:r,f;for(f=0;f<a;f+=4)e=ct[t.charCodeAt(f)]<<18|ct[t.charCodeAt(f+1)]<<12|ct[t.charCodeAt(f+2)]<<6|ct[t.charCodeAt(f+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=e&255;return s===2&&(e=ct[t.charCodeAt(f)]<<2|ct[t.charCodeAt(f+1)]>>4,i[o++]=e&255),s===1&&(e=ct[t.charCodeAt(f)]<<10|ct[t.charCodeAt(f+1)]<<4|ct[t.charCodeAt(f+2)]>>2,i[o++]=e>>8&255,i[o++]=e&255),i}function _1(t){return Et[t>>18&63]+Et[t>>12&63]+Et[t>>6&63]+Et[t&63]}function I1(t,e,n){for(var r,s=[],i=e;i<n;i+=3)r=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),s.push(_1(r));return s.join("")}function T1(t){for(var e,n=t.length,r=n%3,s=[],i=16383,o=0,a=n-r;o<a;o+=i)s.push(I1(t,o,o+i>a?a:o+i));return r===1?(e=t[n-1],s.push(Et[e>>2]+Et[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],s.push(Et[e>>10]+Et[e>>4&63]+Et[e<<2&63]+"=")),s.join("")}var Qi={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Qi.read=function(t,e,n,r,s){var i,o,a=s*8-r-1,f=(1<<a)-1,h=f>>1,l=-7,p=n?s-1:0,y=n?-1:1,m=t[e+p];for(p+=y,i=m&(1<<-l)-1,m>>=-l,l+=a;l>0;i=i*256+t[e+p],p+=y,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=r;l>0;o=o*256+t[e+p],p+=y,l-=8);if(i===0)i=1-h;else{if(i===f)return o?NaN:(m?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-h}return(m?-1:1)*o*Math.pow(2,i-r)};Qi.write=function(t,e,n,r,s,i){var o,a,f,h=i*8-s-1,l=(1<<h)-1,p=l>>1,y=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=r?0:i-1,b=r?1:-1,w=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-o))<1&&(o--,f*=2),o+p>=1?e+=y/f:e+=y*Math.pow(2,1-p),e*f>=2&&(o++,f/=2),o+p>=l?(a=0,o=l):o+p>=1?(a=(e*f-1)*Math.pow(2,s),o=o+p):(a=e*Math.pow(2,p-1)*Math.pow(2,s),o=0));s>=8;t[n+m]=a&255,m+=b,a/=256,s-=8);for(o=o<<s|a,h+=s;h>0;t[n+m]=o&255,m+=b,o/=256,h-=8);t[n+m-b]|=w*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=As,n=Qi,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=_,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const d=new Uint8Array(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,Uint8Array.prototype),Object.setPrototypeOf(d,c),d.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(d){if(d>s)throw new RangeError('The value "'+d+'" is invalid for option "size"');const c=new Uint8Array(d);return Object.setPrototypeOf(c,a.prototype),c}function a(d,c,u){if(typeof d=="number"){if(typeof c=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(d)}return f(d,c,u)}a.poolSize=8192;function f(d,c,u){if(typeof d=="string")return y(d,c);if(ArrayBuffer.isView(d))return b(d);if(d==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);if(wt(d,ArrayBuffer)||d&&wt(d.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(wt(d,SharedArrayBuffer)||d&&wt(d.buffer,SharedArrayBuffer)))return w(d,c,u);if(typeof d=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const g=d.valueOf&&d.valueOf();if(g!=null&&g!==d)return a.from(g,c,u);const x=v(d);if(x)return x;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof d[Symbol.toPrimitive]=="function")return a.from(d[Symbol.toPrimitive]("string"),c,u);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d)}a.from=function(d,c,u){return f(d,c,u)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function h(d){if(typeof d!="number")throw new TypeError('"size" argument must be of type number');if(d<0)throw new RangeError('The value "'+d+'" is invalid for option "size"')}function l(d,c,u){return h(d),d<=0?o(d):c!==void 0?typeof u=="string"?o(d).fill(c,u):o(d).fill(c):o(d)}a.alloc=function(d,c,u){return l(d,c,u)};function p(d){return h(d),o(d<0?0:B(d)|0)}a.allocUnsafe=function(d){return p(d)},a.allocUnsafeSlow=function(d){return p(d)};function y(d,c){if((typeof c!="string"||c==="")&&(c="utf8"),!a.isEncoding(c))throw new TypeError("Unknown encoding: "+c);const u=S(d,c)|0;let g=o(u);const x=g.write(d,c);return x!==u&&(g=g.slice(0,x)),g}function m(d){const c=d.length<0?0:B(d.length)|0,u=o(c);for(let g=0;g<c;g+=1)u[g]=d[g]&255;return u}function b(d){if(wt(d,Uint8Array)){const c=new Uint8Array(d);return w(c.buffer,c.byteOffset,c.byteLength)}return m(d)}function w(d,c,u){if(c<0||d.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(d.byteLength<c+(u||0))throw new RangeError('"length" is outside of buffer bounds');let g;return c===void 0&&u===void 0?g=new Uint8Array(d):u===void 0?g=new Uint8Array(d,c):g=new Uint8Array(d,c,u),Object.setPrototypeOf(g,a.prototype),g}function v(d){if(a.isBuffer(d)){const c=B(d.length)|0,u=o(c);return u.length===0||d.copy(u,0,0,c),u}if(d.length!==void 0)return typeof d.length!="number"||Is(d.length)?o(0):m(d);if(d.type==="Buffer"&&Array.isArray(d.data))return m(d.data)}function B(d){if(d>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return d|0}function _(d){return+d!=d&&(d=0),a.alloc(+d)}a.isBuffer=function(c){return c!=null&&c._isBuffer===!0&&c!==a.prototype},a.compare=function(c,u){if(wt(c,Uint8Array)&&(c=a.from(c,c.offset,c.byteLength)),wt(u,Uint8Array)&&(u=a.from(u,u.offset,u.byteLength)),!a.isBuffer(c)||!a.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===u)return 0;let g=c.length,x=u.length;for(let E=0,T=Math.min(g,x);E<T;++E)if(c[E]!==u[E]){g=c[E],x=u[E];break}return g<x?-1:x<g?1:0},a.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(c,u){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return a.alloc(0);let g;if(u===void 0)for(u=0,g=0;g<c.length;++g)u+=c[g].length;const x=a.allocUnsafe(u);let E=0;for(g=0;g<c.length;++g){let T=c[g];if(wt(T,Uint8Array))E+T.length>x.length?(a.isBuffer(T)||(T=a.from(T)),T.copy(x,E)):Uint8Array.prototype.set.call(x,T,E);else if(a.isBuffer(T))T.copy(x,E);else throw new TypeError('"list" argument must be an Array of Buffers');E+=T.length}return x};function S(d,c){if(a.isBuffer(d))return d.length;if(ArrayBuffer.isView(d)||wt(d,ArrayBuffer))return d.byteLength;if(typeof d!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof d);const u=d.length,g=arguments.length>2&&arguments[2]===!0;if(!g&&u===0)return 0;let x=!1;for(;;)switch(c){case"ascii":case"latin1":case"binary":return u;case"utf8":case"utf-8":return _s(d).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u*2;case"hex":return u>>>1;case"base64":return ro(d).length;default:if(x)return g?-1:_s(d).length;c=(""+c).toLowerCase(),x=!0}}a.byteLength=S;function C(d,c,u){let g=!1;if((c===void 0||c<0)&&(c=0),c>this.length||((u===void 0||u>this.length)&&(u=this.length),u<=0)||(u>>>=0,c>>>=0,u<=c))return"";for(d||(d="utf8");;)switch(d){case"hex":return X(this,c,u);case"utf8":case"utf-8":return ce(this,c,u);case"ascii":return L(this,c,u);case"latin1":case"binary":return z(this,c,u);case"base64":return ie(this,c,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me(this,c,u);default:if(g)throw new TypeError("Unknown encoding: "+d);d=(d+"").toLowerCase(),g=!0}}a.prototype._isBuffer=!0;function I(d,c,u){const g=d[c];d[c]=d[u],d[u]=g}a.prototype.swap16=function(){const c=this.length;if(c%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<c;u+=2)I(this,u,u+1);return this},a.prototype.swap32=function(){const c=this.length;if(c%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<c;u+=4)I(this,u,u+3),I(this,u+1,u+2);return this},a.prototype.swap64=function(){const c=this.length;if(c%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<c;u+=8)I(this,u,u+7),I(this,u+1,u+6),I(this,u+2,u+5),I(this,u+3,u+4);return this},a.prototype.toString=function(){const c=this.length;return c===0?"":arguments.length===0?ce(this,0,c):C.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(c){if(!a.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:a.compare(this,c)===0},a.prototype.inspect=function(){let c="";const u=t.INSPECT_MAX_BYTES;return c=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(c+=" ... "),"<Buffer "+c+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(c,u,g,x,E){if(wt(c,Uint8Array)&&(c=a.from(c,c.offset,c.byteLength)),!a.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(u===void 0&&(u=0),g===void 0&&(g=c?c.length:0),x===void 0&&(x=0),E===void 0&&(E=this.length),u<0||g>c.length||x<0||E>this.length)throw new RangeError("out of range index");if(x>=E&&u>=g)return 0;if(x>=E)return-1;if(u>=g)return 1;if(u>>>=0,g>>>=0,x>>>=0,E>>>=0,this===c)return 0;let T=E-x,se=g-u;const Be=Math.min(T,se),be=this.slice(x,E),_e=c.slice(u,g);for(let ye=0;ye<Be;++ye)if(be[ye]!==_e[ye]){T=be[ye],se=_e[ye];break}return T<se?-1:se<T?1:0};function U(d,c,u,g,x){if(d.length===0)return-1;if(typeof u=="string"?(g=u,u=0):u>2147483647?u=2147483647:u<-2147483648&&(u=-2147483648),u=+u,Is(u)&&(u=x?0:d.length-1),u<0&&(u=d.length+u),u>=d.length){if(x)return-1;u=d.length-1}else if(u<0)if(x)u=0;else return-1;if(typeof c=="string"&&(c=a.from(c,g)),a.isBuffer(c))return c.length===0?-1:O(d,c,u,g,x);if(typeof c=="number")return c=c&255,typeof Uint8Array.prototype.indexOf=="function"?x?Uint8Array.prototype.indexOf.call(d,c,u):Uint8Array.prototype.lastIndexOf.call(d,c,u):O(d,[c],u,g,x);throw new TypeError("val must be string, number or Buffer")}function O(d,c,u,g,x){let E=1,T=d.length,se=c.length;if(g!==void 0&&(g=String(g).toLowerCase(),g==="ucs2"||g==="ucs-2"||g==="utf16le"||g==="utf-16le")){if(d.length<2||c.length<2)return-1;E=2,T/=2,se/=2,u/=2}function Be(_e,ye){return E===1?_e[ye]:_e.readUInt16BE(ye*E)}let be;if(x){let _e=-1;for(be=u;be<T;be++)if(Be(d,be)===Be(c,_e===-1?0:be-_e)){if(_e===-1&&(_e=be),be-_e+1===se)return _e*E}else _e!==-1&&(be-=be-_e),_e=-1}else for(u+se>T&&(u=T-se),be=u;be>=0;be--){let _e=!0;for(let ye=0;ye<se;ye++)if(Be(d,be+ye)!==Be(c,ye)){_e=!1;break}if(_e)return be}return-1}a.prototype.includes=function(c,u,g){return this.indexOf(c,u,g)!==-1},a.prototype.indexOf=function(c,u,g){return U(this,c,u,g,!0)},a.prototype.lastIndexOf=function(c,u,g){return U(this,c,u,g,!1)};function $(d,c,u,g){u=Number(u)||0;const x=d.length-u;g?(g=Number(g),g>x&&(g=x)):g=x;const E=c.length;g>E/2&&(g=E/2);let T;for(T=0;T<g;++T){const se=parseInt(c.substr(T*2,2),16);if(Is(se))return T;d[u+T]=se}return T}function N(d,c,u,g){return br(_s(c,d.length-u),d,u,g)}function j(d,c,u,g){return br(Ku(c),d,u,g)}function q(d,c,u,g){return br(ro(c),d,u,g)}function Y(d,c,u,g){return br(Gu(c,d.length-u),d,u,g)}a.prototype.write=function(c,u,g,x){if(u===void 0)x="utf8",g=this.length,u=0;else if(g===void 0&&typeof u=="string")x=u,g=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(g)?(g=g>>>0,x===void 0&&(x="utf8")):(x=g,g=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const E=this.length-u;if((g===void 0||g>E)&&(g=E),c.length>0&&(g<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");x||(x="utf8");let T=!1;for(;;)switch(x){case"hex":return $(this,c,u,g);case"utf8":case"utf-8":return N(this,c,u,g);case"ascii":case"latin1":case"binary":return j(this,c,u,g);case"base64":return q(this,c,u,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y(this,c,u,g);default:if(T)throw new TypeError("Unknown encoding: "+x);x=(""+x).toLowerCase(),T=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ie(d,c,u){return c===0&&u===d.length?e.fromByteArray(d):e.fromByteArray(d.slice(c,u))}function ce(d,c,u){u=Math.min(d.length,u);const g=[];let x=c;for(;x<u;){const E=d[x];let T=null,se=E>239?4:E>223?3:E>191?2:1;if(x+se<=u){let Be,be,_e,ye;switch(se){case 1:E<128&&(T=E);break;case 2:Be=d[x+1],(Be&192)===128&&(ye=(E&31)<<6|Be&63,ye>127&&(T=ye));break;case 3:Be=d[x+1],be=d[x+2],(Be&192)===128&&(be&192)===128&&(ye=(E&15)<<12|(Be&63)<<6|be&63,ye>2047&&(ye<55296||ye>57343)&&(T=ye));break;case 4:Be=d[x+1],be=d[x+2],_e=d[x+3],(Be&192)===128&&(be&192)===128&&(_e&192)===128&&(ye=(E&15)<<18|(Be&63)<<12|(be&63)<<6|_e&63,ye>65535&&ye<1114112&&(T=ye))}}T===null?(T=65533,se=1):T>65535&&(T-=65536,g.push(T>>>10&1023|55296),T=56320|T&1023),g.push(T),x+=se}return H(g)}const k=4096;function H(d){const c=d.length;if(c<=k)return String.fromCharCode.apply(String,d);let u="",g=0;for(;g<c;)u+=String.fromCharCode.apply(String,d.slice(g,g+=k));return u}function L(d,c,u){let g="";u=Math.min(d.length,u);for(let x=c;x<u;++x)g+=String.fromCharCode(d[x]&127);return g}function z(d,c,u){let g="";u=Math.min(d.length,u);for(let x=c;x<u;++x)g+=String.fromCharCode(d[x]);return g}function X(d,c,u){const g=d.length;(!c||c<0)&&(c=0),(!u||u<0||u>g)&&(u=g);let x="";for(let E=c;E<u;++E)x+=Wu[d[E]];return x}function me(d,c,u){const g=d.slice(c,u);let x="";for(let E=0;E<g.length-1;E+=2)x+=String.fromCharCode(g[E]+g[E+1]*256);return x}a.prototype.slice=function(c,u){const g=this.length;c=~~c,u=u===void 0?g:~~u,c<0?(c+=g,c<0&&(c=0)):c>g&&(c=g),u<0?(u+=g,u<0&&(u=0)):u>g&&(u=g),u<c&&(u=c);const x=this.subarray(c,u);return Object.setPrototypeOf(x,a.prototype),x};function G(d,c,u){if(d%1!==0||d<0)throw new RangeError("offset is not uint");if(d+c>u)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(c,u,g){c=c>>>0,u=u>>>0,g||G(c,u,this.length);let x=this[c],E=1,T=0;for(;++T<u&&(E*=256);)x+=this[c+T]*E;return x},a.prototype.readUintBE=a.prototype.readUIntBE=function(c,u,g){c=c>>>0,u=u>>>0,g||G(c,u,this.length);let x=this[c+--u],E=1;for(;u>0&&(E*=256);)x+=this[c+--u]*E;return x},a.prototype.readUint8=a.prototype.readUInt8=function(c,u){return c=c>>>0,u||G(c,1,this.length),this[c]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(c,u){return c=c>>>0,u||G(c,2,this.length),this[c]|this[c+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(c,u){return c=c>>>0,u||G(c,2,this.length),this[c]<<8|this[c+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(c,u){return c=c>>>0,u||G(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(c,u){return c=c>>>0,u||G(c,4,this.length),this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])},a.prototype.readBigUInt64LE=Ht(function(c){c=c>>>0,Se(c,"offset");const u=this[c],g=this[c+7];(u===void 0||g===void 0)&&Ze(c,this.length-8);const x=u+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24,E=this[++c]+this[++c]*2**8+this[++c]*2**16+g*2**24;return BigInt(x)+(BigInt(E)<<BigInt(32))}),a.prototype.readBigUInt64BE=Ht(function(c){c=c>>>0,Se(c,"offset");const u=this[c],g=this[c+7];(u===void 0||g===void 0)&&Ze(c,this.length-8);const x=u*2**24+this[++c]*2**16+this[++c]*2**8+this[++c],E=this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+g;return(BigInt(x)<<BigInt(32))+BigInt(E)}),a.prototype.readIntLE=function(c,u,g){c=c>>>0,u=u>>>0,g||G(c,u,this.length);let x=this[c],E=1,T=0;for(;++T<u&&(E*=256);)x+=this[c+T]*E;return E*=128,x>=E&&(x-=Math.pow(2,8*u)),x},a.prototype.readIntBE=function(c,u,g){c=c>>>0,u=u>>>0,g||G(c,u,this.length);let x=u,E=1,T=this[c+--x];for(;x>0&&(E*=256);)T+=this[c+--x]*E;return E*=128,T>=E&&(T-=Math.pow(2,8*u)),T},a.prototype.readInt8=function(c,u){return c=c>>>0,u||G(c,1,this.length),this[c]&128?(255-this[c]+1)*-1:this[c]},a.prototype.readInt16LE=function(c,u){c=c>>>0,u||G(c,2,this.length);const g=this[c]|this[c+1]<<8;return g&32768?g|4294901760:g},a.prototype.readInt16BE=function(c,u){c=c>>>0,u||G(c,2,this.length);const g=this[c+1]|this[c]<<8;return g&32768?g|4294901760:g},a.prototype.readInt32LE=function(c,u){return c=c>>>0,u||G(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},a.prototype.readInt32BE=function(c,u){return c=c>>>0,u||G(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},a.prototype.readBigInt64LE=Ht(function(c){c=c>>>0,Se(c,"offset");const u=this[c],g=this[c+7];(u===void 0||g===void 0)&&Ze(c,this.length-8);const x=this[c+4]+this[c+5]*2**8+this[c+6]*2**16+(g<<24);return(BigInt(x)<<BigInt(32))+BigInt(u+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24)}),a.prototype.readBigInt64BE=Ht(function(c){c=c>>>0,Se(c,"offset");const u=this[c],g=this[c+7];(u===void 0||g===void 0)&&Ze(c,this.length-8);const x=(u<<24)+this[++c]*2**16+this[++c]*2**8+this[++c];return(BigInt(x)<<BigInt(32))+BigInt(this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+g)}),a.prototype.readFloatLE=function(c,u){return c=c>>>0,u||G(c,4,this.length),n.read(this,c,!0,23,4)},a.prototype.readFloatBE=function(c,u){return c=c>>>0,u||G(c,4,this.length),n.read(this,c,!1,23,4)},a.prototype.readDoubleLE=function(c,u){return c=c>>>0,u||G(c,8,this.length),n.read(this,c,!0,52,8)},a.prototype.readDoubleBE=function(c,u){return c=c>>>0,u||G(c,8,this.length),n.read(this,c,!1,52,8)};function Q(d,c,u,g,x,E){if(!a.isBuffer(d))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>x||c<E)throw new RangeError('"value" argument is out of bounds');if(u+g>d.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(c,u,g,x){if(c=+c,u=u>>>0,g=g>>>0,!x){const se=Math.pow(2,8*g)-1;Q(this,c,u,g,se,0)}let E=1,T=0;for(this[u]=c&255;++T<g&&(E*=256);)this[u+T]=c/E&255;return u+g},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(c,u,g,x){if(c=+c,u=u>>>0,g=g>>>0,!x){const se=Math.pow(2,8*g)-1;Q(this,c,u,g,se,0)}let E=g-1,T=1;for(this[u+E]=c&255;--E>=0&&(T*=256);)this[u+E]=c/T&255;return u+g},a.prototype.writeUint8=a.prototype.writeUInt8=function(c,u,g){return c=+c,u=u>>>0,g||Q(this,c,u,1,255,0),this[u]=c&255,u+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(c,u,g){return c=+c,u=u>>>0,g||Q(this,c,u,2,65535,0),this[u]=c&255,this[u+1]=c>>>8,u+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(c,u,g){return c=+c,u=u>>>0,g||Q(this,c,u,2,65535,0),this[u]=c>>>8,this[u+1]=c&255,u+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(c,u,g){return c=+c,u=u>>>0,g||Q(this,c,u,4,4294967295,0),this[u+3]=c>>>24,this[u+2]=c>>>16,this[u+1]=c>>>8,this[u]=c&255,u+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(c,u,g){return c=+c,u=u>>>0,g||Q(this,c,u,4,4294967295,0),this[u]=c>>>24,this[u+1]=c>>>16,this[u+2]=c>>>8,this[u+3]=c&255,u+4};function xe(d,c,u,g,x){qe(c,g,x,d,u,7);let E=Number(c&BigInt(4294967295));d[u++]=E,E=E>>8,d[u++]=E,E=E>>8,d[u++]=E,E=E>>8,d[u++]=E;let T=Number(c>>BigInt(32)&BigInt(4294967295));return d[u++]=T,T=T>>8,d[u++]=T,T=T>>8,d[u++]=T,T=T>>8,d[u++]=T,u}function he(d,c,u,g,x){qe(c,g,x,d,u,7);let E=Number(c&BigInt(4294967295));d[u+7]=E,E=E>>8,d[u+6]=E,E=E>>8,d[u+5]=E,E=E>>8,d[u+4]=E;let T=Number(c>>BigInt(32)&BigInt(4294967295));return d[u+3]=T,T=T>>8,d[u+2]=T,T=T>>8,d[u+1]=T,T=T>>8,d[u]=T,u+8}a.prototype.writeBigUInt64LE=Ht(function(c,u=0){return xe(this,c,u,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Ht(function(c,u=0){return he(this,c,u,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(c,u,g,x){if(c=+c,u=u>>>0,!x){const Be=Math.pow(2,8*g-1);Q(this,c,u,g,Be-1,-Be)}let E=0,T=1,se=0;for(this[u]=c&255;++E<g&&(T*=256);)c<0&&se===0&&this[u+E-1]!==0&&(se=1),this[u+E]=(c/T>>0)-se&255;return u+g},a.prototype.writeIntBE=function(c,u,g,x){if(c=+c,u=u>>>0,!x){const Be=Math.pow(2,8*g-1);Q(this,c,u,g,Be-1,-Be)}let E=g-1,T=1,se=0;for(this[u+E]=c&255;--E>=0&&(T*=256);)c<0&&se===0&&this[u+E+1]!==0&&(se=1),this[u+E]=(c/T>>0)-se&255;return u+g},a.prototype.writeInt8=function(c,u,g){return c=+c,u=u>>>0,g||Q(this,c,u,1,127,-128),c<0&&(c=255+c+1),this[u]=c&255,u+1},a.prototype.writeInt16LE=function(c,u,g){return c=+c,u=u>>>0,g||Q(this,c,u,2,32767,-32768),this[u]=c&255,this[u+1]=c>>>8,u+2},a.prototype.writeInt16BE=function(c,u,g){return c=+c,u=u>>>0,g||Q(this,c,u,2,32767,-32768),this[u]=c>>>8,this[u+1]=c&255,u+2},a.prototype.writeInt32LE=function(c,u,g){return c=+c,u=u>>>0,g||Q(this,c,u,4,2147483647,-2147483648),this[u]=c&255,this[u+1]=c>>>8,this[u+2]=c>>>16,this[u+3]=c>>>24,u+4},a.prototype.writeInt32BE=function(c,u,g){return c=+c,u=u>>>0,g||Q(this,c,u,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[u]=c>>>24,this[u+1]=c>>>16,this[u+2]=c>>>8,this[u+3]=c&255,u+4},a.prototype.writeBigInt64LE=Ht(function(c,u=0){return xe(this,c,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Ht(function(c,u=0){return he(this,c,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ue(d,c,u,g,x,E){if(u+g>d.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("Index out of range")}function Te(d,c,u,g,x){return c=+c,u=u>>>0,x||ue(d,c,u,4),n.write(d,c,u,g,23,4),u+4}a.prototype.writeFloatLE=function(c,u,g){return Te(this,c,u,!0,g)},a.prototype.writeFloatBE=function(c,u,g){return Te(this,c,u,!1,g)};function Pe(d,c,u,g,x){return c=+c,u=u>>>0,x||ue(d,c,u,8),n.write(d,c,u,g,52,8),u+8}a.prototype.writeDoubleLE=function(c,u,g){return Pe(this,c,u,!0,g)},a.prototype.writeDoubleBE=function(c,u,g){return Pe(this,c,u,!1,g)},a.prototype.copy=function(c,u,g,x){if(!a.isBuffer(c))throw new TypeError("argument should be a Buffer");if(g||(g=0),!x&&x!==0&&(x=this.length),u>=c.length&&(u=c.length),u||(u=0),x>0&&x<g&&(x=g),x===g||c.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(g<0||g>=this.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("sourceEnd out of bounds");x>this.length&&(x=this.length),c.length-u<x-g&&(x=c.length-u+g);const E=x-g;return this===c&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,g,x):Uint8Array.prototype.set.call(c,this.subarray(g,x),u),E},a.prototype.fill=function(c,u,g,x){if(typeof c=="string"){if(typeof u=="string"?(x=u,u=0,g=this.length):typeof g=="string"&&(x=g,g=this.length),x!==void 0&&typeof x!="string")throw new TypeError("encoding must be a string");if(typeof x=="string"&&!a.isEncoding(x))throw new TypeError("Unknown encoding: "+x);if(c.length===1){const T=c.charCodeAt(0);(x==="utf8"&&T<128||x==="latin1")&&(c=T)}}else typeof c=="number"?c=c&255:typeof c=="boolean"&&(c=Number(c));if(u<0||this.length<u||this.length<g)throw new RangeError("Out of range index");if(g<=u)return this;u=u>>>0,g=g===void 0?this.length:g>>>0,c||(c=0);let E;if(typeof c=="number")for(E=u;E<g;++E)this[E]=c;else{const T=a.isBuffer(c)?c:a.from(c,x),se=T.length;if(se===0)throw new TypeError('The value "'+c+'" is invalid for argument "value"');for(E=0;E<g-u;++E)this[E+u]=T[E%se]}return this};const Ue={};function He(d,c,u){Ue[d]=class extends u{constructor(){super(),Object.defineProperty(this,"message",{value:c.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${d}]`,this.stack,delete this.name}get code(){return d}set code(x){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:x,writable:!0})}toString(){return`${this.name} [${d}]: ${this.message}`}}}He("ERR_BUFFER_OUT_OF_BOUNDS",function(d){return d?`${d} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),He("ERR_INVALID_ARG_TYPE",function(d,c){return`The "${d}" argument must be of type number. Received type ${typeof c}`},TypeError),He("ERR_OUT_OF_RANGE",function(d,c,u){let g=`The value of "${d}" is out of range.`,x=u;return Number.isInteger(u)&&Math.abs(u)>2**32?x=Ve(String(u)):typeof u=="bigint"&&(x=String(u),(u>BigInt(2)**BigInt(32)||u<-(BigInt(2)**BigInt(32)))&&(x=Ve(x)),x+="n"),g+=` It must be ${c}. Received ${x}`,g},RangeError);function Ve(d){let c="",u=d.length;const g=d[0]==="-"?1:0;for(;u>=g+4;u-=3)c=`_${d.slice(u-3,u)}${c}`;return`${d.slice(0,u)}${c}`}function mt(d,c,u){Se(c,"offset"),(d[c]===void 0||d[c+u]===void 0)&&Ze(c,d.length-(u+1))}function qe(d,c,u,g,x,E){if(d>u||d<c){const T=typeof c=="bigint"?"n":"";let se;throw E>3?c===0||c===BigInt(0)?se=`>= 0${T} and < 2${T} ** ${(E+1)*8}${T}`:se=`>= -(2${T} ** ${(E+1)*8-1}${T}) and < 2 ** ${(E+1)*8-1}${T}`:se=`>= ${c}${T} and <= ${u}${T}`,new Ue.ERR_OUT_OF_RANGE("value",se,d)}mt(g,x,E)}function Se(d,c){if(typeof d!="number")throw new Ue.ERR_INVALID_ARG_TYPE(c,"number",d)}function Ze(d,c,u){throw Math.floor(d)!==d?(Se(d,u),new Ue.ERR_OUT_OF_RANGE(u||"offset","an integer",d)):c<0?new Ue.ERR_BUFFER_OUT_OF_BOUNDS:new Ue.ERR_OUT_OF_RANGE(u||"offset",`>= ${u?1:0} and <= ${c}`,d)}const wr=/[^+/0-9A-Za-z-_]/g;function xr(d){if(d=d.split("=")[0],d=d.trim().replace(wr,""),d.length<2)return"";for(;d.length%4!==0;)d=d+"=";return d}function _s(d,c){c=c||1/0;let u;const g=d.length;let x=null;const E=[];for(let T=0;T<g;++T){if(u=d.charCodeAt(T),u>55295&&u<57344){if(!x){if(u>56319){(c-=3)>-1&&E.push(239,191,189);continue}else if(T+1===g){(c-=3)>-1&&E.push(239,191,189);continue}x=u;continue}if(u<56320){(c-=3)>-1&&E.push(239,191,189),x=u;continue}u=(x-55296<<10|u-56320)+65536}else x&&(c-=3)>-1&&E.push(239,191,189);if(x=null,u<128){if((c-=1)<0)break;E.push(u)}else if(u<2048){if((c-=2)<0)break;E.push(u>>6|192,u&63|128)}else if(u<65536){if((c-=3)<0)break;E.push(u>>12|224,u>>6&63|128,u&63|128)}else if(u<1114112){if((c-=4)<0)break;E.push(u>>18|240,u>>12&63|128,u>>6&63|128,u&63|128)}else throw new Error("Invalid code point")}return E}function Ku(d){const c=[];for(let u=0;u<d.length;++u)c.push(d.charCodeAt(u)&255);return c}function Gu(d,c){let u,g,x;const E=[];for(let T=0;T<d.length&&!((c-=2)<0);++T)u=d.charCodeAt(T),g=u>>8,x=u%256,E.push(x),E.push(g);return E}function ro(d){return e.toByteArray(xr(d))}function br(d,c,u,g){let x;for(x=0;x<g&&!(x+u>=c.length||x>=d.length);++x)c[x+u]=d[x];return x}function wt(d,c){return d instanceof c||d!=null&&d.constructor!=null&&d.constructor.name!=null&&d.constructor.name===c.name}function Is(d){return d!==d}const Wu=function(){const d="0123456789abcdef",c=new Array(256);for(let u=0;u<16;++u){const g=u*16;for(let x=0;x<16;++x)c[g+x]=d[u]+d[x]}return c}();function Ht(d){return typeof BigInt>"u"?Yu:d}function Yu(){throw new Error("BigInt not supported")}})(Uu);const k1=t=>t.reduce((e,n)=>e+n.toString(16).padStart(2,"0"),""),$1=t=>new Promise(function(e){let n=new FileReader;n.onloadend=function(){e(n.result.toString())},n.readAsDataURL(t)}),U1=t=>"0x"+[...new Uint8Array(t)].map(r=>r.toString(16).padStart(2,"0")).join(""),O1=async t=>new Promise(function(e){const n=new FileReader,r=function(){const s=n.result;e(s)};n.addEventListener("load",r),n.readAsArrayBuffer(t)});async function P1(t){return window.crypto.subtle.digest("SHA-256",t)}const C1=t=>{for(var e=new Uu.Buffer(t.byteLength),n=new Uint8Array(t),r=0;r<e.length;++r)e[r]=n[r];return e},H1=async t=>{const e=await O1(t),n=await P1(C1(e));return U1(n)},N1=t=>{const e=atob(t);let n="";for(let r=0;r<e.length;r++){const s=e.charCodeAt(r).toString(16);n+=s.length===2?s:"0"+s}return n.toLowerCase()},L1=k1(gi.utils.randomPrivateKey());let ii=!1;const R1=async()=>{for(;ii;)await lr(10)},Ko=t=>{var e=new TextEncoder().encode(t);return[...new Uint8Array(e)].map(n=>n.toString(16).padStart(2,"0")).join("")},Hr=t=>[...new Uint8Array(t)].map(e=>e.toString(16).padStart(2,"0")).join(""),D1=async(t="mainnet")=>{try{const n=await(await fetch(`https://mempool.space/${t==="testnet"?"testnet/":""}api/v1/fees/recommended`)).json();return n.halfHourFee<6?6:n.halfHourFee}catch{throw new Error("Mempool connection failed for address")}},Go=t=>{var n;const e=(n=t.match(/.{1,2}/g))==null?void 0:n.map(r=>parseInt(r,16));return e?Uint8Array.from(e):new Uint8Array},F1=t=>{t>=1e8&&(t=t*10);let e=String(t).padStart(8,"0").slice(0,-9)+"."+String(t).padStart(8,"0").slice(-9);return e.substring(0,1)=="."&&(e="0"+e),e},lr=t=>new Promise(e=>setTimeout(e,t)),j1=async(t,e,n="mainnet")=>{try{const s=await(await fetch(`https://mempool.space/${n==="testnet"?"testnet/":""}api/address/${t}`)).json();return!!(s.chain_stats.tx_count>0||e&&s.mempool_stats.tx_count>0)}catch(r){return console.error(r),!1}},Pu=async(t,e,n="mainnet")=>{let r=!1;async function s(a){return new Promise(function(f){a?f(a):setTimeout(async function(){try{r=await j1(t,e,n)}catch{}let h=await s(r);f(h)},2e3)})}async function i(){return await s(r)}return await i()},Cu=async(t,e="mainnet")=>{let n="",r=0,s=0;try{(await(await fetch(`https://mempool.space/${e==="testnet"?"testnet/":""}api/address/${t}/txs`)).json()).forEach(a=>{a.vout.forEach((f,h)=>{f.scriptpubkey_address==t&&(n=a.txid,r=h,s=f.value)})})}catch(i){console.error(i)}return[n,r,s]},Hu=async(t,e="mainnet")=>{let n;try{const r=await fetch(`https://mempool.space/${e==="testnet"?"testnet/":""}api/tx`,{method:"POST",body:t});if(n=await r.text(),r.status!==200)throw new Error(n)}catch(r){throw new Error(r.message)}return n};let Wo=!0;const Nu=async(t,e,n,r,s=0,i="mainnet")=>{await Pu(r.inscriptionAddress,Wo,i),await lr(2e3);let o=await Cu(r.inscriptionAddress,i),a=o[0],f=o[2];const h=it.create({vin:[{txid:a,vout:s,prevout:{value:f,scriptPubKey:["OP_1",r.tapkey]}}],vout:[{value:f-r.fee,scriptPubKey:["OP_1",n]}]}),l=await Mr.taproot.sign(e.raw,h,0,{extension:r.leaf});h.vin[0].witness=[l.hex,r.script_orig,r.cblock],console.dir(h,{depth:null});let p=it.encode(h).hex,y;for(await R1(),ii=!0;!y;)y=await Hu(p,i),await lr(2e3);if(ii=!1,y.includes("descendant")){Wo=!1,Nu(t,e,n,r,s,i),t("Descendant transaction detected. Waiting for parent to confirm.");return}try{JSON.parse(y)}catch{t(`${y}i0`,!0)}y=void 0},Lu=async t=>{let e,n=[];try{e=$r.p2tr.decode(t.address).hex}catch{throw new Error("Invalid taproot address")}const r=t.network||"mainnet";try{await(await fetch(`https://mempool.space/${r==="testnet"?"testnet/":""}api/address/${t.address}`)).json()}catch{throw new Error("Mempool connection failed for address")}const s=localStorage.getItem("pending");if(t.text&&t.mimetype)n.push({text:t.text,name:Ko(t.text),hex:Ko(t.text),mimetype:t.mimetype,sha256:""});else if(t.files)n=t.files;else throw new Error("No files to inscribe");let i=t.padding||546,o=t.privkey||L1;s===null&&localStorage.setItem("pending",JSON.stringify({files:n,address:t.address,mimetype:t.mimetype,text:t.text,padding:i,tip:t.tip,tippingAddress:t.tippingAddress,privkey:o,network:r}));let a=new ds(o),f=a.pub.rawX;const h=new TextEncoder,l=[f,"OP_CHECKSIG"];let p=await Cr.tree.getLeaf(je.encode(l)),[y,m]=await Cr.getPubKey(f,{target:p});const b=it.create({vin:[{txid:"a99d1112bcb35845fd44e703ef2c611f0360dd2bb28927625dbc13eab58cd968",vout:0,prevout:{value:1e4,scriptPubKey:["OP_1",y]}}],vout:[{value:8e3,scriptPubKey:["OP_1",y]}]}),w=await Mr.taproot.sign(a.raw,b,0,{extension:p});if(b.vin[0].witness=[w.hex,l,m],!await Mr.taproot.verify(b,0,{pubkey:f})){alert("Generated keys could not be validated. Please reload the app.");return}let B=0,_=[],S=await D1(r),C=160;for(let L of n){const z=L.hex,X=Go(z),me=h.encode(L.mimetype),G=[f,"OP_CHECKSIG","OP_0","OP_IF",h.encode("ord"),"01",me,"OP_0",X,"OP_ENDIF"],Q=["0x"+Hr(f.buffer),"OP_CHECKSIG","OP_0","OP_IF","0x"+Hr(h.encode("ord")),"01","0x"+Hr(me),"OP_0","0x"+Hr(X),"OP_ENDIF"],xe=await Cr.tree.getLeaf(je.encode(G)),[he,ue]=await Cr.getPubKey(f,{target:xe});let Te=$r.p2tr.encode(he,t.network==="testnet"?"testnet":"main"),Ue=160+Math.floor(X.length/4),He=S*Ue;B+=He,_.push({leaf:xe,tapkey:he,cblock:ue,inscriptionAddress:Te,txsize:Ue,fee:He,script:Q,script_orig:G})}let I=B+(69+(_.length+1)*2*31+10)*S+C*_.length+i*_.length,U=$r.p2tr.encode(y,r==="testnet"?"testnet":"main");const O=t.tip||1e3;!isNaN(O)&&O>=500&&(I+=50*S+O),console.log(I,Math.ceil(I/1e3)*1e3),t.log(`Please send ${F1(Math.ceil(I/1e3)*1e3)} btc to ${U} to fund the inscription`),await Pu(U,!0,r),await lr(2e3);let $=await Cu(U,r),N=$[0],j=$[1],q=$[2];t.log(`Do not close browser, '${N}' is confirmed, waiting for inscription to be confirmed...`);let Y=[];for(let L of _)Y.push({value:i+L.fee,scriptPubKey:["OP_1",L.tapkey]});!isNaN(O)&&O>=500&&Y.push({value:O,scriptPubKey:["OP_1",$r.p2tr.decode(t.tippingAddress).hex]});const ie=it.create({vin:[{txid:N,vout:j,prevout:{value:q,scriptPubKey:["OP_1",y]}}],vout:Y}),ce=await Mr.taproot.sign(a.raw,ie,0,{extension:p});ie.vin[0].witness=[ce.hex,l,m];let k=it.encode(ie).hex;console.log("rawtx",Go(k));let H=!0;for(;H;)try{await Hu(k,r),H=!1}catch(L){console.error(L),await lr(2e3)}for(let L=0;L<_.length;L++)await Nu(t.log,a,e,_[L],L,r);localStorage.removeItem("pending"),localStorage.removeItem("files")},Z1=t=>{const e=localStorage.getItem("pending");if(e){const n=JSON.parse(e);n&&Lu({log:t,...n})}};var De=Uint8Array,rt=Uint16Array,eo=Int32Array,Ss=new De([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Bs=new De([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),oi=new De([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ru=function(t,e){for(var n=new rt(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var s=new eo(n[30]),r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)s[i]=i-n[r]<<5|r;return{b:n,r:s}},Du=Ru(Ss,2),Fu=Du.b,ai=Du.r;Fu[28]=258,ai[258]=28;var ju=Ru(Bs,0),M1=ju.b,Yo=ju.r,ci=new rt(32768);for(var we=0;we<32768;++we){var qt=(we&43690)>>1|(we&21845)<<1;qt=(qt&52428)>>2|(qt&13107)<<2,qt=(qt&61680)>>4|(qt&3855)<<4,ci[we]=((qt&65280)>>8|(qt&255)<<8)>>1}var At=function(t,e,n){for(var r=t.length,s=0,i=new rt(e);s<r;++s)t[s]&&++i[t[s]-1];var o=new rt(e);for(s=1;s<e;++s)o[s]=o[s-1]+i[s-1]<<1;var a;if(n){a=new rt(1<<e);var f=15-e;for(s=0;s<r;++s)if(t[s])for(var h=s<<4|t[s],l=e-t[s],p=o[t[s]-1]++<<l,y=p|(1<<l)-1;p<=y;++p)a[ci[p]>>f]=h}else for(a=new rt(r),s=0;s<r;++s)t[s]&&(a[s]=ci[o[t[s]-1]++]>>15-t[s]);return a},cn=new De(288);for(var we=0;we<144;++we)cn[we]=8;for(var we=144;we<256;++we)cn[we]=9;for(var we=256;we<280;++we)cn[we]=7;for(var we=280;we<288;++we)cn[we]=8;var dr=new De(32);for(var we=0;we<32;++we)dr[we]=5;var z1=At(cn,9,0),V1=At(cn,9,1),q1=At(dr,5,0),K1=At(dr,5,1),Ds=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},ut=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},Fs=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},to=function(t){return(t+7)/8|0},Zu=function(t,e,n){(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length);var r=new De(n-e);return r.set(t.subarray(e,n)),r},G1=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],et=function(t,e,n){var r=new Error(e||G1[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,et),!n)throw r;return r},no=function(t,e,n,r){var s=t.length,i=r?r.length:0;if(!s||e.f&&!e.l)return n||new De(0);var o=!n||e.i!=2,a=e.i;n||(n=new De(s*3));var f=function(Ve){var mt=n.length;if(Ve>mt){var qe=new De(Math.max(mt*2,Ve));qe.set(n),n=qe}},h=e.f||0,l=e.p||0,p=e.b||0,y=e.l,m=e.d,b=e.m,w=e.n,v=s*8;do{if(!y){h=ut(t,l,1);var B=ut(t,l+1,3);if(l+=3,B)if(B==1)y=V1,m=K1,b=9,w=5;else if(B==2){var I=ut(t,l,31)+257,U=ut(t,l+10,15)+4,O=I+ut(t,l+5,31)+1;l+=14;for(var $=new De(O),N=new De(19),j=0;j<U;++j)N[oi[j]]=ut(t,l+j*3,7);l+=U*3;for(var q=Ds(N),Y=(1<<q)-1,ie=At(N,q,1),j=0;j<O;){var ce=ie[ut(t,l,Y)];l+=ce&15;var _=ce>>4;if(_<16)$[j++]=_;else{var k=0,H=0;for(_==16?(H=3+ut(t,l,3),l+=2,k=$[j-1]):_==17?(H=3+ut(t,l,7),l+=3):_==18&&(H=11+ut(t,l,127),l+=7);H--;)$[j++]=k}}var L=$.subarray(0,I),z=$.subarray(I);b=Ds(L),w=Ds(z),y=At(L,b,1),m=At(z,w,1)}else et(1);else{var _=to(l)+4,S=t[_-4]|t[_-3]<<8,C=_+S;if(C>s){a&&et(0);break}o&&f(p+S),n.set(t.subarray(_,C),p),e.b=p+=S,e.p=l=C*8,e.f=h;continue}if(l>v){a&&et(0);break}}o&&f(p+131072);for(var X=(1<<b)-1,me=(1<<w)-1,G=l;;G=l){var k=y[Fs(t,l)&X],Q=k>>4;if(l+=k&15,l>v){a&&et(0);break}if(k||et(2),Q<256)n[p++]=Q;else if(Q==256){G=l,y=null;break}else{var xe=Q-254;if(Q>264){var j=Q-257,he=Ss[j];xe=ut(t,l,(1<<he)-1)+Fu[j],l+=he}var ue=m[Fs(t,l)&me],Te=ue>>4;ue||et(3),l+=ue&15;var z=M1[Te];if(Te>3){var he=Bs[Te];z+=Fs(t,l)&(1<<he)-1,l+=he}if(l>v){a&&et(0);break}o&&f(p+131072);var Pe=p+xe;if(p<z){var Ue=i-z,He=Math.min(z,Pe);for(Ue+p<0&&et(3);p<He;++p)n[p]=r[Ue+p]}for(;p<Pe;p+=4)n[p]=n[p-z],n[p+1]=n[p+1-z],n[p+2]=n[p+2-z],n[p+3]=n[p+3-z];p=Pe}}e.l=y,e.p=G,e.b=p,e.f=h,y&&(h=1,e.m=b,e.d=m,e.n=w)}while(!h);return p==n.length?n:Zu(n,0,p)},kt=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},qn=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},js=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var s=n.length,i=n.slice();if(!s)return{t:zu,l:0};if(s==1){var o=new De(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(I,U){return I.f-U.f}),n.push({s:-1,f:25001});var a=n[0],f=n[1],h=0,l=1,p=2;for(n[0]={s:-1,f:a.f+f.f,l:a,r:f};l!=s-1;)a=n[n[h].f<n[p].f?h++:p++],f=n[h!=l&&n[h].f<n[p].f?h++:p++],n[l++]={s:-1,f:a.f+f.f,l:a,r:f};for(var y=i[0].s,r=1;r<s;++r)i[r].s>y&&(y=i[r].s);var m=new rt(y+1),b=ui(n[l-1],m,0);if(b>e){var r=0,w=0,v=b-e,B=1<<v;for(i.sort(function(U,O){return m[O.s]-m[U.s]||U.f-O.f});r<s;++r){var _=i[r].s;if(m[_]>e)w+=B-(1<<b-m[_]),m[_]=e;else break}for(w>>=v;w>0;){var S=i[r].s;m[S]<e?w-=1<<e-m[S]++-1:++r}for(;r>=0&&w;--r){var C=i[r].s;m[C]==e&&(--m[C],++w)}b=e}return{t:new De(m),l:b}},ui=function(t,e,n){return t.s==-1?Math.max(ui(t.l,e,n+1),ui(t.r,e,n+1)):e[t.s]=n},Xo=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new rt(++e),r=0,s=t[0],i=1,o=function(f){n[r++]=f},a=1;a<=e;++a)if(t[a]==s&&a!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=t[a]}return{c:n.subarray(0,r),n:e}},Kn=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},Mu=function(t,e,n){var r=n.length,s=to(e+2);t[s]=r&255,t[s+1]=r>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var i=0;i<r;++i)t[s+i+4]=n[i];return(s+4+r)*8},Jo=function(t,e,n,r,s,i,o,a,f,h,l){kt(e,l++,n),++s[256];for(var p=js(s,15),y=p.t,m=p.l,b=js(i,15),w=b.t,v=b.l,B=Xo(y),_=B.c,S=B.n,C=Xo(w),I=C.c,U=C.n,O=new rt(19),$=0;$<_.length;++$)++O[_[$]&31];for(var $=0;$<I.length;++$)++O[I[$]&31];for(var N=js(O,7),j=N.t,q=N.l,Y=19;Y>4&&!j[oi[Y-1]];--Y);var ie=h+5<<3,ce=Kn(s,cn)+Kn(i,dr)+o,k=Kn(s,y)+Kn(i,w)+o+14+3*Y+Kn(O,j)+2*O[16]+3*O[17]+7*O[18];if(f>=0&&ie<=ce&&ie<=k)return Mu(e,l,t.subarray(f,f+h));var H,L,z,X;if(kt(e,l,1+(k<ce)),l+=2,k<ce){H=At(y,m,0),L=y,z=At(w,v,0),X=w;var me=At(j,q,0);kt(e,l,S-257),kt(e,l+5,U-1),kt(e,l+10,Y-4),l+=14;for(var $=0;$<Y;++$)kt(e,l+3*$,j[oi[$]]);l+=3*Y;for(var G=[_,I],Q=0;Q<2;++Q)for(var xe=G[Q],$=0;$<xe.length;++$){var he=xe[$]&31;kt(e,l,me[he]),l+=j[he],he>15&&(kt(e,l,xe[$]>>5&127),l+=xe[$]>>12)}}else H=z1,L=cn,z=q1,X=dr;for(var $=0;$<a;++$){var ue=r[$];if(ue>255){var he=ue>>18&31;qn(e,l,H[he+257]),l+=L[he+257],he>7&&(kt(e,l,ue>>23&31),l+=Ss[he]);var Te=ue&31;qn(e,l,z[Te]),l+=X[Te],Te>3&&(qn(e,l,ue>>5&8191),l+=Bs[Te])}else qn(e,l,H[ue]),l+=L[ue]}return qn(e,l,H[256]),l+L[256]},W1=new eo([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),zu=new De(0),Y1=function(t,e,n,r,s,i){var o=i.z||t.length,a=new De(r+o+5*(1+Math.ceil(o/7e3))+s),f=a.subarray(r,a.length-s),h=i.l,l=(i.r||0)&7;if(e){l&&(f[0]=i.r>>3);for(var p=W1[e-1],y=p>>13,m=p&8191,b=(1<<n)-1,w=i.p||new rt(32768),v=i.h||new rt(b+1),B=Math.ceil(n/3),_=2*B,S=function(Ze){return(t[Ze]^t[Ze+1]<<B^t[Ze+2]<<_)&b},C=new eo(25e3),I=new rt(288),U=new rt(32),O=0,$=0,N=i.i||0,j=0,q=i.w||0,Y=0;N+2<o;++N){var ie=S(N),ce=N&32767,k=v[ie];if(w[ce]=k,v[ie]=ce,q<=N){var H=o-N;if((O>7e3||j>24576)&&(H>423||!h)){l=Jo(t,f,0,C,I,U,$,j,Y,N-Y,l),j=O=$=0,Y=N;for(var L=0;L<286;++L)I[L]=0;for(var L=0;L<30;++L)U[L]=0}var z=2,X=0,me=m,G=ce-k&32767;if(H>2&&ie==S(N-G))for(var Q=Math.min(y,H)-1,xe=Math.min(32767,N),he=Math.min(258,H);G<=xe&&--me&&ce!=k;){if(t[N+z]==t[N+z-G]){for(var ue=0;ue<he&&t[N+ue]==t[N+ue-G];++ue);if(ue>z){if(z=ue,X=G,ue>Q)break;for(var Te=Math.min(G,ue-2),Pe=0,L=0;L<Te;++L){var Ue=N-G+L&32767,He=w[Ue],Ve=Ue-He&32767;Ve>Pe&&(Pe=Ve,k=Ue)}}}ce=k,k=w[ce],G+=ce-k&32767}if(X){C[j++]=268435456|ai[z]<<18|Yo[X];var mt=ai[z]&31,qe=Yo[X]&31;$+=Ss[mt]+Bs[qe],++I[257+mt],++U[qe],q=N+z,++O}else C[j++]=t[N],++I[t[N]]}}for(N=Math.max(N,q);N<o;++N)C[j++]=t[N],++I[t[N]];l=Jo(t,f,h,C,I,U,$,j,Y,N-Y,l),h||(i.r=l&7|f[l/8|0]<<3,l-=7,i.h=v,i.p=w,i.i=N,i.w=q)}else{for(var N=i.w||0;N<o+h;N+=65535){var Se=N+65535;Se>=o&&(f[l/8|0]=h,Se=o),l=Mu(f,l+1,t.subarray(N,Se))}i.i=o}return Zu(a,0,r+to(l)+s)},X1=function(){for(var t=new Int32Array(256),e=0;e<256;++e){for(var n=e,r=9;--r;)n=(n&1&&-306674912)^n>>>1;t[e]=n}return t}(),J1=function(){var t=-1;return{p:function(e){for(var n=t,r=0;r<e.length;++r)n=X1[n&255^e[r]]^n>>>8;t=n},d:function(){return~t}}},Q1=function(t,e,n,r,s){if(!s&&(s={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),o=new De(i.length+t.length);o.set(i),o.set(t,i.length),t=o,s.w=i.length}return Y1(t,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):12+e.mem,n,r,s)},fi=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},ey=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&fi(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var r=0;r<=n.length;++r)t[r+10]=n.charCodeAt(r)}},ty=function(t){(t[0]!=31||t[1]!=139||t[2]!=8)&&et(6,"invalid gzip data");var e=t[3],n=10;e&4&&(n+=(t[10]|t[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!t[n++]);return n+(e&2)},ny=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},ry=function(t){return 10+(t.filename?t.filename.length+1:0)},sy=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&et(6,"invalid zlib data"),(t[1]>>5&1)==+!e&&et(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function iy(t,e){return no(t,{i:2},e&&e.out,e&&e.dictionary)}function oy(t,e){e||(e={});var n=J1(),r=t.length;n.p(t);var s=Q1(t,e,ry(e),8),i=s.length;return ey(s,e),fi(s,i-8,n.d()),fi(s,i-4,r),s}function ay(t,e){var n=ty(t);return n+8>t.length&&et(6,"invalid gzip data"),no(t.subarray(n,-8),{i:2},e&&e.out||new De(ny(t)),e&&e.dictionary)}function cy(t,e){return no(t.subarray(sy(t,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}function uy(t,e){return t[0]==31&&t[1]==139&&t[2]==8?ay(t,e):(t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31?iy(t,e):cy(t,e)}var fy=typeof TextDecoder<"u"&&new TextDecoder,hy=0;try{fy.decode(zu,{stream:!0}),hy=1}catch{}const Tn=document.getElementById("files"),Zs=document.getElementById("previewer"),Qo=document.getElementById("previewer-count");let Qe=localStorage.getItem("files")!==null?JSON.parse(localStorage.getItem("files")):[];const ly=t=>{const e=["Bytes","KB","MB","GB","TB"];if(t===0)return"0 Byte";const n=Math.floor(Math.log(t)/Math.log(1024));return t/Math.pow(1024,n)+" "+e[n]},ea=document.getElementById("compress"),dy=document.getElementById("mainnet"),Vu=t=>{Zs.innerHTML="",Qo.innerText=`${Qe.length} files to inscribe`;for(let n of t){const r=document.createElement("div");r.innerHTML=`<a id="${n.name}" href="#" class="remove">[x]</a> - ${n.name} - ${n.size&&ly(n.size)} bytes - ${n.mimetype}<hr />`,Zs.appendChild(r)}const e=document.querySelectorAll(".remove");for(let n of e)n.addEventListener("click",r=>{r.preventDefault();const s=n.id;Qe.find(o=>o.name===s)&&(Qe=Qe.filter(o=>o.name!==s),Zs.removeChild(n.parentElement),Qo.innerText=`${Qe.length} files to inscribe`,localStorage.setItem("files",JSON.stringify(Qe)))})};Qe.length>0&&Vu(Qe);Tn.addEventListener("change",async()=>{if(!Tn.files||Tn.files.length===0)return;let t;ea.checked?t=await Promise.all(Array.from(Tn.files).map(async n=>{const r=await n.arrayBuffer(),s=await oy(new Uint8Array(r));return new File([s],`${n.name}.gz`,{type:"application/x-gzip"})})):t=Array.from(Tn.files),Tn.value="";const e=[...Qe];for(let n of t){if(n.size>=35e4){alert("One of your desired inscriptions exceeds the maximum of 350kb.");break}let r=n.type;r.includes("text/plain")&&(r+=";charset=utf-8");const s=await $1(n);let i=s.substring(s.indexOf("base64,")+7),o=N1(i),a=await H1(n);e.push({name:n.name,hex:o,mimetype:r,sha256:a.replace("0x",""),size:n.size,compressed:ea.checked})}Qe=e,localStorage.setItem("files",JSON.stringify(e)),Vu(e)});const qu=(t,e)=>{const n=document.getElementById("log");if(e){n.innerHTML="";const r=document.getElementById("result");Qe[0].compressed?r.innerHTML+=`Tx ID: ${t.replace("i0","")}; after tx confirmation you can view it on our <a target="_blank" href="https://ordinals.com/content/7b9cdb349d8a75152834437f6453b235d1884c188f4428d69db4b26fd3048ccbi0?q=${t}">experimental viewer</a><br><br>`:r.innerHTML+=`Tx ID: ${t.replace("i0","")}; after tx confirmation you can view it on <a target="_blank" href="https://ordinals.com/content/${t}">ordinals content</a><br><br>`,Qe.shift(),localStorage.setItem("files",JSON.stringify(Qe))}else n.innerHTML=t+"<br>"};document.getElementById("run").addEventListener("click",()=>{const t=document.getElementById("taproot_address");Lu({log:qu,address:t.value.trim(),tippingAddress:"bc1psupdj48keuw4s2zwmf456h8l2zvh66kcj858rdunvf0490ldj2uqskmta4",files:Qe,tip:1e3,network:dy.checked?"mainnet":"testnet"})});document.getElementById("x").addEventListener("click",t=>{t.preventDefault(),localStorage.removeItem("pending");const e=document.getElementById("log");e.innerHTML="Old transaction is removed"});const py=new URLSearchParams(window.location.search),ta=py.get("q"),gy=async()=>{if(ta!==null){const t=await fetch(ta),e=t.headers.get("content-type");if(e===null)return;if(e.includes("zip")){const r=await t.arrayBuffer();let s;try{s=uy(new Uint8Array(r))}catch{s=new Uint8Array(r)}if(e===null)throw new Error("No content-type header");document.open(),document.write(new TextDecoder().decode(s)),document.close();return}}Z1(qu)};gy().catch(t=>console.error(t))});export default yy();
