var Wu=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var py=Wu((Ny,gi)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const{crypto:vr}=globalThis,oe=BigInt(0),ve=BigInt(1),Jt=BigInt(2),Wn=BigInt(3),so=BigInt(8),de=Object.freeze({a:oe,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:ve,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),io=(t,e)=>(t+e/Jt)/e,Er={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(t){const{n:e}=de,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-ve*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=io(i*t,e),f=io(-r*t,e);let h=L(t-a*n-f*s,e),l=L(-a*r-f*i,e);const p=h>o,y=l>o;if(p&&(h=e-h),y&&(l=e-l),h>o||l>o)throw new Error("splitScalarEndo: Endomorphism failed, k="+t);return{k1neg:p,k1:h,k2neg:y,k2:l}}},ft=32,gn=32,na=32,Vr=ft+1,qr=2*ft+1;function oo(t){const{a:e,b:n}=de,r=L(t*t),s=L(r*t);return L(s+e*t+n)}const Ar=de.a===oe;class hi extends Error{constructor(e){super(e)}}function ao(t){if(!(t instanceof ge))throw new TypeError("JacobianPoint expected")}class ge{constructor(e,n,r){this.x=e,this.y=n,this.z=r}static get BASE(){return new ge(de.Gx,de.Gy,ve)}static get ZERO(){return new ge(oe,ve,oe)}static fromAffine(e){if(!(e instanceof ae))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(ae.ZERO)?ge.ZERO:new ge(e.x,e.y,ve)}static toAffineBatch(e){const n=ef(e.map(r=>r.z));return e.map((r,s)=>r.toAffine(n[s]))}static normalizeZ(e){return ge.toAffineBatch(e).map(ge.fromAffine)}equals(e){ao(e);const{x:n,y:r,z:s}=this,{x:i,y:o,z:a}=e,f=L(s*s),h=L(a*a),l=L(n*h),p=L(i*f),y=L(L(r*a)*h),w=L(L(o*s)*f);return l===p&&y===w}negate(){return new ge(this.x,L(-this.y),this.z)}double(){const{x:e,y:n,z:r}=this,s=L(e*e),i=L(n*n),o=L(i*i),a=e+i,f=L(Jt*(L(a*a)-s-o)),h=L(Wn*s),l=L(h*h),p=L(l-Jt*f),y=L(h*(f-p)-so*o),w=L(Jt*n*r);return new ge(p,y,w)}add(e){ao(e);const{x:n,y:r,z:s}=this,{x:i,y:o,z:a}=e;if(i===oe||o===oe)return this;if(n===oe||r===oe)return e;const f=L(s*s),h=L(a*a),l=L(n*h),p=L(i*f),y=L(L(r*a)*h),w=L(L(o*s)*f),b=L(p-l),x=L(w-y);if(b===oe)return x===oe?this.double():ge.ZERO;const v=L(b*b),S=L(b*v),_=L(l*v),B=L(x*x-S-Jt*_),P=L(x*(_-B)-y*S),T=L(s*a*b);return new ge(B,P,T)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){const n=ge.ZERO;if(typeof e=="bigint"&&e===oe)return n;let r=fo(e);if(r===ve)return this;if(!Ar){let p=n,y=this;for(;r>oe;)r&ve&&(p=p.add(y)),y=y.double(),r>>=ve;return p}let{k1neg:s,k1:i,k2neg:o,k2:a}=Er.splitScalar(r),f=n,h=n,l=this;for(;i>oe||a>oe;)i&ve&&(f=f.add(l)),a&ve&&(h=h.add(l)),l=l.double(),i>>=ve,a>>=ve;return s&&(f=f.negate()),o&&(h=h.negate()),h=new ge(L(h.x*Er.beta),h.y,h.z),f.add(h)}precomputeWindow(e){const n=Ar?128/e+1:256/e+1,r=[];let s=this,i=s;for(let o=0;o<n;o++){i=s,r.push(i);for(let a=1;a<2**(e-1);a++)i=i.add(s),r.push(i);s=i.double()}return r}wNAF(e,n){!n&&this.equals(ge.BASE)&&(n=ae.BASE);const r=n&&n._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let s=n&&Zs.get(n);s||(s=this.precomputeWindow(r),n&&r!==1&&(s=ge.normalizeZ(s),Zs.set(n,s)));let i=ge.ZERO,o=ge.BASE;const a=1+(Ar?128/r:256/r),f=2**(r-1),h=BigInt(2**r-1),l=2**r,p=BigInt(r);for(let y=0;y<a;y++){const w=y*f;let b=Number(e&h);e>>=p,b>f&&(b-=l,e+=ve);const x=w,v=w+Math.abs(b)-1,S=y%2!==0,_=b<0;b===0?o=o.add(Sr(S,s[x])):i=i.add(Sr(_,s[v]))}return{p:i,f:o}}multiply(e,n){let r=fo(e),s,i;if(Ar){const{k1neg:o,k1:a,k2neg:f,k2:h}=Er.splitScalar(r);let{p:l,f:p}=this.wNAF(a,n),{p:y,f:w}=this.wNAF(h,n);l=Sr(o,l),y=Sr(f,y),y=new ge(L(y.x*Er.beta),y.y,y.z),s=l.add(y),i=p.add(w)}else{const{p:o,f:a}=this.wNAF(r,n);s=o,i=a}return ge.normalizeZ([s,i])[0]}toAffine(e){const{x:n,y:r,z:s}=this,i=this.equals(ge.ZERO);e==null&&(e=i?so:Zn(s));const o=e,a=L(o*o),f=L(a*o),h=L(n*a),l=L(r*f),p=L(s*o);if(i)return ae.ZERO;if(p!==ve)throw new Error("invZ was invalid");return new ae(h,l)}}function Sr(t,e){const n=e.negate();return t?n:e}const Zs=new WeakMap;let ae=class{constructor(e,n){this.x=e,this.y=n}_setWindowSize(e){this._WINDOW_SIZE=e,Zs.delete(this)}static get BASE(){return new ae(de.Gx,de.Gy)}static get ZERO(){return new ae(oe,oe)}hasEvenY(){return this.y%Jt===oe}static fromCompressedHex(e){const n=e.length===32,r=rt(n?e:e.subarray(1));if(!Nr(r))throw new Error("Point is not on curve");const s=oo(r);let i=Qu(s);const o=(i&ve)===ve;n?o&&(i=L(-i)):(e[0]&1)===1!==o&&(i=L(-i));const a=new ae(r,i);return a.assertValidity(),a}static fromUncompressedHex(e){const n=rt(e.subarray(1,ft+1)),r=rt(e.subarray(ft+1,ft*2+1)),s=new ae(n,r);return s.assertValidity(),s}static fromHex(e){const n=At(e),r=n.length,s=n[0];if(r===ft)return this.fromCompressedHex(n);if(r===Vr&&(s===2||s===3))return this.fromCompressedHex(n);if(r===qr&&s===4)return this.fromUncompressedHex(n);throw new Error(`Point.fromHex: received invalid point. Expected 32-${Vr} compressed bytes or ${qr} uncompressed bytes, not ${r}`)}static fromPrivateKey(e){return ae.BASE.multiply(yn(e))}static fromSignature(e,n,r){const{r:s,s:i}=ia(n);if(![0,1,2,3].includes(r))throw new Error("Cannot recover: invalid recovery bit");const o=li(At(e)),{n:a}=de,f=r===2||r===3?s+a:s,h=Zn(f,a),l=L(-o*h,a),p=L(i*h,a),y=r&1?"03":"02",w=ae.fromHex(y+Qt(f)),b=ae.BASE.multiplyAndAddUnsafe(w,l,p);if(!b)throw new Error("Cannot recover signature: point at infinify");return b.assertValidity(),b}toRawBytes(e=!1){return en(this.toHex(e))}toHex(e=!1){const n=Qt(this.x);return e?`${this.hasEvenY()?"02":"03"}${n}`:`04${n}${Qt(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const e="Point is not on elliptic curve",{x:n,y:r}=this;if(!Nr(n)||!Nr(r))throw new Error(e);const s=L(r*r),i=oo(n);if(L(s-i)!==oe)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new ae(this.x,L(-this.y))}double(){return ge.fromAffine(this).double().toAffine()}add(e){return ge.fromAffine(this).add(ge.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return ge.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,n,r){const s=ge.fromAffine(this),i=n===oe||n===ve||this!==ae.BASE?s.multiplyUnsafe(n):s.multiply(n),o=ge.fromAffine(e).multiplyUnsafe(r),a=i.add(o);return a.equals(ge.ZERO)?void 0:a.toAffine()}};function co(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}function uo(t){if(t.length<2||t[0]!==2)throw new Error(`Invalid signature integer tag: ${Pn(t)}`);const e=t[1],n=t.subarray(2,e+2);if(!e||n.length!==e)throw new Error("Invalid signature integer: wrong length");if(n[0]===0&&n[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:rt(n),left:t.subarray(e+2)}}function Yu(t){if(t.length<2||t[0]!=48)throw new Error(`Invalid signature tag: ${Pn(t)}`);if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");const{data:e,left:n}=uo(t.subarray(2)),{data:r,left:s}=uo(n);if(s.length)throw new Error(`Invalid signature: left bytes after parsing: ${Pn(s)}`);return{r:e,s:r}}class kt{constructor(e,n){this.r=e,this.s=n,this.assertValidity()}static fromCompact(e){const n=e instanceof Uint8Array,r="Signature.fromCompact";if(typeof e!="string"&&!n)throw new TypeError(`${r}: Expected string or Uint8Array`);const s=n?Pn(e):e;if(s.length!==128)throw new Error(`${r}: Expected 64-byte hex`);return new kt(Kr(s.slice(0,64)),Kr(s.slice(64,128)))}static fromDER(e){const n=e instanceof Uint8Array;if(typeof e!="string"&&!n)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r,s}=Yu(n?e:en(e));return new kt(r,s)}static fromHex(e){return this.fromDER(e)}assertValidity(){const{r:e,s:n}=this;if(!Hn(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Hn(n))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const e=de.n>>ve;return this.s>e}normalizeS(){return this.hasHighS()?new kt(this.r,L(-this.s,de.n)):this}toDERRawBytes(){return en(this.toDERHex())}toDERHex(){const e=co(Vn(this.s)),n=co(Vn(this.r)),r=e.length/2,s=n.length/2,i=Vn(r),o=Vn(s);return`30${Vn(s+r+4)}02${o}${n}02${i}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return en(this.toCompactHex())}toCompactHex(){return Qt(this.r)+Qt(this.s)}}function Yt(...t){if(!t.every(r=>r instanceof Uint8Array))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];const e=t.reduce((r,s)=>r+s.length,0),n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const Xu=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Pn(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");let e="";for(let n=0;n<t.length;n++)e+=Xu[t[n]];return e}const Ju=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function Qt(t){if(typeof t!="bigint")throw new Error("Expected bigint");if(!(oe<=t&&t<Ju))throw new Error("Expected number 0 <= n < 2^256");return t.toString(16).padStart(64,"0")}function Cn(t){const e=en(Qt(t));if(e.length!==32)throw new Error("Error: expected 32 bytes");return e}function Vn(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function Kr(t){if(typeof t!="string")throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function en(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+t.length);const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const r=n*2,s=t.slice(r,r+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");e[n]=i}return e}function rt(t){return Kr(Pn(t))}function At(t){return t instanceof Uint8Array?Uint8Array.from(t):en(t)}function fo(t){if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)return BigInt(t);if(typeof t=="bigint"&&Hn(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function L(t,e=de.P){const n=t%e;return n>=oe?n:e+n}function it(t,e){const{P:n}=de;let r=t;for(;e-- >oe;)r*=r,r%=n;return r}function Qu(t){const{P:e}=de,n=BigInt(6),r=BigInt(11),s=BigInt(22),i=BigInt(23),o=BigInt(44),a=BigInt(88),f=t*t*t%e,h=f*f*t%e,l=it(h,Wn)*h%e,p=it(l,Wn)*h%e,y=it(p,Jt)*f%e,w=it(y,r)*y%e,b=it(w,s)*w%e,x=it(b,o)*b%e,v=it(x,a)*x%e,S=it(v,o)*b%e,_=it(S,Wn)*h%e,B=it(_,i)*w%e,P=it(B,n)*f%e,T=it(P,Jt);if(T*T%e!==t)throw new Error("Cannot find square root");return T}function Zn(t,e=de.P){if(t===oe||e<=oe)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=L(t,e),r=e,s=oe,i=ve;for(;n!==oe;){const a=r/n,f=r%n,h=s-i*a;r=n,n=f,s=i,i=h}if(r!==ve)throw new Error("invert: does not exist");return L(s,e)}function ef(t,e=de.P){const n=new Array(t.length),r=t.reduce((i,o,a)=>o===oe?i:(n[a]=i,L(i*o,e)),ve),s=Zn(r,e);return t.reduceRight((i,o,a)=>o===oe?i:(n[a]=L(i*n[a],e),L(i*o,e)),s),n}function tf(t){const e=t.length*8-gn*8,n=rt(t);return e>0?n>>BigInt(e):n}function li(t,e=!1){const n=tf(t);if(e)return n;const{n:r}=de;return n>=r?n-r:n}let $n,Yn;class ra{constructor(e,n){if(this.hashLen=e,this.qByteLen=n,typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof n!="number"||n<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(e).fill(1),this.k=new Uint8Array(e).fill(0),this.counter=0}hmac(...e){return De.hmacSha256(this.k,...e)}hmacSync(...e){return Yn(this.k,...e)}checkSync(){if(typeof Yn!="function")throw new hi("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),e.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),e.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){this.incr();let e=0;const n=[];for(;e<this.qByteLen;){this.v=await this.hmac(this.v);const r=this.v.slice();n.push(r),e+=this.v.length}return Yt(...n)}generateSync(){this.checkSync(),this.incr();let e=0;const n=[];for(;e<this.qByteLen;){this.v=this.hmacSync(this.v);const r=this.v.slice();n.push(r),e+=this.v.length}return Yt(...n)}}function Hn(t){return oe<t&&t<de.n}function Nr(t){return oe<t&&t<de.P}function sa(t,e,n,r=!0){const{n:s}=de,i=li(t,!0);if(!Hn(i))return;const o=Zn(i,s),a=ae.BASE.multiply(i),f=L(a.x,s);if(f===oe)return;const h=L(o*L(e+n*f,s),s);if(h===oe)return;let l=new kt(f,h),p=(a.x===l.r?0:2)|Number(a.y&ve);return r&&l.hasHighS()&&(l=l.normalizeS(),p^=1),{sig:l,recovery:p}}function yn(t){let e;if(typeof t=="bigint")e=t;else if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if(typeof t=="string"){if(t.length!==2*gn)throw new Error("Expected 32 bytes of private key");e=Kr(t)}else if(t instanceof Uint8Array){if(t.length!==gn)throw new Error("Expected 32 bytes of private key");e=rt(t)}else throw new TypeError("Expected valid private key");if(!Hn(e))throw new Error("Expected private key: 0 < key < n");return e}function di(t){return t instanceof ae?(t.assertValidity(),t):ae.fromHex(t)}function ia(t){if(t instanceof kt)return t.assertValidity(),t;try{return kt.fromDER(t)}catch{return kt.fromCompact(t)}}function nf(t,e=!1){return ae.fromPrivateKey(t).toRawBytes(e)}function rf(t,e,n,r=!1){return ae.fromSignature(t,e,n).toRawBytes(r)}function ho(t){const e=t instanceof Uint8Array,n=typeof t=="string",r=(e||n)&&t.length;return e?r===Vr||r===qr:n?r===Vr*2||r===qr*2:t instanceof ae}function sf(t,e,n=!1){if(ho(t))throw new TypeError("getSharedSecret: first arg must be private key");if(!ho(e))throw new TypeError("getSharedSecret: second arg must be public key");const r=di(e);return r.assertValidity(),r.multiply(yn(t)).toRawBytes(n)}function oa(t){const e=t.length>ft?t.slice(0,ft):t;return rt(e)}function of(t){const e=oa(t),n=L(e,de.n);return aa(n<oe?e:n)}function aa(t){return Cn(t)}function ca(t,e,n){if(t==null)throw new Error(`sign: expected valid message hash, not "${t}"`);const r=At(t),s=yn(e),i=[aa(s),of(r)];if(n!=null){n===!0&&(n=De.randomBytes(ft));const f=At(n);if(f.length!==ft)throw new Error(`sign: Expected ${ft} bytes of extra data`);i.push(f)}const o=Yt(...i),a=oa(r);return{seed:o,m:a,d:s}}function ua(t,e){const{sig:n,recovery:r}=t,{der:s,recovered:i}=Object.assign({canonical:!0,der:!0},e),o=s?n.toDERRawBytes():n.toCompactRawBytes();return i?[o,r]:o}async function fa(t,e,n={}){const{seed:r,m:s,d:i}=ca(t,e,n.extraEntropy),o=new ra(na,gn);await o.reseed(r);let a;for(;!(a=sa(await o.generate(),s,i,n.canonical));)await o.reseed();return ua(a,n)}function af(t,e,n={}){const{seed:r,m:s,d:i}=ca(t,e,n.extraEntropy),o=new ra(na,gn);o.reseedSync(r);let a;for(;!(a=sa(o.generateSync(),s,i,n.canonical));)o.reseedSync();return ua(a,n)}const cf={strict:!0};function ha(t,e,n,r=cf){let s;try{s=ia(t),e=At(e)}catch{return!1}const{r:i,s:o}=s;if(r.strict&&s.hasHighS())return!1;const a=li(e);let f;try{f=di(n)}catch{return!1}const{n:h}=de,l=Zn(o,h),p=L(a*l,h),y=L(i*l,h),w=ae.BASE.multiplyAndAddUnsafe(f,p,y);return w?L(w.x,h)===i:!1}function Gr(t){return L(rt(t),de.n)}class Nn{constructor(e,n){this.r=e,this.s=n,this.assertValidity()}static fromHex(e){const n=At(e);if(n.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${n.length}`);const r=rt(n.subarray(0,32)),s=rt(n.subarray(32,64));return new Nn(r,s)}assertValidity(){const{r:e,s:n}=this;if(!Nr(e)||!Hn(n))throw new Error("Invalid signature")}toHex(){return Qt(this.r)+Qt(this.s)}toRawBytes(){return en(this.toHex())}}function uf(t){return ae.fromPrivateKey(t).toRawX()}class la{constructor(e,n,r=De.randomBytes()){if(e==null)throw new TypeError(`sign: Expected valid message, not "${e}"`);this.m=At(e);const{x:s,scalar:i}=this.getScalar(yn(n));if(this.px=s,this.d=i,this.rand=At(r),this.rand.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(e){const n=ae.fromPrivateKey(e),r=n.hasEvenY()?e:de.n-e;return{point:n,scalar:r,x:n.toRawX()}}initNonce(e,n){return Cn(e^rt(n))}finalizeNonce(e){const n=L(rt(e),de.n);if(n===oe)throw new Error("sign: Creation of signature failed. k is zero");const{point:r,x:s,scalar:i}=this.getScalar(n);return{R:r,rx:s,k:i}}finalizeSig(e,n,r,s){return new Nn(e.x,L(n+r*s,de.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){const{m:e,d:n,px:r,rand:s}=this,i=De.taggedHash,o=this.initNonce(n,await i(Kt.aux,s)),{R:a,rx:f,k:h}=this.finalizeNonce(await i(Kt.nonce,o,r,e)),l=Gr(await i(Kt.challenge,f,r,e)),p=this.finalizeSig(a,h,l,n);return await ga(p,e,r)||this.error(),p}calcSync(){const{m:e,d:n,px:r,rand:s}=this,i=De.taggedHashSync,o=this.initNonce(n,i(Kt.aux,s)),{R:a,rx:f,k:h}=this.finalizeNonce(i(Kt.nonce,o,r,e)),l=Gr(i(Kt.challenge,f,r,e)),p=this.finalizeSig(a,h,l,n);return ya(p,e,r)||this.error(),p}}async function ff(t,e,n){return new la(t,e,n).calc()}function hf(t,e,n){return new la(t,e,n).calcSync()}function da(t,e,n){const r=t instanceof Nn,s=r?t:Nn.fromHex(t);return r&&s.assertValidity(),{...s,m:At(e),P:di(n)}}function pa(t,e,n,r){const s=ae.BASE.multiplyAndAddUnsafe(e,yn(n),L(-r,de.n));return!(!s||!s.hasEvenY()||s.x!==t)}async function ga(t,e,n){try{const{r,s,m:i,P:o}=da(t,e,n),a=Gr(await De.taggedHash(Kt.challenge,Cn(r),o.toRawX(),i));return pa(r,o,s,a)}catch{return!1}}function ya(t,e,n){try{const{r,s,m:i,P:o}=da(t,e,n),a=Gr(De.taggedHashSync(Kt.challenge,Cn(r),o.toRawX(),i));return pa(r,o,s,a)}catch(r){if(r instanceof hi)throw r;return!1}}const pi={Signature:Nn,getPublicKey:uf,sign:ff,verify:ga,signSync:hf,verifySync:ya};ae.BASE._setWindowSize(8);const Kt={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},Br={},De={bytesToHex:Pn,hexToBytes:en,concatBytes:Yt,mod:L,invert:Zn,isValidPrivateKey(t){try{return yn(t),!0}catch{return!1}},_bigintTo32Bytes:Cn,_normalizePrivateKey:yn,hashToPrivateKey:t=>{t=At(t);const e=gn+8;if(t.length<e||t.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");const n=L(rt(t),de.n-ve)+ve;return Cn(n)},randomBytes:(t=32)=>vr.getRandomValues(new Uint8Array(t)),randomPrivateKey:()=>De.hashToPrivateKey(De.randomBytes(gn+8)),precompute(t=8,e=ae.BASE){const n=e===ae.BASE?e:new ae(e.x,e.y);return n._setWindowSize(t),n.multiply(Wn),n},sha256:async(...t)=>{const e=await vr.subtle.digest("SHA-256",Yt(...t));return new Uint8Array(e)},hmacSha256:async(t,...e)=>{const n=await vr.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),r=Yt(...e),s=await vr.subtle.sign("HMAC",n,r);return new Uint8Array(s)},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(t,...e)=>{let n=Br[t];if(n===void 0){const r=await De.sha256(Uint8Array.from(t,s=>s.charCodeAt(0)));n=Yt(r,r),Br[t]=n}return De.sha256(n,...e)},taggedHashSync:(t,...e)=>{if(typeof $n!="function")throw new hi("sha256Sync is undefined, you need to set it");let n=Br[t];if(n===void 0){const r=$n(Uint8Array.from(t,s=>s.charCodeAt(0)));n=Yt(r,r),Br[t]=n}return $n(n,...e)},_JacobianPoint:ge};Object.defineProperties(De,{sha256Sync:{configurable:!1,get(){return $n},set(t){$n||($n=t)}},hmacSha256Sync:{configurable:!1,get(){return Yn},set(t){Yn||(Yn=t)}}});var gi=Object.freeze({__proto__:null,CURVE:de,Point:ae,Signature:kt,getPublicKey:nf,getSharedSecret:sf,recoverPublicKey:rf,schnorr:pi,sign:fa,signSync:af,utils:De,verify:ha});const lf=new TextEncoder,df=[{name:"base58",charset:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"},{name:"base64",charset:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"},{name:"base64url",charset:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}];function wa(t){for(const e of df)if(e.name===t)return e.charset;throw TypeError("Charset does not exist: "+t)}function pf(t,e,n=!1){typeof t=="string"&&(t=lf.encode(t));const r=wa(e),s=r.length,i=[];let o="",a,f=0,h,l;for(a=0;a<t.length;a++)for(f=0,h=t[a],o+=h>0||(o.length^a)>0?"":"1";f in i||h>0;)l=i[f],l=l>0?l*256+h:h,h=l/s|0,i[f]=l%s,f++;for(;f-- >0;)o+=r[i[f]];return n&&o.length%4>0?o+"=".repeat(4-o.length%4):o}function gf(t,e){const n=wa(e),r=n.length,s=[],i=[];t=t.replace("=","");let o,a=0,f,h;for(o=0;o<t.length;o++){if(a=0,f=n.indexOf(t[o]),f<0)throw new Error(`Character range out of bounds: ${f}`);for(f>0||(i.length^o)>0||i.push(0);a in s||f>0;)h=s[a],h=h>0?h*r+f:f,f=h>>8,s[a]=h%256,a++}for(;a-- >0;)i.push(s[a]);return new Uint8Array(i)}const Sn={encode:pf,decode:gf},xa="qpzry9x8gf2tvdw0s3jn54khce6mua7l",yf=[996825010,642813549,513874426,1027748829,705979059],lo={BECH32:"bech32",BECH32M:"bech32m"};function ma(t){switch(t){case lo.BECH32:return 1;case lo.BECH32M:return 734539939;default:throw new Error(`Unrecognized encoding: ${t}`)}}function ba(t){let e=1;for(let n=0;n<t.length;++n){const r=e>>25;e=(e&33554431)<<5^t[n];for(let s=0;s<5;++s)(r>>s&1)>0&&(e^=yf[s])}return e}function va(t){const e=[];let n;for(n=0;n<t.length;++n)e.push(t.charCodeAt(n)>>5);for(e.push(0),n=0;n<t.length;++n)e.push(t.charCodeAt(n)&31);return e}function Ea(t,e,n,r=!0){const s=[];let i=0,o=0;const a=(1<<n)-1,f=(1<<e+n-1)-1;for(const h of t){if(h<0||h>>e>0)return[];for(i=(i<<e|h)&f,o+=e;o>=n;)o-=n,s.push(i>>o&a)}if(r)o>0&&s.push(i<<n-o&a);else if(o>=e||(i<<n-o&a)>0)return[];return s}function wf(t,e,n){const r=va(t).concat(e);return ba(r)===ma(n)}function xf(t,e,n){const r=va(t).concat(e).concat([0,0,0,0,0,0]),s=ba(r)^ma(n),i=[];for(let o=0;o<6;++o)i.push(s>>5*(5-o)&31);return i}function mf(t,e,n){const r=e.concat(xf(t,e,n));let s=t+"1";for(let i=0;i<r.length;++i)s+=xa.charAt(r[i]);return s}function bf(t,e){const n=e>0?"bech32m":"bech32";if(!vf(t))return{hrp:null,data:[255]};if(t=t.toLowerCase(),!Ef(t))return{hrp:null,data:[255]};const r=[],s=t.lastIndexOf("1"),i=t.substring(0,s);for(let o=s+1;o<t.length;++o){const a=xa.indexOf(t.charAt(o));if(a===-1)return{hrp:null,data:[255]};r.push(a)}return wf(i,r,n)?{hrp:i,data:r.slice(0,r.length-6)}:{hrp:null,data:[255]}}function vf(t){let e,n,r=!1,s=!1;for(e=0;e<t.length;++e){if(n=t.charCodeAt(e),n<33||n>126)return!1;n>=97&&n<=122&&(r=!0),n>=65&&n<=90&&(s=!0)}return!(r&&s)}function Ef(t){const e=t.lastIndexOf("1");return!(e<1||e+7>t.length||t.length>90)}function Af(t,e="bch",n=0){const r=[n,...Ea([...t],8,5)],s=n>0?"bech32m":"bech32",i=mf(e,r,s);return Aa(i,n),i}function Aa(t,e=0){const n=t.split("1",1)[0],{hrp:r,data:s}=bf(t,e),i=Ea(s.slice(1),5,8,!1),o=i.length;switch(!0){case n!==r:throw new Error("Returned hrp string is invalid.");case(i===null||o<2||o>40):throw new Error("Decoded string is invalid or out of spec.");case s[0]>16:throw new Error("Returned version bit is out of range.");case(s[0]===0&&o!==20&&o!==32):throw new Error("Decoded string does not match version 0 spec.");case(s[0]===0&&e!==0):throw new Error("Decoded version bit does not match.");case(s[0]!==0&&e!==1):throw new Error("Decoded version bit does not match.");default:return Uint8Array.from(i)}}const po={encode:Af,decode:Aa},Sa=new TextEncoder,Sf=new TextDecoder;function Ts(t){return Sa.encode(t)}function Ba(t){const e=[];let n,r=0;if(t.length%2>0)throw new Error(`Invalid hex string length: ${t.length}`);for(n=0;n<t.length;n+=2)e[r]=parseInt(t.slice(n,n+2),16),r+=1;return Uint8Array.from(e)}function _a(t){const e=[];for(;t>0;){const n=t&255;e.push(n),t=(t-n)/256}return Uint8Array.from(e)}function Ia(t){const e=[];for(;t>0n;){const n=t&0xffn;e.push(Number(n)),t=(t-n)/256n}return Uint8Array.from(e)}function _r(t){return Sf.decode(t)}function Bf(t){const e=[];let n;for(n=0;n<t.length;n++)e.push(t[n].toString(16).padStart(2,"0"));return e.join("")}function go(t){let e=0,n;for(n=t.length-1;n>=0;n--)e=e*256+t[n];return Number(e)}function yo(t){let e=0n,n;for(n=t.length-1;n>=0;n--)e=e*256n+BigInt(t[n]);return BigInt(e)}function _f(t){if(t instanceof ArrayBuffer)return new Uint8Array(t);if(t instanceof Uint8Array)return t;const e=typeof t;switch(e){case"bigint":return Ia(t);case"boolean":return Uint8Array.of(t);case"number":return _a(t);case"string":return t.match(/^(02|03)*[0-9a-fA-F]{64}$/)!==null?Ba(t):Sa.encode(t);default:throw TypeError("Unsupported format:"+e)}}async function wo(t){return crypto.subtle.digest("SHA-256",t).then(e=>new Uint8Array(e))}async function Ta(t){return wo(await wo(t))}async function If(t){const e=await Ta(t);return Uint8Array.of(...t,...e.slice(0,4))}async function Tf(t){const e=t.slice(0,-4),n=t.slice(-4);if((await Ta(e)).slice(0,4).toString()!==n.toString())throw new Error("Invalid checksum!");return e}const{crypto:xo}=globalThis;var G;let $e=(G=class extends Uint8Array{static async b58check(e){const n=Sn.decode(e,"base58");return new G(await Tf(n))}constructor(e,n=null,r="be"){if(n!==null){const s=new Uint8Array(n).fill(0);s.set(new Uint8Array(e)),e=s.buffer}return e=r==="le"?new Uint8Array(e).reverse():e,super(e),this}get num(){return this.toNum()}get big(){return this.toBig()}get arr(){return this.toArr()}get str(){return this.toStr()}get hex(){return this.toHex()}get raw(){return new Uint8Array(this)}get hash(){return this.toHash()}get id(){return this.toHash().then(e=>new G(e).hex)}toNum(e="le"){return go(e==="le"?this.reverse():this)}toBig(e="le"){return yo(e==="le"?this.reverse():this)}async toHash(){return xo.subtle.digest("SHA-256",this.raw).then(e=>new Uint8Array(e))}async tob58check(){return Sn.encode(await If(this),"base58")}toArr(){return Array.from(this)}toStr(){return _r(this)}toHex(){return Bf(this)}toJson(){return JSON.parse(_r(this))}toBytes(){return new Uint8Array(this)}toB64url(){return Sn.encode(this,"base64url")}toBase64(e){return Sn.encode(this,"base64",e)}toBech32(e,n){return po.encode(this,e,n)}prepend(e){return G.of(...e,...this)}append(e){return G.of(...this,...e)}slice(e,n){return new G(new Uint8Array(this).slice(e,n))}reverse(){return new G(new Uint8Array(this).reverse())}write(e,n){this.set(e,n)}prependVarint(e=this.length){return G.of(...G.readVarint(e),...this)}static from(e){return new G(Uint8Array.from(e))}static of(...e){return new G(Uint8Array.of(...e))}static join(e){let n,r=0;const s=e.reduce((o,a)=>o+a.length,0),i=new Uint8Array(s);for(const o of e)for(n=0;n<o.length;r++,n++)i[r]=o[n];return new G(i,s)}static readVarint(e){if(e<253)return G.num(e,1);if(e<65536)return G.of(253,...G.num(e,2));if(e<4294967296)return G.of(254,...G.num(e,4));if(e<18446744073709552e3)return G.of(255,...G.num(e,8));throw new Error(`Value is too large: ${e}`)}static random(e=32){return new G(xo.getRandomValues(new Uint8Array(e)))}static normalize(e,n){if(e instanceof Uint8Array)return e;if(typeof e=="string")return G.hex(e,n).toBytes();if(typeof e=="number")return G.num(e,n).toBytes();if(typeof e=="bigint")return G.big(e,n).toBytes();throw TypeError(`Unrecognized format: ${typeof e}`)}static serialize(e){if(typeof e=="string")return G.str(e).toBytes();if(typeof e=="object"){if(e instanceof Uint8Array)return e;try{return G.json(e).toBytes()}catch{throw TypeError("Object is not serializable.")}}throw TypeError(`Unrecognized format: ${typeof e}`)}static revitalize(e){if(e instanceof Uint8Array&&(e=_r(e)),typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}},(()=>{G.num=(e,n,r="le")=>new G(_a(e),n,r)})(),(()=>{G.big=(e,n,r="le")=>new G(Ia(e),n,r)})(),(()=>{G.buff=(e,n)=>new G(_f(e),n)})(),(()=>{G.raw=(e,n)=>new G(e,n)})(),(()=>{G.str=(e,n)=>new G(Ts(e),n)})(),(()=>{G.hex=(e,n)=>new G(Ba(e),n)})(),(()=>{G.json=e=>new G(Ts(JSON.stringify(e)))})(),(()=>{G.base64=e=>new G(Sn.decode(e,"base64"))})(),(()=>{G.b64url=e=>new G(Sn.decode(e,"base64url"))})(),(()=>{G.bech32=(e,n)=>new G(po.decode(e,n))})(),(()=>{G.encode=Ts})(),(()=>{G.decode=_r})(),G);var pe;let kf=(pe=class extends Uint8Array{static mod(e,n=pe.N){return De.mod(e,n)}static normalize(e){return e=Gn(e),e=pe.mod(e),e=De._normalizePrivateKey(e),$e.big(e,32).raw}static validate(e){return De.isValidPrivateKey(e)}constructor(e){e=pe.normalize(e),super(e)}get buff(){return new $e(this)}get raw(){return this}get num(){return this.buff.toBig()}get point(){return $f.fromNum(this.num)}get hasOddY(){return this.point.hasOddY}get negated(){return this.hasOddY?this.negate():this}gt(e){return new pe(e).num>this.num}lt(e){return new pe(e).num<this.num}eq(e){return new pe(e).num===this.num}ne(e){return new pe(e).num!==this.num}add(e){const n=new pe(e);return new pe(this.num+n.num)}sub(e){const n=new pe(e);return new pe(this.num-n.num)}mul(e){const n=new pe(e);return new pe(this.num*n.num)}pow(e,n=pe.N-1n){const r=new pe(e),s=pe.mod(r.num,n);return new pe(this.num**s)}div(e){const n=new pe(e),r=this.pow(n.num,pe.N-2n);return new pe(this.num*r.num)}negate(){return new pe(pe.N-this.num)}},(()=>{pe.N=de.n})(),(()=>{pe.isField=e=>e instanceof pe})(),pe);var Ie;let $f=(Ie=class{static validate(e){try{e=Gn(e);const n=$e.big(e).toHex();return ae.fromHex(n).assertValidity(),!0}catch{return!1}}static fromNum(e){e=Gn(e);const n=De.mod(e,Ie.N),r=ae.BASE.multiply(n);return new Ie(r.x,r.y)}static fromX(e){e=Gn(e);const n=$e.big(e).toHex();return Ie.from(ae.fromHex(n))}static from(e){return new Ie(e.x,e.y)}constructor(e,n){this.__p=new ae(e,n),this.__x=this.__p.x,this.__y=this.__p.y,this.__p.assertValidity()}get p(){return this.__p}get buff(){return new $e(this.rawX.slice(1))}get hex(){return this.buff.hex}get hasOddY(){return!this.__p.hasEvenY()}get rawX(){const e=this.__p.hasEvenY()?2:3,n=$e.big(this.__x);return Uint8Array.of(e,...n)}get rawY(){return $e.big(this.__y)}get x(){return this.__x}get y(){return this.__y}eq(e){return e instanceof Ie?this.p.equals(new ae(e.x,e.y)):e instanceof Uint8Array?this.x.toString()===e.toString():typeof e=="number"?BigInt(e)===this.x:e===this.x}add(e){return e instanceof Ie?Ie.from(this.p.add(e.p)):Ie.from(this.p.add(Ie.fromNum(e).p))}sub(e){return e instanceof Ie?Ie.from(this.p.subtract(e.p)):Ie.from(this.p.subtract(Ie.fromNum(e).p))}mul(e){return e instanceof Ie?Ie.from(this.p.multiply(e.x)):Ie.from(this.p.multiply(Gn(e)))}negate(){return Ie.from(this.__p.negate())}},(()=>{Ie.N=de.n})(),Ie);function Gn(t){if(t instanceof Uint8Array)return $e.raw(t).big;if(typeof t=="string")return $e.hex(t).big;if(typeof t=="number")return BigInt(t);if(typeof t=="bigint")return t;throw TypeError("Invalid input type:"+typeof t)}async function Uf(t,e,n="schnorr"){const r=$e.normalize(t),s=$e.normalize(e);return n==="schnorr"?pi.sign(r,s):fa(r,s)}async function ka(t,e,n,r="schnorr"){const s=$e.normalize(t),i=$e.normalize(e),o=$e.normalize(n);return r==="schnorr"?pi.verify(o,s,Of(i)):ha(o,s,i)}function Of(t){return t.length>32?t.slice(1):t}class ds{static generate(){return new ds($e.random(32))}constructor(e){this._buffer=$e.normalize(e,32)}get field(){return new kf(this._buffer)}get point(){return this.field.point}get buff(){return new $e(this._buffer)}get raw(){return new Uint8Array(this._buffer)}get hex(){return this.buff.hex}get pub(){return new Pf(this.point.rawX)}async sign(e,n){const r=$e.normalize(e);return Uf(r,this.raw,n)}async verify(e,n,r){return ka(e,this.pub.raw,n,r)}}class Pf{static generate(){return new ds($e.random(32)).pub}constructor(e){this._buffer=$e.normalize(e)}get raw(){return new Uint8Array(this._buffer)}get rawX(){return this.raw.length>32?this.raw.slice(1,33):this.raw}get buff(){return new $e(this.raw)}get hex(){return this.buff.hex}async verify(e,n,r){return ka(e,this.raw,n,r)}}function $a(t){let e,n=0;const r=t.reduce((i,o)=>i+o.length,0),s=new Uint8Array(r);for(const i of t)for(e=0;e<i.length;n++,e++)s[n]=i[e];return s}function Ms(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Cf(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}function Ua(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Hf(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ms(t.outputLen),Ms(t.blockLen)}function Nf(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Lf(t,e){Ua(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Rf={number:Ms,bool:Cf,bytes:Ua,hash:Hf,exists:Nf,output:Lf};var fn=Rf;const ks=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $s=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),xt=(t,e)=>t<<32-e|t>>>e,Df=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Df)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ff(t){if(typeof t!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof t}`);return new TextEncoder().encode(t)}function yi(t){if(typeof t=="string"&&(t=Ff(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}let Oa=class{clone(){return this._cloneInto()}};function vn(t){const e=r=>t().update(yi(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function jf(t=32){if(ks&&typeof ks.getRandomValues=="function")return ks.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function Zf(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),f=r?4:0,h=r?0:4;t.setUint32(e+f,o,r),t.setUint32(e+h,a,r)}let wi=class extends Oa{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=$s(this.buffer)}update(e){fn.exists(this);const{view:n,buffer:r,blockLen:s}=this;e=yi(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const f=$s(e);for(;s<=i-o;o+=s)this.process(f,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){fn.exists(this),fn.output(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let p=o;p<s;p++)n[p]=0;Zf(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=$s(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=f/4,l=this.get();if(h>l.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<h;p++)a.setUint32(4*p,l[p],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const Mf=(t,e,n)=>t&e^~t&n,zf=(t,e,n)=>t&e^t&n^e&n,Vf=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ht=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Nt=new Uint32Array(64);let Pa=class extends wi{constructor(){super(64,32,8,!1),this.A=Ht[0]|0,this.B=Ht[1]|0,this.C=Ht[2]|0,this.D=Ht[3]|0,this.E=Ht[4]|0,this.F=Ht[5]|0,this.G=Ht[6]|0,this.H=Ht[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:f}=this;return[e,n,r,s,i,o,a,f]}set(e,n,r,s,i,o,a,f){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=f|0}process(e,n){for(let p=0;p<16;p++,n+=4)Nt[p]=e.getUint32(n,!1);for(let p=16;p<64;p++){const y=Nt[p-15],w=Nt[p-2],b=xt(y,7)^xt(y,18)^y>>>3,x=xt(w,17)^xt(w,19)^w>>>10;Nt[p]=x+Nt[p-7]+b+Nt[p-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:f,G:h,H:l}=this;for(let p=0;p<64;p++){const y=xt(a,6)^xt(a,11)^xt(a,25),w=l+y+Mf(a,f,h)+Vf[p]+Nt[p]|0,x=(xt(r,2)^xt(r,13)^xt(r,22))+zf(r,s,i)|0;l=h,h=f,f=a,a=o+w|0,o=i,i=s,s=r,r=w+x|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,f=f+this.F|0,h=h+this.G|0,l=l+this.H|0,this.set(r,s,i,o,a,f,h,l)}roundClean(){Nt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},qf=class extends Pa{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const Xn=vn(()=>new Pa);vn(()=>new qf);const Ir=BigInt(2**32-1),zs=BigInt(32);function Ca(t,e=!1){return e?{h:Number(t&Ir),l:Number(t>>zs&Ir)}:{h:Number(t>>zs&Ir)|0,l:Number(t&Ir)|0}}function Kf(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=Ca(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const Gf=(t,e)=>BigInt(t>>>0)<<zs|BigInt(e>>>0),Wf=(t,e,n)=>t>>>n,Yf=(t,e,n)=>t<<32-n|e>>>n,Xf=(t,e,n)=>t>>>n|e<<32-n,Jf=(t,e,n)=>t<<32-n|e>>>n,Qf=(t,e,n)=>t<<64-n|e>>>n-32,eh=(t,e,n)=>t>>>n-32|e<<64-n,th=(t,e)=>e,nh=(t,e)=>t,rh=(t,e,n)=>t<<n|e>>>32-n,sh=(t,e,n)=>e<<n|t>>>32-n,ih=(t,e,n)=>e<<n-32|t>>>64-n,oh=(t,e,n)=>t<<n-32|e>>>64-n;function ah(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const ch=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),uh=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,fh=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),hh=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,lh=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),dh=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,ph={fromBig:Ca,split:Kf,toBig:Gf,shrSH:Wf,shrSL:Yf,rotrSH:Xf,rotrSL:Jf,rotrBH:Qf,rotrBL:eh,rotr32H:th,rotr32L:nh,rotlSH:rh,rotlSL:sh,rotlBH:ih,rotlBL:oh,add:ah,add3L:ch,add3H:uh,add4L:fh,add4H:hh,add5H:dh,add5L:lh};var te=ph;const[gh,yh]=te.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Lt=new Uint32Array(80),Rt=new Uint32Array(80);let ps=class extends wi{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:f,Eh:h,El:l,Fh:p,Fl:y,Gh:w,Gl:b,Hh:x,Hl:v}=this;return[e,n,r,s,i,o,a,f,h,l,p,y,w,b,x,v]}set(e,n,r,s,i,o,a,f,h,l,p,y,w,b,x,v){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=f|0,this.Eh=h|0,this.El=l|0,this.Fh=p|0,this.Fl=y|0,this.Gh=w|0,this.Gl=b|0,this.Hh=x|0,this.Hl=v|0}process(e,n){for(let B=0;B<16;B++,n+=4)Lt[B]=e.getUint32(n),Rt[B]=e.getUint32(n+=4);for(let B=16;B<80;B++){const P=Lt[B-15]|0,T=Rt[B-15]|0,U=te.rotrSH(P,T,1)^te.rotrSH(P,T,8)^te.shrSH(P,T,7),C=te.rotrSL(P,T,1)^te.rotrSL(P,T,8)^te.shrSL(P,T,7),$=Lt[B-2]|0,N=Rt[B-2]|0,j=te.rotrSH($,N,19)^te.rotrBH($,N,61)^te.shrSH($,N,6),V=te.rotrSL($,N,19)^te.rotrBL($,N,61)^te.shrSL($,N,6),Y=te.add4L(C,V,Rt[B-7],Rt[B-16]),ie=te.add4H(Y,U,j,Lt[B-7],Lt[B-16]);Lt[B]=ie|0,Rt[B]=Y|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:f,Dh:h,Dl:l,Eh:p,El:y,Fh:w,Fl:b,Gh:x,Gl:v,Hh:S,Hl:_}=this;for(let B=0;B<80;B++){const P=te.rotrSH(p,y,14)^te.rotrSH(p,y,18)^te.rotrBH(p,y,41),T=te.rotrSL(p,y,14)^te.rotrSL(p,y,18)^te.rotrBL(p,y,41),U=p&w^~p&x,C=y&b^~y&v,$=te.add5L(_,T,C,yh[B],Rt[B]),N=te.add5H($,S,P,U,gh[B],Lt[B]),j=$|0,V=te.rotrSH(r,s,28)^te.rotrBH(r,s,34)^te.rotrBH(r,s,39),Y=te.rotrSL(r,s,28)^te.rotrBL(r,s,34)^te.rotrBL(r,s,39),ie=r&i^r&a^i&a,ce=s&o^s&f^o&f;S=x|0,_=v|0,x=w|0,v=b|0,w=p|0,b=y|0,{h:p,l:y}=te.add(h|0,l|0,N|0,j|0),h=a|0,l=f|0,a=i|0,f=o|0,i=r|0,o=s|0;const k=te.add3L(j,Y,ce);r=te.add3H(k,N,V,ie),s=k|0}({h:r,l:s}=te.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=te.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:f}=te.add(this.Ch|0,this.Cl|0,a|0,f|0),{h,l}=te.add(this.Dh|0,this.Dl|0,h|0,l|0),{h:p,l:y}=te.add(this.Eh|0,this.El|0,p|0,y|0),{h:w,l:b}=te.add(this.Fh|0,this.Fl|0,w|0,b|0),{h:x,l:v}=te.add(this.Gh|0,this.Gl|0,x|0,v|0),{h:S,l:_}=te.add(this.Hh|0,this.Hl|0,S|0,_|0),this.set(r,s,i,o,a,f,h,l,p,y,w,b,x,v,S,_)}roundClean(){Lt.fill(0),Rt.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},wh=class extends ps{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},xh=class extends ps{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},mh=class extends ps{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};const xi=vn(()=>new ps);vn(()=>new wh);vn(()=>new xh);vn(()=>new mh);const bh=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Ha=Uint8Array.from({length:16},(t,e)=>e),vh=Ha.map(t=>(9*t+5)%16);let mi=[Ha],bi=[vh];for(let t=0;t<4;t++)for(let e of[mi,bi])e.push(e[t].map(n=>bh[n]));const Na=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),Eh=mi.map((t,e)=>t.map(n=>Na[e][n])),Ah=bi.map((t,e)=>t.map(n=>Na[e][n])),Sh=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Bh=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Tr=(t,e)=>t<<e|t>>>32-e;function mo(t,e,n,r){return t===0?e^n^r:t===1?e&n|~e&r:t===2?(e|~n)^r:t===3?e&r|n&~r:e^(n|~r)}const kr=new Uint32Array(16);let _h=class extends wi{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:n,h2:r,h3:s,h4:i}=this;return[e,n,r,s,i]}set(e,n,r,s,i){this.h0=e|0,this.h1=n|0,this.h2=r|0,this.h3=s|0,this.h4=i|0}process(e,n){for(let w=0;w<16;w++,n+=4)kr[w]=e.getUint32(n,!0);let r=this.h0|0,s=r,i=this.h1|0,o=i,a=this.h2|0,f=a,h=this.h3|0,l=h,p=this.h4|0,y=p;for(let w=0;w<5;w++){const b=4-w,x=Sh[w],v=Bh[w],S=mi[w],_=bi[w],B=Eh[w],P=Ah[w];for(let T=0;T<16;T++){const U=Tr(r+mo(w,i,a,h)+kr[S[T]]+x,B[T])+p|0;r=p,p=h,h=Tr(a,10)|0,a=i,i=U}for(let T=0;T<16;T++){const U=Tr(s+mo(b,o,f,l)+kr[_[T]]+v,P[T])+y|0;s=y,y=l,l=Tr(f,10)|0,f=o,o=U}}this.set(this.h1+a+l|0,this.h2+h+y|0,this.h3+p+s|0,this.h4+r+o|0,this.h0+i+f|0)}roundClean(){kr.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}};const Ih=vn(()=>new _h);let La=class extends Oa{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,fn.hash(e);const r=yi(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return fn.exists(this),this.iHash.update(e),this}digestInto(e){fn.exists(this),fn.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const vi=(t,e,n)=>new La(t,e).update(n).digest();vi.create=(t,e)=>new La(t,e);const Ra=new TextEncoder,Th=new TextDecoder;function Lr(t){return Ra.encode(t)}function Da(t){const e=new Uint8Array(t.length/2);let n,r=0;if(t.match(/[^a-fA-f0-9]/)!==null)throw new TypeError("Invalid hex string: "+t);if(t.length%2>0)throw new Error(`Hex string length is uneven: ${t.length}`);for(n=0;n<t.length;n+=2)e[r]=parseInt(t.slice(n,n+2),16),r+=1;return e}function Fa(t){if(t===0)return Uint8Array.of(0);const e=[];for(;t>0;){const n=t&255;e.push(n),t=(t-n)/256}return new Uint8Array(e)}function kh(t){if(typeof t=="string")t=t.split("").map(Number);else if(!Array.isArray(t))throw new Error("Invalid input type: expected a string or an array of numbers.");if(t.length%8!==0)throw new Error(`Binary array is invalid length: ${t.length}`);const e=new Uint8Array(t.length/8);for(let n=0,r=0;n<t.length;n+=8,r++){let s=0;for(let i=0;i<8;i++)s|=t[n+i]<<7-i;e[r]=s}return e}function bo(t){const e=new Array(t.length*8);let n=0;for(const r of t){if(r>255)throw new Error(`Invalid byte value: ${r}. Byte values must be between 0 and 255.`);for(let s=7;s>=0;s--,n++)e[n]=r>>s&1}return e}function ja(t){if(t===0n)return Uint8Array.of(0);const e=[];for(;t>0n;){const n=t&0xffn;e.push(Number(n)),t=(t-n)/256n}return new Uint8Array(e)}function Rr(t){return Th.decode(t)}function Za(t){const e=new Array(t.length);for(let n=0;n<t.length;n++)e.push(t[n].toString(16).padStart(2,"0"));return e.join("")}function vo(t){let e=0,n;for(n=t.length-1;n>=0;n--)e=e*256+t[n];return Number(e)}function Eo(t){let e=0n,n;for(n=t.length-1;n>=0;n--)e=e*256n+BigInt(t[n]);return BigInt(e)}function Ke(t,e=!0){if(t instanceof ArrayBuffer)return new Uint8Array(t);if(t instanceof Uint8Array)return new Uint8Array(t);switch(typeof t){case"bigint":return ja(t);case"boolean":return Uint8Array.of(t?1:0);case"number":return Fa(t);case"string":return e?Da(t):Ra.encode(t);default:throw TypeError("Unsupported format:"+typeof t)}}function $h(t){return t=Ke(t,!0),Za(t)}function Uh(t){if(typeof t=="object"){if(t instanceof Uint8Array)return t;try{return Lr(JSON.stringify(t))}catch{throw TypeError("Object is not serializable.")}}return Ke(t,!1)}function Oh(t){if(t instanceof Uint8Array&&(t=Rr(t)),typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}function Ph(t){return Xn(Ke(t))}function Ch(t){return xi(Ke(t))}function Hh(t){return xi(Ke(t))}function Ei(t){return Xn(Xn(Ke(t)))}function Nh(t){return Ih(Xn(Ke(t)))}function Lh(t,e){return vi(Xn,Ke(t),Ke(e))}function Rh(t,e){return vi(xi,Ke(t),Ke(e))}const Bn={sha256:Ph,sha512:Ch,ripe160:Hh,hash256:Ei,hash160:Nh,hmac256:Lh,hmac512:Rh},Dh=new TextEncoder,Fh=[{name:"base58",charset:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}];function Ma(t){for(const e of Fh)if(e.name===t)return e.charset;throw TypeError("Charset does not exist: "+t)}function jh(t,e,n=!1){typeof t=="string"&&(t=Dh.encode(t));const r=Ma(e),s=r.length,i=[];let o="",a,f=0,h,l;for(a=0;a<t.length;a++)for(f=0,h=t[a],o+=h>0||(o.length^a)>0?"":"1";f in i||h>0;)l=i[f],l=l>0?l*256+h:h,h=l/s|0,i[f]=l%s,f++;for(;f-- >0;)o+=r[i[f]];return n&&o.length%4>0?o+"=".repeat(4-o.length%4):o}function Zh(t,e){const n=Ma(e),r=n.length,s=[],i=[];t=t.replace("=","");let o,a=0,f,h;for(o=0;o<t.length;o++){if(a=0,f=n.indexOf(t[o]),f<0)throw new Error(`Character range out of bounds: ${f}`);for(f>0||(i.length^o)>0||i.push(0);a in s||f>0;)h=s[a],h=h>0?h*r+f:f,f=h>>8,s[a]=h%256,a++}for(;a-- >0;)i.push(s[a]);return new Uint8Array(i)}function Mh(t){const e=Ei(t);return $a([t,e.slice(0,4)])}function zh(t){const e=t.slice(0,-4),n=t.slice(-4);if(Ei(e).slice(0,4).toString()!==n.toString())throw new Error("Invalid checksum!");return e}const Ao={encode:jh,decode:Zh},So={encode:t=>{const e=Mh(t);return Ao.encode(e,"base58")},decode:t=>{const e=Ao.decode(t,"base58");return zh(e)}},za="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Vh=[996825010,642813549,513874426,1027748829,705979059],Wr=[{version:0,name:"bech32",const:1},{version:1,name:"bech32m",const:734539939}];function Va(t){let e=1;for(let n=0;n<t.length;++n){const r=e>>25;e=(e&33554431)<<5^t[n];for(let s=0;s<5;++s)r>>s&1&&(e^=Vh[s])}return e}function qa(t){const e=[];let n;for(n=0;n<t.length;++n)e.push(t.charCodeAt(n)>>5);for(e.push(0),n=0;n<t.length;++n)e.push(t.charCodeAt(n)&31);return e}function qh(t,e,n){const r=qa(t).concat(e);return Va(r)===n.const}function Kh(t,e,n){const r=qa(t).concat(e).concat([0,0,0,0,0,0]),s=Va(r)^n.const,i=[];for(let o=0;o<6;++o)i.push(s>>5*(5-o)&31);return i}function Ka(t,e,n,r=!0){const s=[];let i=0,o=0;const a=(1<<n)-1,f=(1<<e+n-1)-1;for(const h of t){if(h<0||h>>e>0)throw new Error("Failed to perform base conversion. Invalid value: "+String(h));for(i=(i<<e|h)&f,o+=e;o>=n;)o-=n,s.push(i>>o&a)}if(r)o>0&&s.push(i<<n-o&a);else if(o>=e||(i<<n-o&a)>0)throw new Error("Failed to perform base conversion. Invalid Size!");return s}function Gh(t,e,n){const r=e.concat(Kh(t,e,n));let s=t+"1";for(let i=0;i<r.length;++i)s+=za.charAt(r[i]);return s}function Ga(t){if(!Wh(t))throw new Error("Encoded string goes out of bounds!");if(t=t.toLowerCase(),!Yh(t))throw new Error("Encoded string has invalid separator!");const e=[],n=t.lastIndexOf("1"),r=t.substring(0,n);for(let i=n+1;i<t.length;++i){const o=za.indexOf(t.charAt(i));if(o===-1)throw new Error("Character idx out of bounds: "+String(i));e.push(o)}const s=Wr.find(i=>i.version===e[0])??Wr[0];if(!qh(r,e,s))throw new Error("Checksum verification failed!");return[r,e.slice(0,e.length-6)]}function Wh(t){let e,n,r=!1,s=!1;for(e=0;e<t.length;++e){if(n=t.charCodeAt(e),n<33||n>126)return!1;n>=97&&n<=122&&(r=!0),n>=65&&n<=90&&(s=!0)}return!(r&&s)}function Yh(t){const e=t.lastIndexOf("1");return!(e<1||e+7>t.length||t.length>90)}function Xh(t,e="bc",n=0){const r=[n,...Ka([...t],8,5)],s=Wr.find(o=>o.version===n)??Wr[0],i=Gh(e,r,s);return Wa(i),i}function Wa(t){t=t.toLowerCase();const e=t.split("1",1)[0],[n,r]=Ga(t),s=Ka(r.slice(1),5,8,!1),i=s.length;switch(!0){case e!==n:throw new Error("Returned hrp string is invalid.");case(s===null||i<2||i>40):throw new Error("Decoded string is invalid or out of spec.");case r[0]>16:throw new Error("Returned version bit is out of range.");default:return Uint8Array.from(s)}}function Jh(t){t=t.toLowerCase();const[e,n]=Ga(t);return n[0]}const Bo={encode:Xh,decode:Wa,version:Jh},Ya="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",Qh=new TextEncoder;function Ja(t,e=!1){typeof t=="string"&&(t=Qh.encode(t));const n=e?Xa:Ya;let r="",s=0,i=0;for(let o=0;o<t.length;o++)for(i=i<<8|t[o],s+=8;s>=6;)s-=6,r+=n[i>>s&63];if(s>0)for(i<<=6-s,r+=n[i&63];s<6;)r+=e?"":"=",s+=2;return r}function Qa(t,e=!1){const n=e||t.includes("-")||t.includes("_")?Xa.split(""):Ya.split("");t=t.replace(/=+$/,"");const r=t.split("");let s=0,i=0;const o=[];for(let a=0;a<r.length;a++){const f=r[a],h=n.indexOf(f);if(h===-1)throw new Error("Invalid character: "+f);s+=6,i<<=6,i|=h,s>=8&&(s-=8,o.push(i>>>s&255))}return new Uint8Array(o)}const _o={encode:Ja,decode:Qa},Io={encode:t=>Ja(t,!0),decode:t=>Qa(t,!0)};var Z;let A=(Z=class extends Uint8Array{constructor(e,n){if(e=Ke(e,!0),typeof n=="number"){const r=new Uint8Array(n).fill(0);r.set(new Uint8Array(e)),e=r.buffer}return super(e),this}get arr(){return[...this]}get num(){return this.toNum()}get big(){return this.toBig()}get str(){return this.toStr()}get hex(){return this.toHex()}get raw(){return new Uint8Array(this)}get bits(){return this.toBits()}get bin(){return this.toBin()}get b58chk(){return this.tob58chk()}get base64(){return this.toBase64()}get b64url(){return this.toB64url()}get digest(){return this.toHash()}get id(){return this.toHash().hex}get stream(){return new Mn(this)}toNum(e="le"){return vo(e==="le"?this.reverse():this)}toBig(e="le"){return Eo(e==="le"?this.reverse():this)}toHash(e="sha256"){switch(e){case"sha256":return new Z(Bn.sha256(this));case"hash256":return new Z(Bn.hash256(this));case"ripe160":return new Z(Bn.ripe160(this));case"hash160":return new Z(Bn.hash160(this));default:throw new Error("Unrecognized format:"+String(e))}}toHmac(e,n="hmac256"){switch(n){case"hmac256":return new Z(Bn.hmac256(e,this));case"hmac512":return new Z(Bn.hmac512(e,this));default:throw new Error("Unrecognized format:"+String(n))}}toStr(){return Rr(this)}toHex(){return Za(this)}toJson(){return JSON.parse(Rr(this))}toBytes(){return new Uint8Array(this)}toBits(){return bo(this)}toBin(){return bo(this).join("")}tob58chk(){return So.encode(this)}toB64url(){return Io.encode(this)}toBase64(){return _o.encode(this)}toBech32(e,n=0){return Bo.encode(this,e,n)}prepend(e){return Z.join([Z.bytes(e),this])}append(e){return Z.join([this,Z.bytes(e)])}slice(e,n){return new Z(new Uint8Array(this).slice(e,n))}subarray(e,n){return new Z(new Uint8Array(this).subarray(e,n))}reverse(){return new Z(new Uint8Array(this).reverse())}write(e,n){this.set(e,n)}prefixSize(e){const n=Z.varInt(this.length,e);return Z.join([n,this])}static from(e){return new Z(Uint8Array.from(e))}static of(...e){return new Z(Uint8Array.of(...e))}static join(e){const n=e.map(r=>Z.bytes(r));return new Z($a(n))}static varInt(e,n){if(e<253)return Z.num(e,1);if(e<65536)return Z.of(253,...Z.num(e,2,n));if(e<4294967296)return Z.of(254,...Z.num(e,4,n));if(BigInt(e)<0x10000000000000000n)return Z.of(255,...Z.num(e,8,n));throw new Error(`Value is too large: ${e}`)}static random(e=32){return new Z(jf(e),e)}static normalize(e,n){return new Z(Ke(e,!0),n)}static hexify(e){return $h(e)}static serialize(e,n){return new Z(Uh(e),n)}static revive(e){return Oh(e)}},(()=>{Z.num=(e,n,r="le")=>{const s=new Z(Fa(e),n);return r==="le"?s.reverse():s}})(),(()=>{Z.big=(e,n,r="le")=>{const s=new Z(ja(e),n);return r==="le"?s.reverse():s}})(),(()=>{Z.bin=(e,n)=>new Z(kh(e),n)})(),(()=>{Z.any=(e,n)=>new Z(Ke(e,!1),n)})(),(()=>{Z.raw=(e,n)=>new Z(e,n)})(),(()=>{Z.str=(e,n)=>new Z(Lr(e),n)})(),(()=>{Z.hex=(e,n)=>new Z(Da(e),n)})(),(()=>{Z.json=e=>new Z(Lr(JSON.stringify(e)))})(),(()=>{Z.bytes=(e,n)=>new Z(Ke(e,!0),n)})(),(()=>{Z.base64=e=>new Z(_o.decode(e))})(),(()=>{Z.b64url=e=>new Z(Io.decode(e))})(),(()=>{Z.bech32=e=>new Z(Bo.decode(e))})(),(()=>{Z.b58chk=e=>new Z(So.decode(e))})(),(()=>{Z.encode=Lr})(),(()=>{Z.decode=Rr})(),Z),Mn=class{constructor(e){this.data=new Uint8Array(e),this.size=this.data.length}peek(e){if(e>this.size)throw new Error(`Size greater than stream: ${e} > ${this.size}`);return new A(this.data.slice(0,e).buffer)}read(e){e=e??this.readSize();const n=this.peek(e);return this.data=this.data.slice(e),this.size=this.data.length,n}readSize(e){const n=this.read(1).num;switch(!0){case(n>=0&&n<253):return n;case n===253:return this.read(2).toNum(e);case n===254:return this.read(4).toNum(e);case n===255:return this.read(8).toNum(e);default:throw new Error(`Varint is out of range: ${n}`)}}};function gt(t,e){const n=A.bytes(t);if(n.length!==e)throw new Error(`Invalid input size: ${n.hex} !== ${e}`)}function Ze(t,e){if(e)throw new Error(t);return!1}function Dr(t,...e){const n=A.str(t).digest.raw,r=e.map(s=>A.normalize(s));return A.join([n,n,A.join(r)]).digest}function ec(t,e="main"){const n=e==="main"?["1"]:["m","n"];for(const r of n)if(t.startsWith(r))return!0;return!1}function tc(t,e="main"){const n=A.bytes(t),r=e==="main"?A.num(0):A.num(111);return gt(t,20),n.prepend(r).tob58chk()}function el(t,e="main"){if(!ec(t,e))throw new TypeError("Invalid p2pkh address!");return A.b58chk(t).slice(1)}function tl(t){const e=A.bytes(t);return gt(e,20),["OP_DUP","OP_HASH160",e.hex,"OP_EQUALVERIFY","OP_CHECKSIG"]}function nl(t,e){const n=A.bytes(t);gt(n,33);const r=n.toHash("hash160");return tc(r,e)}const nc={check:ec,encode:tc,decode:el,scriptPubKey:tl,fromPubKey:nl},rc={OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_SUCCESS80:80,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_SUCCESS98:98,OP_IF:99,OP_NOTIF:100,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_SUCCESS126:126,OP_SUCCESS127:127,OP_SUCCESS128:128,OP_SUCCESS129:129,OP_SIZE:130,OP_SUCCESS131:131,OP_SUCCESS132:132,OP_SUCCESS133:133,OP_SUCCESS134:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_SUCCESS137:137,OP_SUCCESS138:138,OP_1ADD:139,OP_1SUB:140,OP_SUCCESS141:141,OP_SUCCESS142:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_SUCCESS149:149,OP_SUCCESS150:150,OP_SUCCESS151:151,OP_SUCCESS152:152,OP_SUCCESS153:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_CHECKLOCKTIMEVERIFY:177,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKSIGADD:186};function rl(t){if(t>186&&t<255)return"OP_SUCCESS"+String(t);for(const[e,n]of Object.entries(rc))if(n===t)return e;throw new Error("OPCODE not found:"+String(t))}function sl(t){for(const[e,n]of Object.entries(rc))if(e===t)return Number(n);throw new Error("OPCODE not found:"+t)}function il(t){switch(!0){case t===0:return"opcode";case(t>=1&&t<=75):return"varint";case t===76:return"pushdata1";case t===77:return"pushdata2";case t===78:return"pushdata4";case t<=254:return"opcode";default:throw new Error(`Invalid word range: ${t}`)}}function ol(t){const r=[];switch(!0){case typeof t!="number":return!1;case t===0:return!0;case r.includes(t):return!1;case(75<t&&t<254):return!0;default:return!1}}function Pt(t){return typeof t=="string"&&t.length%2===0&&/[0-9a-fA-F]/.test(t)}function sc(t){return Pt(t)||t instanceof Uint8Array}const Yr=520;function En(t=[],e=!0){let n=A.num(0);return Array.isArray(t)&&(n=A.raw(ic(t))),Pt(t)&&(n=A.hex(t)),t instanceof Uint8Array&&(n=A.raw(t)),e&&(n=n.prefixSize("be")),n}function ic(t){const e=[];for(const n of t)e.push(al(n));return e.length>0?A.join(e):new Uint8Array}function al(t){let e=new Uint8Array;if(typeof t=="string"){if(t.startsWith("OP_"))return A.num(sl(t),1);Pt(t)?e=A.hex(t):e=A.str(t)}else if(e=A.bytes(t),e.length===1&&e[0]<=16)return e[0]!==0&&(e[0]+=80),e;if(e.length>Yr){const n=ul(e);return ic(n)}return A.join([cl(e.length),e])}function cl(t){const e=A.num(76,1),n=A.num(77,1);switch(!0){case t<=75:return A.num(t);case(t>75&&t<256):return A.join([e,A.num(t,1)]);case(t>=256&&t<=Yr):return A.join([n,A.num(t,2,"be")]);default:throw new Error("Invalid word size:"+t.toString())}}function ul(t){const e=[],n=new Mn(t);for(;n.size>Yr;)e.push(n.read(Yr));return e.push(n.read(n.size)),e}function Ai(t,e=!1){let n=A.bytes(t);if(e){const s=n.stream.readSize("be");if(n.length!==s)throw new Error(`Varint does not match stream size: ${s} !== ${n.length}`);n=n.slice(1)}return fl(n)}function fl(t){const e=new Mn(t),n=[],r=e.size;let s,i,o,a=0;for(;a<r;)switch(s=e.read(1).num,i=il(s),a++,i){case"varint":n.push(e.read(s).hex),a+=s;break;case"pushdata1":o=e.read(1).reverse().num,n.push(e.read(o).hex),a+=o+1;break;case"pushdata2":o=e.read(2).reverse().num,n.push(e.read(o).hex),a+=o+2;break;case"pushdata4":o=e.read(4).reverse().num,n.push(e.read(o).hex),a+=o+4;break;case"opcode":if(!ol(s))throw new Error(`Invalid OPCODE: ${s}`);n.push(rl(s));break;default:throw new Error(`Word type undefined: ${s}`)}return n}function hl(t,e){if(Array.isArray(t)&&(t=En(t,e)),t instanceof Uint8Array||Pt(t))return Ai(t,e);throw new Error("Invalid format: "+typeof t)}function ll(t,e){if((t instanceof Uint8Array||Pt(t))&&(t=Ai(t,e)),Array.isArray(t))return En(t,e);throw new Error("Invalid format: "+typeof t)}function dl(t){if(!Array.isArray(t))return A.bytes(t);throw new Error("Invalid format: "+typeof t)}const pl={toAsm:hl,toBytes:ll,toParam:dl},Fe={encode:En,decode:Ai,fmt:pl};function oc(t,e="main"){const n=e==="main"?["3"]:["2"];for(const r of n)if(t.startsWith(r))return!0;return!1}function ac(t,e="main"){const n=e==="main"?A.num(5):A.num(196),r=A.bytes(t);return gt(r,20),r.prepend(n).tob58chk()}function gl(t,e="main"){if(!oc(t,e))throw new TypeError(`Invalid p2sh address for network ${e}:`+t);return A.b58chk(t).slice(1)}function yl(t){return["OP_HASH160",A.bytes(t).hex,"OP_EQUAL"]}function wl(t,e){const n=Fe.fmt.toBytes(t,!1);return ac(n.toHash("hash160"),e)}const cc={check:oc,encode:ac,decode:gl,scriptPubKey:yl,fromScript:wl},Si={main:"bc",testnet:"tb",signet:"tb",regtest:"bcrt"},xl=["bc1q","tb1q","bcrt1q"];function uc(t){for(const e of xl)if(t.startsWith(e))return!0;return!1}function fc(t,e="main"){const n=Si[e],r=A.bytes(t);return gt(r,20),r.toBech32(n,0)}function ml(t){if(!uc(t))throw new TypeError("Invalid segwit address!");return A.bech32(t)}function bl(t){const e=A.bytes(t);return gt(e,20),["OP_0",e.hex]}function vl(t,e){const n=A.bytes(t);gt(n,33);const r=n.toHash("hash160");return fc(r,e)}const hc={check:uc,encode:fc,decode:ml,scriptPubKey:bl,fromPubKey:vl},El=["bc1q","tb1q","bcrt1q"];function lc(t){for(const e of El)if(t.startsWith(e))return!0;return!1}function dc(t,e="main"){const n=Si[e],r=A.bytes(t);return gt(r,32),r.toBech32(n,0)}function Al(t){if(!lc(t))throw new TypeError("Invalid segwit address!");return A.bech32(t)}function Sl(t){const e=A.bytes(t);return gt(e,32),["OP_0",e.hex]}function Bl(t,e){const r=Fe.fmt.toBytes(t,!1).toHash("sha256");return dc(r,e)}const pc={check:lc,encode:dc,decode:Al,scriptPubKey:Sl,fromScript:Bl};function wn(t){const e=A.bytes(t);return e.length>32?e.slice(1,33):e}const _l=["bc1p","tb1p","bcrt1p"];function gc(t){for(const e of _l)if(t.startsWith(e))return!0;return!1}function yc(t,e="main"){const n=Si[e],r=A.bytes(t);return gt(r,32),r.toBech32(n,1)}function Il(t){if(!gc(t))throw new TypeError("Invalid taproot address!");return A.bech32(t)}function Tl(t){const e=A.bytes(t);return gt(e,32),["OP_1",e.hex]}function kl(t,e){const n=wn(t);return yc(n,e)}const wc={check:gc,encode:yc,decode:Il,scriptPubKey:Tl,fromPubKey:kl},$l={version:2,vin:[],vout:[],locktime:0},Ul={scriptSig:[],sequence:4294967293,witness:[]},Ol={value:0n,scriptPubKey:[]};function Bi(t){const e={...$l,...t};return e.vin=e.vin.map(n=>({...Ul,...n})),e.vout=e.vout.map(n=>({...Ol,...n})),e}function gs(t,e){const{version:n,vin:r,vout:s,locktime:i}=Bi(t),o=e!==!0&&Pl(r),a=[_i(n)];o&&a.push(A.hex("0001")),a.push(Cl(r)),a.push(Hl(s));for(const f of r)o&&a.push(Ll(f.witness));return a.push(Ii(i)),A.join(a)}function Pl(t){for(const e of t){const{witness:n}=e;if(typeof n=="string"||n instanceof Uint8Array||Array.isArray(n)&&n.length>0)return!0}return!1}function _i(t){return A.num(t,4).reverse()}function pr(t){return A.hex(t,32).reverse()}function gr(t){return A.num(t,4).reverse()}function yr(t=4294967293){return A.bytes(t).reverse()}function Cl(t){const e=[A.varInt(t.length)];for(const n of t){const{txid:r,vout:s,scriptSig:i,sequence:o}=n;e.push(pr(r)),e.push(gr(s)),e.push(En(i,!0)),e.push(yr(o))}return A.join(e)}function nn(t){if(typeof t=="number"){if(t%1!==0)throw new Error("Value must be an integer:"+String(t));return A.num(t,8).reverse()}return A.big(t,8).reverse()}function Hl(t){const e=[A.varInt(t.length)];for(const n of t)e.push(Nl(n));return A.join(e)}function Nl(t){const{value:e,scriptPubKey:n}=t,r=[];return r.push(nn(e)),r.push(En(n,!0)),A.join(r)}function Ll(t=[]){const e=[];if(Array.isArray(t)){const n=A.varInt(t.length);e.push(n);for(const r of t)e.push(Rl(r));return A.join(e)}else return A.normalize(t)}function Rl(t){return Dl(t)?new A(0):En(t,!0)}function Dl(t){if(Array.isArray(t))return t.length===0;if(typeof t=="string"&&t==="")return!0;const e=A.bytes(t);return e.length===1&&e[0]===0}function Ii(t){if(typeof t=="string")return A.hex(t,4);if(typeof t=="number")return A.num(t,4).reverse();throw new Error("Unrecognized format: "+String(t))}function Ti(t){typeof t=="string"&&(t=A.hex(t).raw);const e=new Mn(t),n=Fl(e),r=jl(e),s=Zl(e),i=zl(e);if(r)for(const a of s)a.witness=ql(e);const o=Kl(e);return{version:n,vin:s,vout:i,locktime:o}}function Fl(t){return t.read(4).reverse().toNum()}function jl(t){const[e,n]=[...t.peek(2)];if(e===0){if(t.read(2),n===1)return!0;throw new Error(`Invalid witness flag: ${n}`)}return!1}function Zl(t){const e=[],n=t.readSize();for(let r=0;r<n;r++)e.push(Ml(t));return e}function Ml(t){return{txid:t.read(32).reverse().toHex(),vout:t.read(4).reverse().toNum(),scriptSig:mc(t,!0),sequence:t.read(4).reverse().toHex(),witness:[]}}function zl(t){const e=[],n=t.readSize();for(let r=0;r<n;r++)e.push(Vl(t));return e}function Vl(t){return{value:t.read(8).reverse().big,scriptPubKey:mc(t,!0)}}function ql(t){const e=[],n=t.readSize();for(let r=0;r<n;r++){const s=xc(t,!0);e.push(s??"")}return e}function xc(t,e){const n=e===!0?t.readSize("be"):t.size;return n>0?t.read(n).hex:null}function mc(t,e){const n=xc(t,e);return n!==null?n:[]}function Kl(t){return t.read(4).reverse().toNum()}function Gl(t){if(sc(t))return Ti(t);if(typeof t=="object"&&!(t instanceof Uint8Array))return gs(t),Bi(t);throw new Error("Invalid format: "+typeof t)}function Wl(t){if(sc(t))return Ti(t),A.bytes(t);if(typeof t=="object")return gs(t);throw new Error("Invalid format: "+typeof t)}const bc={toBytes:Wl,toJson:Gl},Yl=[["p2pkh",/^76a914(?<hash>\w{40})88ac$/],["p2sh",/^a914(?<hash>\w{40})87$/],["p2w-pkh",/^0014(?<hash>\w{40})$/],["p2w-sh",/^0020(?<hash>\w{64})$/],["p2tr",/^5120(?<hash>\w{64})$/]],Xl=[192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,254,102,126,128,132,150,152,186,188,190];function Jl(t){let e=t.at(-1);return Pt(e)&&(e=A.hex(e)),t.length>1&&e instanceof Uint8Array&&e[0]===80?(t.pop(),A.raw(e)):null}function Ql(t){let e=t.at(-1);return Pt(e)&&(e=A.hex(e)),t.length>1&&e instanceof Uint8Array&&e.length>32&&Xl.includes(e[0]&254)?(t.pop(),A.raw(e)):null}function e0(t){if(t.length>1){const e=t.at(-1);try{const n=Fe.fmt.toBytes(e);return t.pop(),n}catch{return null}}return null}function t0(t){const e=[];for(const n of t)(Pt(n)||n instanceof Uint8Array)&&e.push(n);return e}function n0(t=[]){const e=[...t],n=Jl(e),r=Ql(e),s=e0(e),i=t0(e);return{annex:n,cblock:r,script:s,params:i}}function r0(t){const e=Fe.fmt.toBytes(t,!1).hex;for(const[n,r]of Yl){const s=n,{groups:i}=r.exec(e)??{},{hash:o}=i??{};if(Pt(o))return{type:s,data:A.hex(o)}}return{type:"raw",data:A.hex(e)}}function s0(t){const e=bc.toJson(t);return gs(e,!0).toHash("hash256").reverse().hex}const st={create:Bi,encode:gs,decode:Ti,fmt:bc,util:{getTxid:s0,readScriptPubKey:r0,readWitness:n0}},i0=[["1","p2pkh","main",20,"base58"],["3","p2sh","main",20,"base58"],["m","p2pkh","testnet",20,"base58"],["n","p2pkh","testnet",20,"base58"],["2","p2sh","testnet",20,"base58"],["bc1q","p2w-pkh","main",20,"bech32"],["tb1q","p2w-pkh","testnet",20,"bech32"],["bcrt1q","p2w-pkh","regtest",20,"bech32"],["bc1q","p2w-sh","main",32,"bech32"],["tb1q","p2w-sh","testnet",32,"bech32"],["bcrt1q","p2w-sh","regtest",32,"bech32"],["bc1p","p2tr","main",32,"bech32m"],["tb1p","p2tr","testnet",32,"bech32m"],["bcrt1p","p2tr","regtest",32,"bech32m"]];function o0(t,e){switch(e){case"base58":return A.b58chk(t).slice(1);case"bech32":return A.bech32(t);case"bech32m":return A.bech32(t);default:throw new Error("Invalid address format: "+e)}}function a0(t){for(const e of i0){const[n,r,s,i,o]=e;if(t.startsWith(n)&&o0(t,o).length===i)return e}throw new Error("Invalid address: "+t)}function vc(t){switch(t){case"p2pkh":return nc;case"p2sh":return cc;case"p2w-pkh":return hc;case"p2w-sh":return pc;case"p2tr":return wc;default:throw new Error("Invalid address type: "+t)}}function Ec(t){const[e,n,r]=a0(t),s=vc(n),i=s.decode(t,r),o=s.scriptPubKey(i);return{prefix:e,type:n,network:r,data:i,script:o}}function c0(t,e){const{type:n,data:r}=st.util.readScriptPubKey(t);return vc(n).encode(r,e)}function u0(t){const{script:e}=Ec(t);return Fe.fmt.toAsm(e,!1)}const $r={p2pkh:nc,p2sh:cc,p2wpkh:hc,p2wsh:pc,p2tr:wc,decode:Ec,fromScriptPubKey:c0,toScriptPubKey:u0},f0=[1,2,3];function ki(t,e,n={}){const{sigflag:r=1}=n,s=(r&128)===128,i=r%128;if(!f0.includes(i))throw new Error("Invalid hash type: "+String(r));const o=st.fmt.toJson(t),{version:a,vin:f,vout:h,locktime:l}=o,{txid:p,vout:y,prevout:w,sequence:b}=f[e],{value:x}=w??{};if(x===void 0)throw new Error("Prevout value is empty!");let v=n.script;if(v===void 0&&n.pubkey!==void 0&&(v=`76a914${A.bytes(n.pubkey).toHash("hash160").hex}88ac`),v===void 0)throw new Error("No pubkey / script has been set!");if(Fe.fmt.toAsm(v).includes("OP_CODESEPARATOR"))throw new Error("This library does not currently support the use of OP_CODESEPARATOR in segwit scripts.");const S=[_i(a),h0(f,s),l0(f,i,s),pr(p),gr(y),Fe.encode(v,!0),nn(x),yr(b),d0(h,e,i),Ii(l),A.num(r,4).reverse()];return A.join(S).toHash("hash256")}function h0(t,e){if(e===!0)return A.num(0,32);const n=[];for(const{txid:r,vout:s}of t)n.push(pr(r)),n.push(gr(s));return A.join(n).toHash("hash256")}function l0(t,e,n){if(n||e!==1)return A.num(0,32);const r=[];for(const{sequence:s}of t)r.push(yr(s));return A.join(r).toHash("hash256")}function d0(t,e,n){const r=[];if(n===1){for(const{value:s,scriptPubKey:i}of t)r.push(nn(s)),r.push(Fe.encode(i,!0));return A.join(r).toHash("hash256")}if(n===3&&e<t.length){const{value:s,scriptPubKey:i}=t[e];return r.push(nn(s)),r.push(Fe.encode(i,!0)),A.join(r).toHash("hash256")}return A.num(0,32)}function Vs(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function p0(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}function Ac(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function g0(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Vs(t.outputLen),Vs(t.blockLen)}function y0(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function w0(t,e){Ac(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const x0={number:Vs,bool:p0,bytes:Ac,hash:g0,exists:y0,output:w0};var hn=x0;const Us=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Os=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),mt=(t,e)=>t<<32-e|t>>>e,m0=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!m0)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function b0(t){if(typeof t!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof t}`);return new TextEncoder().encode(t)}function $i(t){if(typeof t=="string"&&(t=b0(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}function v0(...t){if(!t.every(r=>r instanceof Uint8Array))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];const e=t.reduce((r,s)=>r+s.length,0),n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let Sc=class{clone(){return this._cloneInto()}};function Bc(t){const e=r=>t().update($i(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function _c(t=32){if(Us&&typeof Us.getRandomValues=="function")return Us.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function E0(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),f=r?4:0,h=r?0:4;t.setUint32(e+f,o,r),t.setUint32(e+h,a,r)}let A0=class extends Sc{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Os(this.buffer)}update(e){hn.exists(this);const{view:n,buffer:r,blockLen:s}=this;e=$i(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const f=Os(e);for(;s<=i-o;o+=s)this.process(f,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){hn.exists(this),hn.output(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let p=o;p<s;p++)n[p]=0;E0(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Os(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=f/4,l=this.get();if(h>l.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<h;p++)a.setUint32(4*p,l[p],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const S0=(t,e,n)=>t&e^~t&n,B0=(t,e,n)=>t&e^t&n^e&n,_0=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Dt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ft=new Uint32Array(64);let Ic=class extends A0{constructor(){super(64,32,8,!1),this.A=Dt[0]|0,this.B=Dt[1]|0,this.C=Dt[2]|0,this.D=Dt[3]|0,this.E=Dt[4]|0,this.F=Dt[5]|0,this.G=Dt[6]|0,this.H=Dt[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:f}=this;return[e,n,r,s,i,o,a,f]}set(e,n,r,s,i,o,a,f){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=f|0}process(e,n){for(let p=0;p<16;p++,n+=4)Ft[p]=e.getUint32(n,!1);for(let p=16;p<64;p++){const y=Ft[p-15],w=Ft[p-2],b=mt(y,7)^mt(y,18)^y>>>3,x=mt(w,17)^mt(w,19)^w>>>10;Ft[p]=x+Ft[p-7]+b+Ft[p-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:f,G:h,H:l}=this;for(let p=0;p<64;p++){const y=mt(a,6)^mt(a,11)^mt(a,25),w=l+y+S0(a,f,h)+_0[p]+Ft[p]|0,x=(mt(r,2)^mt(r,13)^mt(r,22))+B0(r,s,i)|0;l=h,h=f,f=a,a=o+w|0,o=i,i=s,s=r,r=w+x|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,f=f+this.F|0,h=h+this.G|0,l=l+this.H|0,this.set(r,s,i,o,a,f,h,l)}roundClean(){Ft.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},I0=class extends Ic{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const Xr=Bc(()=>new Ic);Bc(()=>new I0);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const T0=BigInt(0),Ui=BigInt(1),k0=BigInt(2),ys=t=>t instanceof Uint8Array,$0=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ln(t){if(!ys(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=$0[t[n]];return e}function Tc(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function Oi(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function Rn(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(t.length%2)throw new Error("hex string is invalid: unpadded "+t.length);const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const r=n*2,s=t.slice(r,r+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("invalid byte sequence");e[n]=i}return e}function Ye(t){return Oi(Ln(t))}function Pi(t){if(!ys(t))throw new Error("Uint8Array expected");return Oi(Ln(Uint8Array.from(t).reverse()))}const tn=(t,e)=>Rn(t.toString(16).padStart(e*2,"0")),kc=(t,e)=>tn(t,e).reverse(),U0=t=>Rn(Tc(t));function Le(t,e,n){let r;if(typeof e=="string")try{r=Rn(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(ys(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${t} expected ${n} bytes, got ${s}`);return r}function tt(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!ys(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function O0(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function ws(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new TextEncoder().encode(t)}function P0(t){let e;for(e=0;t>0n;t>>=Ui,e+=1);return e}const C0=(t,e)=>t>>BigInt(e)&1n,H0=(t,e,n)=>t|(n?Ui:T0)<<BigInt(e),Ci=t=>(k0<<BigInt(t-1))-Ui,Ps=t=>new Uint8Array(t),To=t=>Uint8Array.from(t);function $c(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Ps(t),s=Ps(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...p)=>n(s,r,...p),f=(p=Ps())=>{s=a(To([0]),p),r=a(),p.length!==0&&(s=a(To([1]),p),r=a())},h=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let p=0;const y=[];for(;p<e;){r=a();const w=r.slice();y.push(w),p+=r.length}return tt(...y)};return(p,y)=>{o(),f(p);let w;for(;!(w=y(h()));)f();return o(),w}}const N0={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function zn(t,e,n={}){const r=(s,i,o)=>{const a=N0[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const f=t[s];if(!(o&&f===void 0)&&!a(f,t))throw new Error(`Invalid param ${String(s)}=${f} (${typeof f}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}var L0=Object.freeze({__proto__:null,bitGet:C0,bitLen:P0,bitMask:Ci,bitSet:H0,bytesToHex:Ln,bytesToNumberBE:Ye,bytesToNumberLE:Pi,concatBytes:tt,createHmacDrbg:$c,ensureBytes:Le,equalBytes:O0,hexToBytes:Rn,hexToNumber:Oi,numberToBytesBE:tn,numberToBytesLE:kc,numberToHexUnpadded:Tc,numberToVarBytesBE:U0,utf8ToBytes:ws,validateObject:zn});/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ne=BigInt(0),ke=BigInt(1),un=BigInt(2),R0=BigInt(3),qs=BigInt(4),ko=BigInt(5),$o=BigInt(8);BigInt(9);BigInt(16);function He(t,e){const n=t%e;return n>=Ne?n:e+n}function D0(t,e,n){if(n<=Ne||e<Ne)throw new Error("Expected power/modulo > 0");if(n===ke)return Ne;let r=ke;for(;e>Ne;)e&ke&&(r=r*t%n),t=t*t%n,e>>=ke;return r}function ot(t,e,n){let r=t;for(;e-- >Ne;)r*=r,r%=n;return r}function Ks(t,e){if(t===Ne||e<=Ne)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=He(t,e),r=e,s=Ne,i=ke;for(;n!==Ne;){const a=r/n,f=r%n,h=s-i*a;r=n,n=f,s=i,i=h}if(r!==ke)throw new Error("invert: does not exist");return He(s,e)}function F0(t){const e=(t-ke)/un;let n,r,s;for(n=t-ke,r=0;n%un===Ne;n/=un,r++);for(s=un;s<t&&D0(s,e,t)!==t-ke;s++);if(r===1){const o=(t+ke)/qs;return function(f,h){const l=f.pow(h,o);if(!f.eql(f.sqr(l),h))throw new Error("Cannot find square root");return l}}const i=(n+ke)/un;return function(a,f){if(a.pow(f,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let h=r,l=a.pow(a.mul(a.ONE,s),n),p=a.pow(f,i),y=a.pow(f,n);for(;!a.eql(y,a.ONE);){if(a.eql(y,a.ZERO))return a.ZERO;let w=1;for(let x=a.sqr(y);w<h&&!a.eql(x,a.ONE);w++)x=a.sqr(x);const b=a.pow(l,ke<<BigInt(h-w-1));l=a.sqr(b),p=a.mul(p,b),y=a.mul(y,l),h=w}return p}}function j0(t){if(t%qs===R0){const e=(t+ke)/qs;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%$o===ko){const e=(t-ko)/$o;return function(r,s){const i=r.mul(s,un),o=r.pow(i,e),a=r.mul(s,o),f=r.mul(r.mul(a,un),o),h=r.mul(a,r.sub(f,r.ONE));if(!r.eql(r.sqr(h),s))throw new Error("Cannot find square root");return h}}return F0(t)}const Z0=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Uc(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Z0.reduce((r,s)=>(r[s]="function",r),e);return zn(t,n)}function M0(t,e,n){if(n<Ne)throw new Error("Expected power > 0");if(n===Ne)return t.ONE;if(n===ke)return e;let r=t.ONE,s=e;for(;n>Ne;)n&ke&&(r=t.mul(r,s)),s=t.sqr(s),n>>=ke;return r}function z0(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function Hi(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function V0(t,e,n=!1,r={}){if(t<=Ne)throw new Error(`Expected Fp ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=Hi(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=j0(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:Ci(s),ZERO:Ne,ONE:ke,create:f=>He(f,t),isValid:f=>{if(typeof f!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof f}`);return Ne<=f&&f<t},is0:f=>f===Ne,isOdd:f=>(f&ke)===ke,neg:f=>He(-f,t),eql:(f,h)=>f===h,sqr:f=>He(f*f,t),add:(f,h)=>He(f+h,t),sub:(f,h)=>He(f-h,t),mul:(f,h)=>He(f*h,t),pow:(f,h)=>M0(a,f,h),div:(f,h)=>He(f*Ks(h,t),t),sqrN:f=>f*f,addN:(f,h)=>f+h,subN:(f,h)=>f-h,mulN:(f,h)=>f*h,inv:f=>Ks(f,t),sqrt:r.sqrt||(f=>o(a,f)),invertBatch:f=>z0(a,f),cmov:(f,h,l)=>l?h:f,toBytes:f=>n?kc(f,i):tn(f,i),fromBytes:f=>{if(f.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${f.length}`);return n?Pi(f):Ye(f)}});return Object.freeze(a)}function q0(t,e,n=!1){t=Le("privateHash",t);const r=t.length,s=Hi(e).nByteLength+8;if(s<24||r<s||r>1024)throw new Error(`hashToPrivateScalar: expected ${s}-1024 bytes of input, got ${r}`);const i=n?Pi(t):Ye(t);return He(i,e-ke)+ke}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const K0=BigInt(0),Cs=BigInt(1);function G0(t,e){const n=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>K0;)i&Cs&&(o=o.add(a)),a=a.double(),i>>=Cs;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=r(i),f=[];let h=s,l=h;for(let p=0;p<o;p++){l=h,f.push(l);for(let y=1;y<a;y++)l=l.add(h),f.push(l);h=l.double()}return f},wNAF(s,i,o){const{windows:a,windowSize:f}=r(s);let h=t.ZERO,l=t.BASE;const p=BigInt(2**s-1),y=2**s,w=BigInt(s);for(let b=0;b<a;b++){const x=b*f;let v=Number(o&p);o>>=w,v>f&&(v-=y,o+=Cs);const S=x,_=x+Math.abs(v)-1,B=b%2!==0,P=v<0;v===0?l=l.add(n(B,i[S])):h=h.add(n(P,i[_]))}return{p:h,f:l}},wNAFCached(s,i,o,a){const f=s._WINDOW_SIZE||1;let h=i.get(s);return h||(h=this.precomputeWindow(s,f),f!==1&&i.set(s,a(h))),this.wNAF(f,h,o)}}}function Oc(t){return Uc(t.Fp),zn(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Hi(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function W0(t){const e=Oc(t);zn(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:Y0,hexToBytes:X0}=L0,ln={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=ln;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]===0&&r[1]<=127)throw new e("Invalid signature integer: trailing length");return{d:Y0(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=ln,n=typeof t=="string"?X0(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=ln._parseInt(n.subarray(2)),{d:o,l:a}=ln._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=h=>Number.parseInt(h[0],16)>=8?"00"+h:h,n=h=>{const l=h.toString(16);return l.length&1?`0${l}`:l},r=e(n(t.s)),s=e(n(t.r)),i=r.length/2,o=s.length/2,a=n(i),f=n(o);return`30${n(o+i+4)}02${f}${s}02${a}${r}`}},ut=BigInt(0),Ce=BigInt(1),It=BigInt(2),Jr=BigInt(3),Uo=BigInt(4);function J0(t){const e=W0(t),{Fp:n}=e,r=e.toBytes||((b,x,v)=>{const S=x.toAffine();return tt(Uint8Array.from([4]),n.toBytes(S.x),n.toBytes(S.y))}),s=e.fromBytes||(b=>{const x=b.subarray(1),v=n.fromBytes(x.subarray(0,n.BYTES)),S=n.fromBytes(x.subarray(n.BYTES,2*n.BYTES));return{x:v,y:S}});function i(b){const{a:x,b:v}=e,S=n.sqr(b),_=n.mul(S,b);return n.add(n.add(_,n.mul(b,x)),v)}function o(b){return typeof b=="bigint"&&ut<b&&b<e.n}function a(b){if(!o(b))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function f(b){const{allowedPrivateKeyLengths:x,nByteLength:v,wrapPrivateKey:S,n:_}=e;if(x&&typeof b!="bigint"){if(b instanceof Uint8Array&&(b=Ln(b)),typeof b!="string"||!x.includes(b.length))throw new Error("Invalid key");b=b.padStart(v*2,"0")}let B;try{B=typeof b=="bigint"?b:Ye(Le("private key",b,v))}catch{throw new Error(`private key must be ${v} bytes, hex or bigint, not ${typeof b}`)}return S&&(B=He(B,_)),a(B),B}const h=new Map;function l(b){if(!(b instanceof p))throw new Error("ProjectivePoint expected")}class p{constructor(x,v,S){if(this.px=x,this.py=v,this.pz=S,x==null||!n.isValid(x))throw new Error("x required");if(v==null||!n.isValid(v))throw new Error("y required");if(S==null||!n.isValid(S))throw new Error("z required")}static fromAffine(x){const{x:v,y:S}=x||{};if(!x||!n.isValid(v)||!n.isValid(S))throw new Error("invalid affine point");if(x instanceof p)throw new Error("projective point not allowed");const _=B=>n.eql(B,n.ZERO);return _(v)&&_(S)?p.ZERO:new p(v,S,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(x){const v=n.invertBatch(x.map(S=>S.pz));return x.map((S,_)=>S.toAffine(v[_])).map(p.fromAffine)}static fromHex(x){const v=p.fromAffine(s(Le("pointHex",x)));return v.assertValidity(),v}static fromPrivateKey(x){return p.BASE.multiply(f(x))}_setWindowSize(x){this._WINDOW_SIZE=x,h.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x,y:v}=this.toAffine();if(!n.isValid(x)||!n.isValid(v))throw new Error("bad point: x or y not FE");const S=n.sqr(v),_=i(x);if(!n.eql(S,_))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:x}=this.toAffine();if(n.isOdd)return!n.isOdd(x);throw new Error("Field doesn't support isOdd")}equals(x){l(x);const{px:v,py:S,pz:_}=this,{px:B,py:P,pz:T}=x,U=n.eql(n.mul(v,T),n.mul(B,_)),C=n.eql(n.mul(S,T),n.mul(P,_));return U&&C}negate(){return new p(this.px,n.neg(this.py),this.pz)}double(){const{a:x,b:v}=e,S=n.mul(v,Jr),{px:_,py:B,pz:P}=this;let T=n.ZERO,U=n.ZERO,C=n.ZERO,$=n.mul(_,_),N=n.mul(B,B),j=n.mul(P,P),V=n.mul(_,B);return V=n.add(V,V),C=n.mul(_,P),C=n.add(C,C),T=n.mul(x,C),U=n.mul(S,j),U=n.add(T,U),T=n.sub(N,U),U=n.add(N,U),U=n.mul(T,U),T=n.mul(V,T),C=n.mul(S,C),j=n.mul(x,j),V=n.sub($,j),V=n.mul(x,V),V=n.add(V,C),C=n.add($,$),$=n.add(C,$),$=n.add($,j),$=n.mul($,V),U=n.add(U,$),j=n.mul(B,P),j=n.add(j,j),$=n.mul(j,V),T=n.sub(T,$),C=n.mul(j,N),C=n.add(C,C),C=n.add(C,C),new p(T,U,C)}add(x){l(x);const{px:v,py:S,pz:_}=this,{px:B,py:P,pz:T}=x;let U=n.ZERO,C=n.ZERO,$=n.ZERO;const N=e.a,j=n.mul(e.b,Jr);let V=n.mul(v,B),Y=n.mul(S,P),ie=n.mul(_,T),ce=n.add(v,S),k=n.add(B,P);ce=n.mul(ce,k),k=n.add(V,Y),ce=n.sub(ce,k),k=n.add(v,_);let O=n.add(B,T);return k=n.mul(k,O),O=n.add(V,ie),k=n.sub(k,O),O=n.add(S,_),U=n.add(P,T),O=n.mul(O,U),U=n.add(Y,ie),O=n.sub(O,U),$=n.mul(N,k),U=n.mul(j,ie),$=n.add(U,$),U=n.sub(Y,$),$=n.add(Y,$),C=n.mul(U,$),Y=n.add(V,V),Y=n.add(Y,V),ie=n.mul(N,ie),k=n.mul(j,k),Y=n.add(Y,ie),ie=n.sub(V,ie),ie=n.mul(N,ie),k=n.add(k,ie),V=n.mul(Y,k),C=n.add(C,V),V=n.mul(O,k),U=n.mul(ce,U),U=n.sub(U,V),V=n.mul(ce,Y),$=n.mul(O,$),$=n.add($,V),new p(U,C,$)}subtract(x){return this.add(x.negate())}is0(){return this.equals(p.ZERO)}wNAF(x){return w.wNAFCached(this,h,x,v=>{const S=n.invertBatch(v.map(_=>_.pz));return v.map((_,B)=>_.toAffine(S[B])).map(p.fromAffine)})}multiplyUnsafe(x){const v=p.ZERO;if(x===ut)return v;if(a(x),x===Ce)return this;const{endo:S}=e;if(!S)return w.unsafeLadder(this,x);let{k1neg:_,k1:B,k2neg:P,k2:T}=S.splitScalar(x),U=v,C=v,$=this;for(;B>ut||T>ut;)B&Ce&&(U=U.add($)),T&Ce&&(C=C.add($)),$=$.double(),B>>=Ce,T>>=Ce;return _&&(U=U.negate()),P&&(C=C.negate()),C=new p(n.mul(C.px,S.beta),C.py,C.pz),U.add(C)}multiply(x){a(x);let v=x,S,_;const{endo:B}=e;if(B){const{k1neg:P,k1:T,k2neg:U,k2:C}=B.splitScalar(v);let{p:$,f:N}=this.wNAF(T),{p:j,f:V}=this.wNAF(C);$=w.constTimeNegate(P,$),j=w.constTimeNegate(U,j),j=new p(n.mul(j.px,B.beta),j.py,j.pz),S=$.add(j),_=N.add(V)}else{const{p:P,f:T}=this.wNAF(v);S=P,_=T}return p.normalizeZ([S,_])[0]}multiplyAndAddUnsafe(x,v,S){const _=p.BASE,B=(T,U)=>U===ut||U===Ce||!T.equals(_)?T.multiplyUnsafe(U):T.multiply(U),P=B(this,v).add(B(x,S));return P.is0()?void 0:P}toAffine(x){const{px:v,py:S,pz:_}=this,B=this.is0();x==null&&(x=B?n.ONE:n.inv(_));const P=n.mul(v,x),T=n.mul(S,x),U=n.mul(_,x);if(B)return{x:n.ZERO,y:n.ZERO};if(!n.eql(U,n.ONE))throw new Error("invZ was invalid");return{x:P,y:T}}isTorsionFree(){const{h:x,isTorsionFree:v}=e;if(x===Ce)return!0;if(v)return v(p,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:x,clearCofactor:v}=e;return x===Ce?this:v?v(p,this):this.multiplyUnsafe(e.h)}toRawBytes(x=!0){return this.assertValidity(),r(p,this,x)}toHex(x=!0){return Ln(this.toRawBytes(x))}}p.BASE=new p(e.Gx,e.Gy,n.ONE),p.ZERO=new p(n.ZERO,n.ONE,n.ZERO);const y=e.nBitLength,w=G0(p,e.endo?Math.ceil(y/2):y);return{CURVE:e,ProjectivePoint:p,normPrivateKeyToScalar:f,weierstrassEquation:i,isWithinCurveOrder:o}}function Q0(t){const e=Oc(t);return zn(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function ed(t){const e=Q0(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(k){return ut<k&&k<n.ORDER}function a(k){return He(k,r)}function f(k){return Ks(k,r)}const{ProjectivePoint:h,normPrivateKeyToScalar:l,weierstrassEquation:p,isWithinCurveOrder:y}=J0({...e,toBytes(k,O,F){const z=O.toAffine(),X=n.toBytes(z.x),ye=tt;return F?ye(Uint8Array.from([O.hasEvenY()?2:3]),X):ye(Uint8Array.from([4]),X,n.toBytes(z.y))},fromBytes(k){const O=k.length,F=k[0],z=k.subarray(1);if(O===s&&(F===2||F===3)){const X=Ye(z);if(!o(X))throw new Error("Point is not on curve");const ye=p(X);let K=n.sqrt(ye);const J=(K&Ce)===Ce;return(F&1)===1!==J&&(K=n.neg(K)),{x:X,y:K}}else if(O===i&&F===4){const X=n.fromBytes(z.subarray(0,n.BYTES)),ye=n.fromBytes(z.subarray(n.BYTES,2*n.BYTES));return{x:X,y:ye}}else throw new Error(`Point of length ${O} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),w=k=>Ln(tn(k,e.nByteLength));function b(k){const O=r>>Ce;return k>O}function x(k){return b(k)?a(-k):k}const v=(k,O,F)=>Ye(k.slice(O,F));class S{constructor(O,F,z){this.r=O,this.s=F,this.recovery=z,this.assertValidity()}static fromCompact(O){const F=e.nByteLength;return O=Le("compactSignature",O,F*2),new S(v(O,0,F),v(O,F,2*F))}static fromDER(O){const{r:F,s:z}=ln.toSig(Le("DER",O));return new S(F,z)}assertValidity(){if(!y(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!y(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(O){return new S(this.r,this.s,O)}recoverPublicKey(O){const{r:F,s:z,recovery:X}=this,ye=C(Le("msgHash",O));if(X==null||![0,1,2,3].includes(X))throw new Error("recovery id invalid");const K=X===2||X===3?F+e.n:F;if(K>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const J=X&1?"03":"02",me=h.fromHex(J+w(K)),le=f(K),ue=a(-ye*le),Ue=a(z*le),Te=h.BASE.multiplyAndAddUnsafe(me,ue,Ue);if(!Te)throw new Error("point at infinify");return Te.assertValidity(),Te}hasHighS(){return b(this.s)}normalizeS(){return this.hasHighS()?new S(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Rn(this.toDERHex())}toDERHex(){return ln.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Rn(this.toCompactHex())}toCompactHex(){return w(this.r)+w(this.s)}}const _={isValidPrivateKey(k){try{return l(k),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const k=e.randomBytes(n.BYTES+8),O=q0(k,r);return tn(O,e.nByteLength)},precompute(k=8,O=h.BASE){return O._setWindowSize(k),O.multiply(BigInt(3)),O}};function B(k,O=!0){return h.fromPrivateKey(k).toRawBytes(O)}function P(k){const O=k instanceof Uint8Array,F=typeof k=="string",z=(O||F)&&k.length;return O?z===s||z===i:F?z===2*s||z===2*i:k instanceof h}function T(k,O,F=!0){if(P(k))throw new Error("first arg must be private key");if(!P(O))throw new Error("second arg must be public key");return h.fromHex(O).multiply(l(k)).toRawBytes(F)}const U=e.bits2int||function(k){const O=Ye(k),F=k.length*8-e.nBitLength;return F>0?O>>BigInt(F):O},C=e.bits2int_modN||function(k){return a(U(k))},$=Ci(e.nBitLength);function N(k){if(typeof k!="bigint")throw new Error("bigint expected");if(!(ut<=k&&k<$))throw new Error(`bigint expected < 2^${e.nBitLength}`);return tn(k,e.nByteLength)}function j(k,O,F=V){if(["recovered","canonical"].some(ze=>ze in F))throw new Error("sign() legacy options not supported");const{hash:z,randomBytes:X}=e;let{lowS:ye,prehash:K,extraEntropy:J}=F;ye==null&&(ye=!0),k=Le("msgHash",k),K&&(k=Le("prehashed msgHash",z(k)));const me=C(k),le=l(O),ue=[N(le),N(me)];if(J!=null){const ze=J===!0?X(n.BYTES):J;ue.push(Le("extraEntropy",ze,n.BYTES))}const Ue=tt(...ue),Te=me;function Oe(ze){const Ve=U(ze);if(!y(Ve))return;const yt=f(Ve),qe=h.BASE.multiply(Ve).toAffine(),Se=a(qe.x);if(Se===ut)return;const je=a(yt*a(Te+Se*le));if(je===ut)return;let xr=(qe.x===Se?0:2)|Number(qe.y&Ce),mr=je;return ye&&b(je)&&(mr=x(je),xr^=1),new S(Se,mr,xr)}return{seed:Ue,k2sig:Oe}}const V={lowS:e.lowS,prehash:!1},Y={lowS:e.lowS,prehash:!1};function ie(k,O,F=V){const{seed:z,k2sig:X}=j(k,O,F);return $c(e.hash.outputLen,e.nByteLength,e.hmac)(z,X)}h.BASE._setWindowSize(8);function ce(k,O,F,z=Y){var qe;const X=k;if(O=Le("msgHash",O),F=Le("publicKey",F),"strict"in z)throw new Error("options.strict was renamed to lowS");const{lowS:ye,prehash:K}=z;let J,me;try{if(typeof X=="string"||X instanceof Uint8Array)try{J=S.fromDER(X)}catch(Se){if(!(Se instanceof ln.Err))throw Se;J=S.fromCompact(X)}else if(typeof X=="object"&&typeof X.r=="bigint"&&typeof X.s=="bigint"){const{r:Se,s:je}=X;J=new S(Se,je)}else throw new Error("PARSE");me=h.fromHex(F)}catch(Se){if(Se.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(ye&&J.hasHighS())return!1;K&&(O=e.hash(O));const{r:le,s:ue}=J,Ue=C(O),Te=f(ue),Oe=a(Ue*Te),ze=a(le*Te),Ve=(qe=h.BASE.multiplyAndAddUnsafe(me,Oe,ze))==null?void 0:qe.toAffine();return Ve?a(Ve.x)===le:!1}return{CURVE:e,getPublicKey:B,getSharedSecret:T,sign:ie,verify:ce,ProjectivePoint:h,Signature:S,utils:_}}function td(t,e){const n=t.ORDER;let r=ut;for(let y=n-Ce;y%It===ut;y/=It)r+=Ce;const s=r,i=(n-Ce)/It**s,o=(i-Ce)/It,a=It**s-Ce,f=It**(s-Ce),h=t.pow(e,i),l=t.pow(e,(i+Ce)/It);let p=(y,w)=>{let b=h,x=t.pow(w,a),v=t.sqr(x);v=t.mul(v,w);let S=t.mul(y,v);S=t.pow(S,o),S=t.mul(S,x),x=t.mul(S,w),v=t.mul(S,y);let _=t.mul(v,x);S=t.pow(_,f);let B=t.eql(S,t.ONE);x=t.mul(v,l),S=t.mul(_,b),v=t.cmov(x,v,B),_=t.cmov(S,_,B);for(let P=s;P>1;P--){let T=It**(P-It),U=t.pow(_,T);const C=t.eql(U,t.ONE);x=t.mul(v,b),b=t.mul(b,b),U=t.mul(_,b),v=t.cmov(x,v,C),_=t.cmov(U,_,C)}return{isValid:B,value:v}};if(t.ORDER%Uo===Jr){const y=(t.ORDER-Jr)/Uo,w=t.sqrt(t.neg(e));p=(b,x)=>{let v=t.sqr(x);const S=t.mul(b,x);v=t.mul(v,S);let _=t.pow(v,y);_=t.mul(_,S);const B=t.mul(_,w),P=t.mul(t.sqr(_),x),T=t.eql(P,b);let U=t.cmov(B,_,T);return{isValid:T,value:U}}}return p}function nd(t,e){if(Uc(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=td(t,e.Z);if(!t.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let s,i,o,a,f,h,l,p;s=t.sqr(r),s=t.mul(s,e.Z),i=t.sqr(s),i=t.add(i,s),o=t.add(i,t.ONE),o=t.mul(o,e.B),a=t.cmov(e.Z,t.neg(i),!t.eql(i,t.ZERO)),a=t.mul(a,e.A),i=t.sqr(o),h=t.sqr(a),f=t.mul(h,e.A),i=t.add(i,f),i=t.mul(i,o),h=t.mul(h,a),f=t.mul(h,e.B),i=t.add(i,f),l=t.mul(s,o);const{isValid:y,value:w}=n(i,h);p=t.mul(s,r),p=t.mul(p,w),l=t.cmov(l,o,y),p=t.cmov(p,w,y);const b=t.isOdd(r)===t.isOdd(p);return p=t.cmov(t.neg(p),p,b),l=t.div(l,a),{x:l,y:p}}}function rd(t){if(t instanceof Uint8Array)return t;if(typeof t=="string")return ws(t);throw new Error("DST must be Uint8Array or string")}const sd=Ye;function Gt(t,e){if(t<0||t>=1<<8*e)throw new Error(`bad I2OSP call: value=${t} length=${e}`);const n=Array.from({length:e}).fill(0);for(let r=e-1;r>=0;r--)n[r]=t&255,t>>>=8;return new Uint8Array(n)}function id(t,e){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[r]^e[r];return n}function Jn(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected")}function Ni(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function od(t,e,n,r){Jn(t),Jn(e),Ni(n),e.length>255&&(e=r(tt(ws("H2C-OVERSIZE-DST-"),e)));const{outputLen:s,blockLen:i}=r,o=Math.ceil(n/s);if(o>255)throw new Error("Invalid xmd length");const a=tt(e,Gt(e.length,1)),f=Gt(0,i),h=Gt(n,2),l=new Array(o),p=r(tt(f,t,h,Gt(0,1),a));l[0]=r(tt(p,Gt(1,1),a));for(let w=1;w<=o;w++){const b=[id(p,l[w-1]),Gt(w+1,1),a];l[w]=r(tt(...b))}return tt(...l).slice(0,n)}function ad(t,e,n,r,s){if(Jn(t),Jn(e),Ni(n),e.length>255){const i=Math.ceil(2*r/8);e=s.create({dkLen:i}).update(ws("H2C-OVERSIZE-DST-")).update(e).digest()}if(n>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return s.create({dkLen:n}).update(t).update(Gt(n,2)).update(e).update(Gt(e.length,1)).digest()}function Oo(t,e,n){zn(n,{DST:"string",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:r,k:s,m:i,hash:o,expand:a,DST:f}=n;Jn(t),Ni(e);const h=rd(f),l=r.toString(2).length,p=Math.ceil((l+s)/8),y=e*i*p;let w;if(a==="xmd")w=od(t,h,y,o);else if(a==="xof")w=ad(t,h,y,s,o);else if(a===void 0)w=t;else throw new Error('expand must be "xmd", "xof" or undefined');const b=new Array(e);for(let x=0;x<e;x++){const v=new Array(i);for(let S=0;S<i;S++){const _=p*(S+x*i),B=w.subarray(_,_+p);v[S]=He(sd(B),r)}b[x]=v}return b}function cd(t,e){const n=e.map(r=>Array.from(r).reverse());return(r,s)=>{const[i,o,a,f]=n.map(h=>h.reduce((l,p)=>t.add(t.mul(l,r),p)));return r=t.div(i,o),s=t.mul(s,t.div(a,f)),{x:r,y:s}}}function ud(t,e,n){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,s){const i=Oo(r,2,{...n,DST:n.DST,...s}),o=t.fromAffine(e(i[0])),a=t.fromAffine(e(i[1])),f=o.add(a).clearCofactor();return f.assertValidity(),f},encodeToCurve(r,s){const i=Oo(r,1,{...n,DST:n.encodeDST,...s}),o=t.fromAffine(e(i[0])).clearCofactor();return o.assertValidity(),o}}}let Pc=class extends Sc{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,hn.hash(e);const r=$i(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return hn.exists(this),this.iHash.update(e),this}digestInto(e){hn.exists(this),hn.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Cc=(t,e,n)=>new Pc(t,e).update(n).digest();Cc.create=(t,e)=>new Pc(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function fd(t){return{hash:t,hmac:(e,...n)=>Cc(t,e,v0(...n)),randomBytes:_c}}function hd(t,e){const n=r=>ed({...t,...fd(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xs=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Qr=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Hc=BigInt(1),es=BigInt(2),Po=(t,e)=>(t+e/es)/e;function Nc(t){const e=xs,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),f=BigInt(88),h=t*t*t%e,l=h*h*t%e,p=ot(l,n,e)*l%e,y=ot(p,n,e)*l%e,w=ot(y,es,e)*h%e,b=ot(w,s,e)*w%e,x=ot(b,i,e)*b%e,v=ot(x,a,e)*x%e,S=ot(v,f,e)*v%e,_=ot(S,a,e)*x%e,B=ot(_,n,e)*l%e,P=ot(B,o,e)*b%e,T=ot(P,r,e)*h%e,U=ot(T,es,e);if(!rn.eql(rn.sqr(U),t))throw new Error("Cannot find square root");return U}const rn=V0(xs,void 0,void 0,{sqrt:Nc}),St=hd({a:BigInt(0),b:BigInt(7),Fp:rn,n:Qr,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=Qr,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Hc*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=Po(i*t,e),f=Po(-r*t,e);let h=He(t-a*n-f*s,e),l=He(-a*r-f*i,e);const p=h>o,y=l>o;if(p&&(h=e-h),y&&(l=e-l),h>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:p,k1:h,k2neg:y,k2:l}}}},Xr),ms=BigInt(0),Lc=t=>typeof t=="bigint"&&ms<t&&t<xs,ld=t=>typeof t=="bigint"&&ms<t&&t<Qr,Co={};function ts(t,...e){let n=Co[t];if(n===void 0){const r=Xr(Uint8Array.from(t,s=>s.charCodeAt(0)));n=tt(r,r),Co[t]=n}return Xr(tt(n,...e))}const Li=t=>t.toRawBytes(!0).slice(1),Gs=t=>tn(t,32),Hs=t=>He(t,xs),Qn=t=>He(t,Qr),Ri=St.ProjectivePoint,dd=(t,e,n)=>Ri.BASE.multiplyAndAddUnsafe(t,e,n);function Ws(t){let e=St.utils.normPrivateKeyToScalar(t),n=Ri.fromPrivateKey(e);return{scalar:n.hasEvenY()?e:Qn(-e),bytes:Li(n)}}function Rc(t){if(!Lc(t))throw new Error("bad x: need 0 < x < p");const e=Hs(t*t),n=Hs(e*t+BigInt(7));let r=Nc(n);r%es!==ms&&(r=Hs(-r));const s=new Ri(t,r,Hc);return s.assertValidity(),s}function Dc(...t){return Qn(Ye(ts("BIP0340/challenge",...t)))}function pd(t){return Ws(t).bytes}function gd(t,e,n=_c(32)){const r=Le("message",t),{bytes:s,scalar:i}=Ws(e),o=Le("auxRand",n,32),a=Gs(i^Ye(ts("BIP0340/aux",o))),f=ts("BIP0340/nonce",a,s,r),h=Qn(Ye(f));if(h===ms)throw new Error("sign failed: k is zero");const{bytes:l,scalar:p}=Ws(h),y=Dc(l,s,r),w=new Uint8Array(64);if(w.set(l,0),w.set(Gs(Qn(p+y*i)),32),!Fc(w,r,s))throw new Error("sign: Invalid signature produced");return w}function Fc(t,e,n){const r=Le("signature",t,64),s=Le("message",e),i=Le("publicKey",n,32);try{const o=Rc(Ye(i)),a=Ye(r.subarray(0,32));if(!Lc(a))return!1;const f=Ye(r.subarray(32,64));if(!ld(f))return!1;const h=Dc(Gs(a),Li(o),s),l=dd(o,f,Qn(-h));return!(!l||!l.hasEvenY()||l.toAffine().x!==a)}catch{return!1}}const Di={getPublicKey:pd,sign:gd,verify:Fc,utils:{randomPrivateKey:St.utils.randomPrivateKey,lift_x:Rc,pointToBytes:Li,numberToBytesBE:tn,bytesToNumberBE:Ye,taggedHash:ts,mod:He}},yd=cd(rn,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(e=>BigInt(e)))),wd=nd(rn,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:rn.create(BigInt("-11"))});ud(St.ProjectivePoint,t=>{const{x:e,y:n}=wd(rn.create(t[0]));return yd(e,n)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:rn.ORDER,m:1,k:128,expand:"xmd",hash:Xr});function jc(t){let e,n=0;const r=t.reduce((i,o)=>i+o.length,0),s=new Uint8Array(r);for(const i of t)for(e=0;e<i.length;n++,e++)s[n]=i[e];return s}function Ys(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function xd(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}function Zc(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function md(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ys(t.outputLen),Ys(t.blockLen)}function bd(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function vd(t,e){Zc(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Ed={number:Ys,bool:xd,bytes:Zc,hash:md,exists:bd,output:vd};var dn=Ed;const Ns=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ls=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),bt=(t,e)=>t<<32-e|t>>>e,Ad=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Ad)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Sd(t){if(typeof t!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof t}`);return new TextEncoder().encode(t)}function Fi(t){if(typeof t=="string"&&(t=Sd(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}let Mc=class{clone(){return this._cloneInto()}};function An(t){const e=r=>t().update(Fi(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Bd(t=32){if(Ns&&typeof Ns.getRandomValues=="function")return Ns.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function _d(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),f=r?4:0,h=r?0:4;t.setUint32(e+f,o,r),t.setUint32(e+h,a,r)}class ji extends Mc{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Ls(this.buffer)}update(e){dn.exists(this);const{view:n,buffer:r,blockLen:s}=this;e=Fi(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const f=Ls(e);for(;s<=i-o;o+=s)this.process(f,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){dn.exists(this),dn.output(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let p=o;p<s;p++)n[p]=0;_d(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Ls(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=f/4,l=this.get();if(h>l.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<h;p++)a.setUint32(4*p,l[p],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}}const Id=(t,e,n)=>t&e^~t&n,Td=(t,e,n)=>t&e^t&n^e&n,kd=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),jt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Zt=new Uint32Array(64);class zc extends ji{constructor(){super(64,32,8,!1),this.A=jt[0]|0,this.B=jt[1]|0,this.C=jt[2]|0,this.D=jt[3]|0,this.E=jt[4]|0,this.F=jt[5]|0,this.G=jt[6]|0,this.H=jt[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:f}=this;return[e,n,r,s,i,o,a,f]}set(e,n,r,s,i,o,a,f){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=f|0}process(e,n){for(let p=0;p<16;p++,n+=4)Zt[p]=e.getUint32(n,!1);for(let p=16;p<64;p++){const y=Zt[p-15],w=Zt[p-2],b=bt(y,7)^bt(y,18)^y>>>3,x=bt(w,17)^bt(w,19)^w>>>10;Zt[p]=x+Zt[p-7]+b+Zt[p-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:f,G:h,H:l}=this;for(let p=0;p<64;p++){const y=bt(a,6)^bt(a,11)^bt(a,25),w=l+y+Id(a,f,h)+kd[p]+Zt[p]|0,x=(bt(r,2)^bt(r,13)^bt(r,22))+Td(r,s,i)|0;l=h,h=f,f=a,a=o+w|0,o=i,i=s,s=r,r=w+x|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,f=f+this.F|0,h=h+this.G|0,l=l+this.H|0,this.set(r,s,i,o,a,f,h,l)}roundClean(){Zt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class $d extends zc{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const er=An(()=>new zc);An(()=>new $d);const Ur=BigInt(2**32-1),Xs=BigInt(32);function Vc(t,e=!1){return e?{h:Number(t&Ur),l:Number(t>>Xs&Ur)}:{h:Number(t>>Xs&Ur)|0,l:Number(t&Ur)|0}}function Ud(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=Vc(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const Od=(t,e)=>BigInt(t>>>0)<<Xs|BigInt(e>>>0),Pd=(t,e,n)=>t>>>n,Cd=(t,e,n)=>t<<32-n|e>>>n,Hd=(t,e,n)=>t>>>n|e<<32-n,Nd=(t,e,n)=>t<<32-n|e>>>n,Ld=(t,e,n)=>t<<64-n|e>>>n-32,Rd=(t,e,n)=>t>>>n-32|e<<64-n,Dd=(t,e)=>e,Fd=(t,e)=>t,jd=(t,e,n)=>t<<n|e>>>32-n,Zd=(t,e,n)=>e<<n|t>>>32-n,Md=(t,e,n)=>e<<n-32|t>>>64-n,zd=(t,e,n)=>t<<n-32|e>>>64-n;function Vd(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const qd=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Kd=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Gd=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Wd=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,Yd=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),Xd=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Jd={fromBig:Vc,split:Ud,toBig:Od,shrSH:Pd,shrSL:Cd,rotrSH:Hd,rotrSL:Nd,rotrBH:Ld,rotrBL:Rd,rotr32H:Dd,rotr32L:Fd,rotlSH:jd,rotlSL:Zd,rotlBH:Md,rotlBL:zd,add:Vd,add3L:qd,add3H:Kd,add4L:Gd,add4H:Wd,add5H:Xd,add5L:Yd};var ne=Jd;const[Qd,ep]=ne.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Mt=new Uint32Array(80),zt=new Uint32Array(80);class bs extends ji{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:f,Eh:h,El:l,Fh:p,Fl:y,Gh:w,Gl:b,Hh:x,Hl:v}=this;return[e,n,r,s,i,o,a,f,h,l,p,y,w,b,x,v]}set(e,n,r,s,i,o,a,f,h,l,p,y,w,b,x,v){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=f|0,this.Eh=h|0,this.El=l|0,this.Fh=p|0,this.Fl=y|0,this.Gh=w|0,this.Gl=b|0,this.Hh=x|0,this.Hl=v|0}process(e,n){for(let B=0;B<16;B++,n+=4)Mt[B]=e.getUint32(n),zt[B]=e.getUint32(n+=4);for(let B=16;B<80;B++){const P=Mt[B-15]|0,T=zt[B-15]|0,U=ne.rotrSH(P,T,1)^ne.rotrSH(P,T,8)^ne.shrSH(P,T,7),C=ne.rotrSL(P,T,1)^ne.rotrSL(P,T,8)^ne.shrSL(P,T,7),$=Mt[B-2]|0,N=zt[B-2]|0,j=ne.rotrSH($,N,19)^ne.rotrBH($,N,61)^ne.shrSH($,N,6),V=ne.rotrSL($,N,19)^ne.rotrBL($,N,61)^ne.shrSL($,N,6),Y=ne.add4L(C,V,zt[B-7],zt[B-16]),ie=ne.add4H(Y,U,j,Mt[B-7],Mt[B-16]);Mt[B]=ie|0,zt[B]=Y|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:f,Dh:h,Dl:l,Eh:p,El:y,Fh:w,Fl:b,Gh:x,Gl:v,Hh:S,Hl:_}=this;for(let B=0;B<80;B++){const P=ne.rotrSH(p,y,14)^ne.rotrSH(p,y,18)^ne.rotrBH(p,y,41),T=ne.rotrSL(p,y,14)^ne.rotrSL(p,y,18)^ne.rotrBL(p,y,41),U=p&w^~p&x,C=y&b^~y&v,$=ne.add5L(_,T,C,ep[B],zt[B]),N=ne.add5H($,S,P,U,Qd[B],Mt[B]),j=$|0,V=ne.rotrSH(r,s,28)^ne.rotrBH(r,s,34)^ne.rotrBH(r,s,39),Y=ne.rotrSL(r,s,28)^ne.rotrBL(r,s,34)^ne.rotrBL(r,s,39),ie=r&i^r&a^i&a,ce=s&o^s&f^o&f;S=x|0,_=v|0,x=w|0,v=b|0,w=p|0,b=y|0,{h:p,l:y}=ne.add(h|0,l|0,N|0,j|0),h=a|0,l=f|0,a=i|0,f=o|0,i=r|0,o=s|0;const k=ne.add3L(j,Y,ce);r=ne.add3H(k,N,V,ie),s=k|0}({h:r,l:s}=ne.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=ne.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:f}=ne.add(this.Ch|0,this.Cl|0,a|0,f|0),{h,l}=ne.add(this.Dh|0,this.Dl|0,h|0,l|0),{h:p,l:y}=ne.add(this.Eh|0,this.El|0,p|0,y|0),{h:w,l:b}=ne.add(this.Fh|0,this.Fl|0,w|0,b|0),{h:x,l:v}=ne.add(this.Gh|0,this.Gl|0,x|0,v|0),{h:S,l:_}=ne.add(this.Hh|0,this.Hl|0,S|0,_|0),this.set(r,s,i,o,a,f,h,l,p,y,w,b,x,v,S,_)}roundClean(){Mt.fill(0),zt.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class tp extends bs{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class np extends bs{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class rp extends bs{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const Zi=An(()=>new bs);An(()=>new tp);An(()=>new np);An(()=>new rp);const sp=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),qc=Uint8Array.from({length:16},(t,e)=>e),ip=qc.map(t=>(9*t+5)%16);let Mi=[qc],zi=[ip];for(let t=0;t<4;t++)for(let e of[Mi,zi])e.push(e[t].map(n=>sp[n]));const Kc=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),op=Mi.map((t,e)=>t.map(n=>Kc[e][n])),ap=zi.map((t,e)=>t.map(n=>Kc[e][n])),cp=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),up=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Or=(t,e)=>t<<e|t>>>32-e;function Ho(t,e,n,r){return t===0?e^n^r:t===1?e&n|~e&r:t===2?(e|~n)^r:t===3?e&r|n&~r:e^(n|~r)}const Pr=new Uint32Array(16);class fp extends ji{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:n,h2:r,h3:s,h4:i}=this;return[e,n,r,s,i]}set(e,n,r,s,i){this.h0=e|0,this.h1=n|0,this.h2=r|0,this.h3=s|0,this.h4=i|0}process(e,n){for(let w=0;w<16;w++,n+=4)Pr[w]=e.getUint32(n,!0);let r=this.h0|0,s=r,i=this.h1|0,o=i,a=this.h2|0,f=a,h=this.h3|0,l=h,p=this.h4|0,y=p;for(let w=0;w<5;w++){const b=4-w,x=cp[w],v=up[w],S=Mi[w],_=zi[w],B=op[w],P=ap[w];for(let T=0;T<16;T++){const U=Or(r+Ho(w,i,a,h)+Pr[S[T]]+x,B[T])+p|0;r=p,p=h,h=Or(a,10)|0,a=i,i=U}for(let T=0;T<16;T++){const U=Or(s+Ho(b,o,f,l)+Pr[_[T]]+v,P[T])+y|0;s=y,y=l,l=Or(f,10)|0,f=o,o=U}}this.set(this.h1+a+l|0,this.h2+h+y|0,this.h3+p+s|0,this.h4+r+o|0,this.h0+i+f|0)}roundClean(){Pr.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const hp=An(()=>new fp);class Gc extends Mc{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,dn.hash(e);const r=Fi(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return dn.exists(this),this.iHash.update(e),this}digestInto(e){dn.exists(this),dn.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Vi=(t,e,n)=>new Gc(t,e).update(n).digest();Vi.create=(t,e)=>new Gc(t,e);const Wc=new TextEncoder,lp=new TextDecoder;function Fr(t){return Wc.encode(t)}function Yc(t){const e=new Uint8Array(t.length/2);let n,r=0;if(t.match(/[^a-fA-f0-9]/)!==null)throw new TypeError("Invalid hex string: "+t);if(t.length%2>0)throw new Error(`Hex string length is uneven: ${t.length}`);for(n=0;n<t.length;n+=2)e[r]=parseInt(t.slice(n,n+2),16),r+=1;return e}function Xc(t){if(t===0)return Uint8Array.of(0);const e=[];for(;t>0;){const n=t&255;e.push(n),t=(t-n)/256}return new Uint8Array(e)}function dp(t){if(typeof t=="string")t=t.split("").map(Number);else if(!Array.isArray(t))throw new Error("Invalid input type: expected a string or an array of numbers.");if(t.length%8!==0)throw new Error(`Binary array is invalid length: ${t.length}`);const e=new Uint8Array(t.length/8);for(let n=0,r=0;n<t.length;n+=8,r++){let s=0;for(let i=0;i<8;i++)s|=t[n+i]<<7-i;e[r]=s}return e}function No(t){const e=new Array(t.length*8);let n=0;for(const r of t){if(r>255)throw new Error(`Invalid byte value: ${r}. Byte values must be between 0 and 255.`);for(let s=7;s>=0;s--,n++)e[n]=r>>s&1}return e}function Jc(t){if(t===0n)return Uint8Array.of(0);const e=[];for(;t>0n;){const n=t&0xffn;e.push(Number(n)),t=(t-n)/256n}return new Uint8Array(e)}function jr(t){return lp.decode(t)}function Qc(t){const e=new Array(t.length);for(let n=0;n<t.length;n++)e.push(t[n].toString(16).padStart(2,"0"));return e.join("")}function Lo(t){let e=0,n;for(n=t.length-1;n>=0;n--)e=e*256+t[n];return Number(e)}function Ro(t){let e=0n,n;for(n=t.length-1;n>=0;n--)e=e*256n+BigInt(t[n]);return BigInt(e)}function Ge(t,e=!0){if(t instanceof ArrayBuffer)return new Uint8Array(t);if(t instanceof Uint8Array)return new Uint8Array(t);switch(typeof t){case"bigint":return Jc(t);case"boolean":return Uint8Array.of(t?1:0);case"number":return Xc(t);case"string":return e?Yc(t):Wc.encode(t);default:throw TypeError("Unsupported format:"+typeof t)}}function pp(t){return t=Ge(t,!0),Qc(t)}function gp(t){if(typeof t=="object"){if(t instanceof Uint8Array)return t;try{return Fr(JSON.stringify(t))}catch{throw TypeError("Object is not serializable.")}}return Ge(t,!1)}function yp(t){if(t instanceof Uint8Array&&(t=jr(t)),typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}function wp(t){return er(Ge(t))}function xp(t){return Zi(Ge(t))}function mp(t){return Zi(Ge(t))}function qi(t){return er(er(Ge(t)))}function bp(t){return hp(er(Ge(t)))}function vp(t,e){return Vi(er,Ge(t),Ge(e))}function Ep(t,e){return Vi(Zi,Ge(t),Ge(e))}const _n={sha256:wp,sha512:xp,ripe160:mp,hash256:qi,hash160:bp,hmac256:vp,hmac512:Ep},Ap=new TextEncoder,Sp=[{name:"base58",charset:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}];function eu(t){for(const e of Sp)if(e.name===t)return e.charset;throw TypeError("Charset does not exist: "+t)}function Bp(t,e,n=!1){typeof t=="string"&&(t=Ap.encode(t));const r=eu(e),s=r.length,i=[];let o="",a,f=0,h,l;for(a=0;a<t.length;a++)for(f=0,h=t[a],o+=h>0||(o.length^a)>0?"":"1";f in i||h>0;)l=i[f],l=l>0?l*256+h:h,h=l/s|0,i[f]=l%s,f++;for(;f-- >0;)o+=r[i[f]];return n&&o.length%4>0?o+"=".repeat(4-o.length%4):o}function _p(t,e){const n=eu(e),r=n.length,s=[],i=[];t=t.replace("=","");let o,a=0,f,h;for(o=0;o<t.length;o++){if(a=0,f=n.indexOf(t[o]),f<0)throw new Error(`Character range out of bounds: ${f}`);for(f>0||(i.length^o)>0||i.push(0);a in s||f>0;)h=s[a],h=h>0?h*r+f:f,f=h>>8,s[a]=h%256,a++}for(;a-- >0;)i.push(s[a]);return new Uint8Array(i)}function Ip(t){const e=qi(t);return jc([t,e.slice(0,4)])}function Tp(t){const e=t.slice(0,-4),n=t.slice(-4);if(qi(e).slice(0,4).toString()!==n.toString())throw new Error("Invalid checksum!");return e}const Do={encode:Bp,decode:_p},Fo={encode:t=>{const e=Ip(t);return Do.encode(e,"base58")},decode:t=>{const e=Do.decode(t,"base58");return Tp(e)}},tu="qpzry9x8gf2tvdw0s3jn54khce6mua7l",kp=[996825010,642813549,513874426,1027748829,705979059],ns=[{version:0,name:"bech32",const:1},{version:1,name:"bech32m",const:734539939}];function nu(t){let e=1;for(let n=0;n<t.length;++n){const r=e>>25;e=(e&33554431)<<5^t[n];for(let s=0;s<5;++s)r>>s&1&&(e^=kp[s])}return e}function ru(t){const e=[];let n;for(n=0;n<t.length;++n)e.push(t.charCodeAt(n)>>5);for(e.push(0),n=0;n<t.length;++n)e.push(t.charCodeAt(n)&31);return e}function $p(t,e,n){const r=ru(t).concat(e);return nu(r)===n.const}function Up(t,e,n){const r=ru(t).concat(e).concat([0,0,0,0,0,0]),s=nu(r)^n.const,i=[];for(let o=0;o<6;++o)i.push(s>>5*(5-o)&31);return i}function su(t,e,n,r=!0){const s=[];let i=0,o=0;const a=(1<<n)-1,f=(1<<e+n-1)-1;for(const h of t){if(h<0||h>>e>0)throw new Error("Failed to perform base conversion. Invalid value: "+String(h));for(i=(i<<e|h)&f,o+=e;o>=n;)o-=n,s.push(i>>o&a)}if(r)o>0&&s.push(i<<n-o&a);else if(o>=e||(i<<n-o&a)>0)throw new Error("Failed to perform base conversion. Invalid Size!");return s}function Op(t,e,n){const r=e.concat(Up(t,e,n));let s=t+"1";for(let i=0;i<r.length;++i)s+=tu.charAt(r[i]);return s}function iu(t){if(!Pp(t))throw new Error("Encoded string goes out of bounds!");if(t=t.toLowerCase(),!Cp(t))throw new Error("Encoded string has invalid separator!");const e=[],n=t.lastIndexOf("1"),r=t.substring(0,n);for(let i=n+1;i<t.length;++i){const o=tu.indexOf(t.charAt(i));if(o===-1)throw new Error("Character idx out of bounds: "+String(i));e.push(o)}const s=ns.find(i=>i.version===e[0])??ns[0];if(!$p(r,e,s))throw new Error("Checksum verification failed!");return[r,e.slice(0,e.length-6)]}function Pp(t){let e,n,r=!1,s=!1;for(e=0;e<t.length;++e){if(n=t.charCodeAt(e),n<33||n>126)return!1;n>=97&&n<=122&&(r=!0),n>=65&&n<=90&&(s=!0)}return!(r&&s)}function Cp(t){const e=t.lastIndexOf("1");return!(e<1||e+7>t.length||t.length>90)}function Hp(t,e="bc",n=0){const r=[n,...su([...t],8,5)],s=ns.find(o=>o.version===n)??ns[0],i=Op(e,r,s);return ou(i),i}function ou(t){t=t.toLowerCase();const e=t.split("1",1)[0],[n,r]=iu(t),s=su(r.slice(1),5,8,!1),i=s.length;switch(!0){case e!==n:throw new Error("Returned hrp string is invalid.");case(s===null||i<2||i>40):throw new Error("Decoded string is invalid or out of spec.");case r[0]>16:throw new Error("Returned version bit is out of range.");default:return Uint8Array.from(s)}}function Np(t){t=t.toLowerCase();const[e,n]=iu(t);return n[0]}const jo={encode:Hp,decode:ou,version:Np},au="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",cu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",Lp=new TextEncoder;function uu(t,e=!1){typeof t=="string"&&(t=Lp.encode(t));const n=e?cu:au;let r="",s=0,i=0;for(let o=0;o<t.length;o++)for(i=i<<8|t[o],s+=8;s>=6;)s-=6,r+=n[i>>s&63];if(s>0)for(i<<=6-s,r+=n[i&63];s<6;)r+=e?"":"=",s+=2;return r}function fu(t,e=!1){const n=e||t.includes("-")||t.includes("_")?cu.split(""):au.split("");t=t.replace(/=+$/,"");const r=t.split("");let s=0,i=0;const o=[];for(let a=0;a<r.length;a++){const f=r[a],h=n.indexOf(f);if(h===-1)throw new Error("Invalid character: "+f);s+=6,i<<=6,i|=h,s>=8&&(s-=8,o.push(i>>>s&255))}return new Uint8Array(o)}const Zo={encode:uu,decode:fu},Mo={encode:t=>uu(t,!0),decode:t=>fu(t,!0)},M=class extends Uint8Array{constructor(e,n){if(e=Ge(e,!0),typeof n=="number"){const r=new Uint8Array(n).fill(0);r.set(new Uint8Array(e)),e=r.buffer}return super(e),this}get arr(){return[...this]}get num(){return this.toNum()}get big(){return this.toBig()}get str(){return this.toStr()}get hex(){return this.toHex()}get raw(){return new Uint8Array(this)}get bits(){return this.toBits()}get bin(){return this.toBin()}get b58chk(){return this.tob58chk()}get base64(){return this.toBase64()}get b64url(){return this.toB64url()}get digest(){return this.toHash()}get id(){return this.toHash().hex}get stream(){return new Rp(this)}toNum(e="le"){return Lo(e==="le"?this.reverse():this)}toBig(e="le"){return Ro(e==="le"?this.reverse():this)}toHash(e="sha256"){switch(e){case"sha256":return new M(_n.sha256(this));case"hash256":return new M(_n.hash256(this));case"ripe160":return new M(_n.ripe160(this));case"hash160":return new M(_n.hash160(this));default:throw new Error("Unrecognized format:"+String(e))}}toHmac(e,n="hmac256"){switch(n){case"hmac256":return new M(_n.hmac256(e,this));case"hmac512":return new M(_n.hmac512(e,this));default:throw new Error("Unrecognized format:"+String(n))}}toStr(){return jr(this)}toHex(){return Qc(this)}toJson(){return JSON.parse(jr(this))}toBytes(){return new Uint8Array(this)}toBits(){return No(this)}toBin(){return No(this).join("")}tob58chk(){return Fo.encode(this)}toB64url(){return Mo.encode(this)}toBase64(){return Zo.encode(this)}toBech32(e,n=0){return jo.encode(this,e,n)}prepend(e){return M.join([M.bytes(e),this])}append(e){return M.join([this,M.bytes(e)])}slice(e,n){return new M(new Uint8Array(this).slice(e,n))}subarray(e,n){return new M(new Uint8Array(this).subarray(e,n))}reverse(){return new M(new Uint8Array(this).reverse())}write(e,n){this.set(e,n)}prefixSize(e){const n=M.varInt(this.length,e);return M.join([n,this])}static from(e){return new M(Uint8Array.from(e))}static of(...e){return new M(Uint8Array.of(...e))}static join(e){const n=e.map(r=>M.bytes(r));return new M(jc(n))}static varInt(e,n){if(e<253)return M.num(e,1);if(e<65536)return M.of(253,...M.num(e,2,n));if(e<4294967296)return M.of(254,...M.num(e,4,n));if(BigInt(e)<0x10000000000000000n)return M.of(255,...M.num(e,8,n));throw new Error(`Value is too large: ${e}`)}static random(e=32){return new M(Bd(e),e)}static normalize(e,n){return new M(Ge(e,!0),n)}static hexify(e){return pp(e)}static serialize(e,n){return new M(gp(e),n)}static revive(e){return yp(e)}};let Ee=M;(()=>{M.num=(e,n,r="le")=>{const s=new M(Xc(e),n);return r==="le"?s.reverse():s}})(),(()=>{M.big=(e,n,r="le")=>{const s=new M(Jc(e),n);return r==="le"?s.reverse():s}})(),(()=>{M.bin=(e,n)=>new M(dp(e),n)})(),(()=>{M.any=(e,n)=>new M(Ge(e,!1),n)})(),(()=>{M.raw=(e,n)=>new M(e,n)})(),(()=>{M.str=(e,n)=>new M(Fr(e),n)})(),(()=>{M.hex=(e,n)=>new M(Yc(e),n)})(),(()=>{M.json=e=>new M(Fr(JSON.stringify(e)))})(),(()=>{M.bytes=(e,n)=>new M(Ge(e,!0),n)})(),(()=>{M.base64=e=>new M(Zo.decode(e))})(),(()=>{M.b64url=e=>new M(Mo.decode(e))})(),(()=>{M.bech32=e=>new M(jo.decode(e))})(),(()=>{M.b58chk=e=>new M(Fo.decode(e))})(),(()=>{M.encode=Fr})(),(()=>{M.decode=jr})();class Rp{constructor(e){this.data=new Uint8Array(e),this.size=this.data.length}peek(e){if(e>this.size)throw new Error(`Size greater than stream: ${e} > ${this.size}`);return new Ee(this.data.slice(0,e).buffer)}read(e){e=e??this.readSize();const n=this.peek(e);return this.data=this.data.slice(e),this.size=this.data.length,n}readSize(e){const n=this.read(1).num;switch(!0){case(n>=0&&n<253):return n;case n===253:return this.read(2).toNum(e);case n===254:return this.read(4).toNum(e);case n===255:return this.read(8).toNum(e);default:throw new Error(`Varint is out of range: ${n}`)}}}const{ProjectivePoint:Zr}=St,he=class extends Uint8Array{static mod(e,n=he.N){return Di.utils.mod(e,n)}static pow(e,n,r=he.N){if(e=he.mod(e,r),n=he.mod(n,r),e===0n)return 0n;let s=1n;for(;n>0n;)(n&1n)===1n&&(s=he.mod(s*e,r)),n=n>>1n,e=he.mod(e*e,r);return s}static normalize(e){return e=hu(e),e=he.mod(e),he.validate(e),Ee.big(e,32)}static validate(e){return St.utils.isValidPrivateKey(e)}constructor(e){super(he.normalize(e),32)}get buff(){return new Ee(this)}get raw(){return this.buff.raw}get big(){return this.buff.big}get hex(){return this.buff.hex}get point(){return this.generate()}get xpoint(){return new Ut(this.point.x)}get hasOddY(){return this.point.hasOddY}get negated(){return this.hasOddY?this.negate():this}gt(e){return new he(e).big>this.big}lt(e){return new he(e).big<this.big}eq(e){return new he(e).big===this.big}ne(e){return new he(e).big!==this.big}add(e){const n=new he(e);return new he(this.big+n.big)}sub(e){const n=new he(e);return new he(this.big-n.big)}mul(e){const n=new he(e);return new he(this.big*n.big)}pow(e,n=he.N-1n){const r=new he(e),s=he.mod(r.big,n);return new he(this.big**s)}div(e){const n=new he(e),r=this.pow(n.big,he.N-2n);return new he(this.big*r.big)}negate(){return new he(he.N-this.big)}generate(){return Ut.import(Zr.BASE.multiply(this.big))}};let We=he;(()=>{he.N=St.CURVE.n})();const Pe=class{static validate(e){try{return e=new Pe(e),!0}catch{return!1}}static normalize(e){let n=Dp(e);return n.length===32&&(n=n.prepend(2)),Zr.fromHex(n.hex)}static generate(e){return new We(e).generate()}static import(e){const n=e instanceof Pe?{x:e.x.big,y:e.y.big}:{x:e.x,y:e.y};return new Pe(n.x,n.y)}constructor(e,n){this.__p=typeof e=="bigint"&&typeof n=="bigint"?new Zr(e,n,1n):Pe.normalize(e),this.p.assertValidity()}get p(){return this.__p}get x(){return Ee.big(this.p.x,32)}get y(){return Ee.big(this.p.y,32)}get buff(){return Ee.raw(this.p.toRawBytes(!0))}get raw(){return this.buff.raw}get hex(){return this.buff.hex}get hasEvenY(){return this.p.hasEvenY()}get hasOddY(){return!this.p.hasEvenY()}eq(e){return e instanceof Pe?this.p.equals(new Zr(e.x.big,e.y.big,1n)):e instanceof Uint8Array?this.x.big===Ee.raw(e).big:typeof e=="number"?BigInt(e)===this.x.big:e===this.x.big}add(e){return e instanceof Pe?Pe.import(this.p.add(e.p)):Pe.import(this.p.add(Pe.generate(e).p))}sub(e){return e instanceof Pe?Pe.import(this.p.subtract(e.p)):Pe.import(this.p.subtract(Pe.generate(e).p))}mul(e){return e instanceof Pe?Pe.import(this.p.multiply(e.x.big)):Pe.import(this.p.multiply(hu(e)))}negate(){return Pe.import(this.p.negate())}};let Ut=Pe;(()=>{Pe.N=St.CURVE.n})();function hu(t){if(t instanceof We)return t.big;if(t instanceof Ut)return t.x.big;if(t instanceof Uint8Array)return Ee.raw(t).big;if(typeof t=="string")return Ee.hex(t).big;if(typeof t=="number")return Ee.num(t).big;if(typeof t=="bigint")return BigInt(t);throw TypeError("Invalid input type:"+typeof t)}function Dp(t){if(t instanceof We||t instanceof Ut)return t.buff;if(t instanceof Uint8Array||typeof t=="string"||typeof t=="number"||typeof t=="bigint")return Ee.bytes(t);throw TypeError("Invalid input type:"+typeof t)}function lu(t){const e=Ee.bytes(t);if(e.length===33)return e.slice(1,33);if(e.length===32)return e;throw new Error("Invalid key length: "+String(e.length))}function du(t,e,n="taproot"){const r=Ee.bytes(e).raw,s=Ee.bytes(t).raw;switch(n){case"ecdsa":return St.sign(r,s).toDERRawBytes();case"taproot":return Di.sign(r,s);default:throw new Error("Unknown signature type:"+String(n))}}function Ki(t,e,n,r="taproot"){const s=Ee.bytes(t).raw,i=Ee.bytes(e).raw,o=Ee.bytes(n).raw;switch(r){case"ecdsa":return St.verify(s,i,o);case"taproot":return Di.verify(s,i,lu(o));default:throw new Error("Unknown signature type:"+String(r))}}const Js={type:"ecdsa"};class et extends Uint8Array{static random(e){return new et(Ee.random(32),e)}constructor(e,n={}){super(new We(e)),this.config={...Js,...n},this.xonly=this.config.type==="taproot"}get buff(){return new Ee(this)}get raw(){return this.buff.raw}get hex(){return this.buff.hex}get field(){return new We(this)}get point(){return this.field.point}get pub(){return new Qs(this.point.raw,this.config)}get hasEvenY(){return this.point.hasEvenY}get hasOddY(){return this.point.hasOddY}get xfilter(){return this.xonly&&this.hasOddY?this.negate():this}add(e){const n=this.xfilter.field;return new et(n.add(e),this.config)}sub(e){const n=this.xfilter.field;return new et(n.sub(e),this.config)}mul(e){const n=this.xfilter.field;return new et(n.mul(e),this.config)}div(e){const n=this.xfilter.field;return new et(n.div(e),this.config)}pow(e){const n=this.xfilter.field;return new et(n.pow(e),this.config)}negate(){return new et(this.field.negate(),this.config)}sign(e,n=this.config.type){return du(this.raw,e,n)}verify(e,n,r=this.config.type){return Ki(e,n,this.pub.raw,r)}toWIF(e=128){return Ee.join([e,this,1]).b58chk}}const Wt=class extends Uint8Array{static random(e){return et.random(e).pub}static fromSecret(e,n){return new et(e,n).pub}constructor(e,n={}){const r={...Js,...n};r.type==="taproot"?super(Wt.xfilter(e),32):super(Ee.bytes(e),33),this.config={...Js,...n},this.xonly=r.type==="taproot"}get buff(){return this.xonly?this.x:new Ee(this)}get raw(){return this.buff.raw}get hex(){return this.buff.hex}get point(){return new Ut(this)}get x(){return this.point.x}get y(){return this.point.y}get hasEvenY(){return this.point.hasEvenY}get hasOddY(){return this.point.hasOddY}add(e){return new Wt(this.point.add(e).raw,this.config)}sub(e){return new Wt(this.point.sub(e).raw,this.config)}mul(e){return new Wt(this.point.mul(e).raw,this.config)}negate(){return new Wt(this.point.negate().raw,this.config)}verify(e,n,r=this.config.type){return Ki(e,n,this.raw,r)}};let Qs=Wt;(()=>{Wt.xfilter=lu})();function Fp(t,e,n,r={}){const{sigflag:s=1}=r,i=ki(e,n,r),o=du(t,i,"ecdsa");return A.join([o,s])}function jp(t,e,n={}){const r=st.fmt.toJson(t),{throws:s=!1}=n,{witness:i=[]}=r.vin[e],o=st.util.readWitness(i),{script:a,params:f}=o;let h=null;if(f.length<1)return Ze("Invalid witness data: "+String(i),s);if(n.script===void 0&&a!==null&&(n.script=a),n.pubkey!==void 0)h=A.bytes(n.pubkey);else if(f.length>1&&f[1].length===33)h=A.bytes(f[1]);else return Ze("No pubkey provided!",s);const l=Fe.fmt.toParam(f[0]),p=l.slice(0,-1),y=l.slice(-1)[0],w=ki(r,e,{...n,sigflag:y});return Ki(p.hex,w.hex,h.hex,"ecdsa")?!0:Ze("Invalid signature!",s)}const Zp={hash:ki,sign:Fp,verify:jp},Mp=[0,1,2,3,129,130,131];function Gi(t,e,n={}){const{extension:r,sigflag:s=0,extflag:i=0,key_version:o=0,separator_pos:a=4294967295}=n,f=st.fmt.toJson(t),{version:h,vin:l,vout:p,locktime:y}=f;if(e>=l.length)throw new Error("Index out of bounds: "+String(e));if(!Mp.includes(s))throw new Error("Invalid hash type: "+String(s));if(i<0||i>127)throw new Error("Extention flag out of range: "+String(i));const{txid:w,vout:b,sequence:x,witness:v=[]}=l[e],S=(s&128)===128,_=Yp(v),B=_!==void 0?1:0,T=(i+(r!==void 0?1:0))*2+B,U=A.str("TapSighash").digest,C=[U,U,A.num(0,1),A.num(s,1),_i(h),Ii(y)];if(!S){const $=l.map(N=>zo(N));C.push(zp(l),qp($),Kp($),Vp(l))}if(((s&3)<2||(s&3)>3)&&C.push(Gp(p)),C.push(A.num(T,1)),S){const{value:$,scriptPubKey:N}=zo(l[e]);C.push(pr(w),gr(b),nn($),Fe.encode(N,!0),yr(x))}else C.push(A.num(e,4).reverse());return _!==void 0&&C.push(_),(s&3)===3&&C.push(Wp(p[e])),r!==void 0&&C.push(A.bytes(r),A.num(o),A.num(a,4)),A.join(C).digest}function zp(t){const e=[];for(const{txid:n,vout:r}of t)e.push(pr(n)),e.push(gr(r));return A.join(e).digest}function Vp(t){const e=[];for(const{sequence:n}of t)e.push(yr(n));return A.join(e).digest}function qp(t){const e=[];for(const{value:n}of t)e.push(nn(n));return A.join(e).digest}function Kp(t){const e=[];for(const{scriptPubKey:n}of t)e.push(En(n,!0));return A.join(e).digest}function Gp(t){const e=[];for(const{value:n,scriptPubKey:r}of t)e.push(nn(n)),e.push(Fe.encode(r,!0));return A.join(e).digest}function Wp(t){return A.join([nn(t.value),Fe.encode(t.scriptPubKey,!0)]).digest}function Yp(t){if(t===void 0||t.length<2)return;let e=t.at(-1);if(typeof e=="string"&&(e=A.hex(e)),e instanceof Uint8Array&&e[0]===80)return A.raw(e).prefixSize("be").digest}function zo(t){if(t.prevout===void 0)throw new Error("Prevout data missing for input: "+String(t.txid));return t.prevout}const Xp=0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2fn,Jp=0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141n;function Qp(t,e,n,r={}){const{sigflag:s=0}=r,i=Gi(e,n,r),o=e1(t,i);return s===0?A.raw(o):A.join([o,s])}function e1(t,e,n=A.random(32)){const r=A.bytes(e),s=new We(t),i=s.point,o=i.hasEvenY?s.big:s.negated.big,a=Dr("BIP0340/aux",A.bytes(n)),f=o^a.big,h=Dr("BIP0340/nonce",f,i.x.raw,r),l=new We(h),p=l.point,y=p.hasEvenY?l.big:l.negated.big,w=new We(Dr("BIP0340/challenge",p.x.raw,i.x.raw,r)),b=new We(y+w.big*o);return A.join([p.x.raw,b.raw])}function t1(t,e,n,r=!1){const s=new Ut(wn(n)),i=A.bytes(e),o=A.bytes(t).stream;o.size<64&&Ze("Signature length is too small: "+String(o.size),r);const a=o.read(32);a.big>Xp&&Ze("Signature r value greater than field size!",r);const f=o.read(32);f.big>Jp&&Ze("Signature s value greater than curve order!",r);const h=new We(Dr("BIP0340/challenge",a.raw,s.x.raw,i)),l=new We(f).point,p=s.mul(h.big),y=l.sub(p);return y.hasOddY&&Ze("Signature R value has odd Y coordinate!",r),y.x.big===0n&&Ze("Signature R value is infinite!",r),y.x.big===a.big}const n1=192;function vs(t){const e=A.str(t).digest;return A.join([e,e])}function Wi(t,e=n1){return A.join([vs("TapLeaf"),i1(e),A.normalize(t)]).digest.hex}function r1(t,e){return Wi(Fe.fmt.toBytes(t),e)}function Yi(t,e){return e<t&&([t,e]=[e,t]),A.join([vs("TapBranch"),A.hex(t).raw,A.hex(e).raw]).digest.hex}function s1(t){return A.hex(rs(t)[0])}function rs(t,e,n=[]){const r=[],s=[];if(t.length<1)throw new Error("Tree is empty!");for(let i=0;i<t.length;i++){const o=t[i];if(Array.isArray(o)){const[a,f,h]=rs(o,e);e=f,r.push(a);for(const l of h)n.push(l)}else r.push(o)}if(r.length===1)return[r[0],e,n];r.sort(),r.length%2!==0&&r.push(r[r.length-1]);for(let i=0;i<r.length-1;i+=2){const o=Yi(r[i],r[i+1]);s.push(o),typeof e=="string"&&(e===r[i]?(n.push(r[i+1]),e=o):e===r[i+1]&&(n.push(r[i]),e=o))}return rs(s,e,n)}function i1(t=192){return t&254}function pu(t,e=new Uint8Array,n=!1){const r=n?new We(t).point.x.raw:wn(t);return A.join([vs("TapTweak"),r,A.bytes(e)]).digest}function Un(t,e,n=!1){e===void 0&&(e=new Uint8Array);const r=A.bytes(t),s=pu(t,e,n);return n?gu(r,s):yu(r,s)}function o1(t,e){return Un(t,e)}function a1(t,e){return Un(t,e,!0)}function gu(t,e){let n=new We(t);return n.point.hasOddY&&(n=n.negate()),A.raw(n.add(e).raw)}function yu(t,e){t=wn(t);const r=new Ut(t).add(e);return A.raw(r.raw)}const c1=192;function u1(t,e={}){return wu(t,{...e,isPrivate:!0})}function f1(t,e={}){return wu(t,{...e,isPrivate:!1})}function wu(t,e={}){const{isPrivate:n=!1,tree:r=[],version:s=c1}=e,i=n?new et(t).pub.x.raw:wn(t);let{target:o}=e;o!==void 0&&(o=A.bytes(o).hex);let a,f=[];if(r.length>0){const[w,b,x]=rs(r,o);f=x,a=Un(t,w,n)}else o!==void 0?a=Un(t,o,n):a=Un(t,void 0,n);const h=n?new et(a).point.raw[0]:a[0],p=[A.num(s+mu(h)),i];f.length>0&&f.forEach(w=>p.push(A.hex(w)));const y=A.join(p);if(o!==void 0&&!Xi(a,o,y,e))throw new Error("Path checking failed! Unable to generate path.");return[wn(a).hex,y.hex]}function Xi(t,e,n,r={}){const{isPrivate:s=!1,throws:i=!1}=r,{parity:o,paths:a,intkey:f}=xu(n),h=s?new et(t).pub.x.raw:wn(t),l=A.join([o,h]);if(l.length!==33)return Ze("Invalid tapkey: "+l.hex,i);let p=A.bytes(e).hex;for(const w of a)p=Yi(p,w);const y=Un(f,p);return A.raw(y).hex===A.raw(l).hex}function xu(t){const e=new Mn(A.bytes(t)),n=e.read(1).num,r=e.read(32),[s,i]=n%2===0?[n,2]:[n-1,3],o=[];for(;e.size>=32;)o.push(e.read(32).hex);if(e.size!==0)throw new Error("Non-empty buffer on control block: "+String(e));return{intkey:r,paths:o,parity:i,version:s}}function mu(t=2){if(t===0||t===1)return t;if(t===2||t==="02")return 0;if(t===3||t==="03")return 1;throw new Error("Invalid parity bit: "+String(t))}function h1(t,e,n={}){const r=st.fmt.toJson(t),{throws:s=!1}=n,{prevout:i,witness:o=[]}=r.vin[e],a=st.util.readWitness(o),{cblock:f,script:h,params:l}=a;let p;if(l.length<1)return Ze("Invalid witness data: "+String(o),s);const{scriptPubKey:y}=i??{};if(y===void 0)return Ze("Prevout scriptPubKey is empty!",s);const{type:w,data:b}=st.util.readScriptPubKey(y);if(w!=="p2tr")return Ze("Prevout script is not a valid taproot output:"+b.hex,s);if(b.length!==32)return Ze("Invalid tapkey length: "+String(b.length),s);if(f!==null&&h!==null){const B=f[0]&254,P=Wi(h,B);if(n.extension=P,!Xi(b,P,f,{throws:s}))return Ze("cblock verification failed!",s)}n.pubkey!==void 0?p=A.bytes(n.pubkey):l.length>1&&l[1].length===32?p=A.bytes(l[1]):p=A.bytes(b);const x=Fe.fmt.toParam(l[0]),v=new Mn(x),S=v.read(64).raw;if(v.size===1&&(n.sigflag=v.read(1).num,n.sigflag===0))return Ze("0x00 is not a valid appended sigflag!",s);const _=Gi(r,e,n);return t1(S,_,p,s)?!0:Ze("Invalid signature!",s)}const l1={hash:Gi,sign:Qp,verify:h1},Mr={segwit:Zp,taproot:l1},d1={getTag:vs,getLeaf:Wi,getBranch:Yi,getRoot:s1},p1={readCtrlBlock:xu,readParityBit:mu},g1={getPubKey:o1,getSecKey:a1,getTweak:pu,tweakSecKey:gu,tweakPubKey:yu},Cr={getPubKey:f1,getSecKey:u1,encodeScript:r1,checkPath:Xi,tree:d1,tweak:g1,util:p1};var fe;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(fe||(fe={}));var ei;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(ei||(ei={}));const R=fe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Xt=t=>{switch(typeof t){case"undefined":return R.undefined;case"string":return R.string;case"number":return isNaN(t)?R.nan:R.number;case"boolean":return R.boolean;case"function":return R.function;case"bigint":return R.bigint;case"symbol":return R.symbol;case"object":return Array.isArray(t)?R.array:t===null?R.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?R.promise:typeof Map<"u"&&t instanceof Map?R.map:typeof Set<"u"&&t instanceof Set?R.set:typeof Date<"u"&&t instanceof Date?R.date:R.object;default:return R.unknown}},H=fe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),y1=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class lt extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,f=0;for(;f<o.path.length;){const h=o.path[f];f===o.path.length-1?(a[h]=a[h]||{_errors:[]},a[h]._errors.push(n(o))):a[h]=a[h]||{_errors:[]},a=a[h],f++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,fe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}lt.create=t=>new lt(t);const tr=(t,e)=>{let n;switch(t.code){case H.invalid_type:t.received===R.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case H.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,fe.jsonStringifyReplacer)}`;break;case H.unrecognized_keys:n=`Unrecognized key(s) in object: ${fe.joinValues(t.keys,", ")}`;break;case H.invalid_union:n="Invalid input";break;case H.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${fe.joinValues(t.options)}`;break;case H.invalid_enum_value:n=`Invalid enum value. Expected ${fe.joinValues(t.options)}, received '${t.received}'`;break;case H.invalid_arguments:n="Invalid function arguments";break;case H.invalid_return_type:n="Invalid function return type";break;case H.invalid_date:n="Invalid date";break;case H.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:fe.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case H.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case H.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case H.custom:n="Invalid input";break;case H.invalid_intersection_types:n="Intersection results could not be merged";break;case H.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case H.not_finite:n="Number must be finite";break;default:n=e.defaultError,fe.assertNever(t)}return{message:n}};let bu=tr;function w1(t){bu=t}function ss(){return bu}const is=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const f=r.filter(h=>!!h).slice().reverse();for(const h of f)a=h(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},x1=[];function D(t,e){const n=is({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ss(),tr].filter(r=>!!r)});t.common.issues.push(n)}class Me{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Q;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return Me.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Q;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Q=Object.freeze({status:"aborted"}),vu=t=>({status:"dirty",value:t}),Je=t=>({status:"valid",value:t}),ti=t=>t.status==="aborted",ni=t=>t.status==="dirty",os=t=>t.status==="valid",as=t=>typeof Promise<"u"&&t instanceof Promise;var q;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(q||(q={}));class Bt{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Vo=(t,e)=>{if(os(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new lt(t.common.issues);return this._error=n,this._error}}};function ee(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class re{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Xt(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Xt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Me,ctx:{common:e.parent.common,data:e.data,parsedType:Xt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(as(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xt(e)},i=this._parseSync({data:e,path:s.path,parent:s});return Vo(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xt(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(as(s)?s:Promise.resolve(s));return Vo(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:H.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(f=>f?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new pt({schema:this,typeName:W.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return $t.create(this,this._def)}nullable(){return bn.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return dt.create(this,this._def)}promise(){return Fn.create(this,this._def)}or(e){return ir.create([this,e],this._def)}and(e){return or.create(this,e,this._def)}transform(e){return new pt({...ee(this._def),schema:this,typeName:W.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new hr({...ee(this._def),innerType:this,defaultValue:n,typeName:W.ZodDefault})}brand(){return new Au({typeName:W.ZodBranded,type:this,...ee(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new hs({...ee(this._def),innerType:this,catchValue:n,typeName:W.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return wr.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const m1=/^c[^\s-]{8,}$/i,b1=/^[a-z][a-z0-9]*$/,v1=/[0-9A-HJKMNP-TV-Z]{26}/,E1=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,A1=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,S1=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,B1=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,_1=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,I1=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function T1(t,e){return!!((e==="v4"||!e)&&B1.test(t)||(e==="v6"||!e)&&_1.test(t))}class ht extends re{constructor(){super(...arguments),this._regex=(e,n,r)=>this.refinement(s=>e.test(s),{validation:n,code:H.invalid_string,...q.errToObj(r)}),this.nonempty=e=>this.min(1,q.errToObj(e)),this.trim=()=>new ht({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new ht({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new ht({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==R.string){const i=this._getOrReturnCtx(e);return D(i,{code:H.invalid_type,expected:R.string,received:i.parsedType}),Q}const r=new Me;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),D(s,{code:H.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),D(s,{code:H.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?D(s,{code:H.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&D(s,{code:H.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")A1.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"email",code:H.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")S1.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"emoji",code:H.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")E1.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"uuid",code:H.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")m1.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"cuid",code:H.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")b1.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"cuid2",code:H.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")v1.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"ulid",code:H.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),D(s,{validation:"url",code:H.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"regex",code:H.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),D(s,{code:H.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),D(s,{code:H.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),D(s,{code:H.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?I1(i).test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{code:H.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?T1(e.data,i.version)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"ip",code:H.invalid_string,message:i.message}),r.dirty()):fe.assertNever(i);return{status:r.value,value:e.data}}_addCheck(e){return new ht({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...q.errToObj(e)})}url(e){return this._addCheck({kind:"url",...q.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...q.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...q.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...q.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...q.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...q.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...q.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...q.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...q.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...q.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...q.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...q.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...q.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...q.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...q.errToObj(n)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ht.create=t=>{var e;return new ht({checks:[],typeName:W.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...ee(t)})};function k1(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class sn extends re{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==R.number){const i=this._getOrReturnCtx(e);return D(i,{code:H.invalid_type,expected:R.number,received:i.parsedType}),Q}let r;const s=new Me;for(const i of this._def.checks)i.kind==="int"?fe.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),D(r,{code:H.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),D(r,{code:H.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),D(r,{code:H.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?k1(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),D(r,{code:H.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),D(r,{code:H.not_finite,message:i.message}),s.dirty()):fe.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,q.toString(n))}gt(e,n){return this.setLimit("min",e,!1,q.toString(n))}lte(e,n){return this.setLimit("max",e,!0,q.toString(n))}lt(e,n){return this.setLimit("max",e,!1,q.toString(n))}setLimit(e,n,r,s){return new sn({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:q.toString(s)}]})}_addCheck(e){return new sn({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:q.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:q.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:q.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:q.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:q.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:q.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:q.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:q.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:q.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&fe.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}sn.create=t=>new sn({checks:[],typeName:W.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...ee(t)});class on extends re{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==R.bigint){const i=this._getOrReturnCtx(e);return D(i,{code:H.invalid_type,expected:R.bigint,received:i.parsedType}),Q}let r;const s=new Me;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),D(r,{code:H.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),D(r,{code:H.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),D(r,{code:H.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):fe.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,q.toString(n))}gt(e,n){return this.setLimit("min",e,!1,q.toString(n))}lte(e,n){return this.setLimit("max",e,!0,q.toString(n))}lt(e,n){return this.setLimit("max",e,!1,q.toString(n))}setLimit(e,n,r,s){return new on({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:q.toString(s)}]})}_addCheck(e){return new on({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:q.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:q.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:q.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:q.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:q.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}on.create=t=>{var e;return new on({checks:[],typeName:W.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...ee(t)})};class nr extends re{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==R.boolean){const r=this._getOrReturnCtx(e);return D(r,{code:H.invalid_type,expected:R.boolean,received:r.parsedType}),Q}return Je(e.data)}}nr.create=t=>new nr({typeName:W.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...ee(t)});class xn extends re{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==R.date){const i=this._getOrReturnCtx(e);return D(i,{code:H.invalid_type,expected:R.date,received:i.parsedType}),Q}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return D(i,{code:H.invalid_date}),Q}const r=new Me;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),D(s,{code:H.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),D(s,{code:H.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):fe.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new xn({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:q.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:q.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}xn.create=t=>new xn({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:W.ZodDate,...ee(t)});class cs extends re{_parse(e){if(this._getType(e)!==R.symbol){const r=this._getOrReturnCtx(e);return D(r,{code:H.invalid_type,expected:R.symbol,received:r.parsedType}),Q}return Je(e.data)}}cs.create=t=>new cs({typeName:W.ZodSymbol,...ee(t)});class rr extends re{_parse(e){if(this._getType(e)!==R.undefined){const r=this._getOrReturnCtx(e);return D(r,{code:H.invalid_type,expected:R.undefined,received:r.parsedType}),Q}return Je(e.data)}}rr.create=t=>new rr({typeName:W.ZodUndefined,...ee(t)});class sr extends re{_parse(e){if(this._getType(e)!==R.null){const r=this._getOrReturnCtx(e);return D(r,{code:H.invalid_type,expected:R.null,received:r.parsedType}),Q}return Je(e.data)}}sr.create=t=>new sr({typeName:W.ZodNull,...ee(t)});class Dn extends re{constructor(){super(...arguments),this._any=!0}_parse(e){return Je(e.data)}}Dn.create=t=>new Dn({typeName:W.ZodAny,...ee(t)});class pn extends re{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Je(e.data)}}pn.create=t=>new pn({typeName:W.ZodUnknown,...ee(t)});class Ot extends re{_parse(e){const n=this._getOrReturnCtx(e);return D(n,{code:H.invalid_type,expected:R.never,received:n.parsedType}),Q}}Ot.create=t=>new Ot({typeName:W.ZodNever,...ee(t)});class us extends re{_parse(e){if(this._getType(e)!==R.undefined){const r=this._getOrReturnCtx(e);return D(r,{code:H.invalid_type,expected:R.void,received:r.parsedType}),Q}return Je(e.data)}}us.create=t=>new us({typeName:W.ZodVoid,...ee(t)});class dt extends re{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==R.array)return D(n,{code:H.invalid_type,expected:R.array,received:n.parsedType}),Q;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(D(n,{code:o?H.too_big:H.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(D(n,{code:H.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(D(n,{code:H.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Bt(n,o,n.path,a)))).then(o=>Me.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Bt(n,o,n.path,a)));return Me.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new dt({...this._def,minLength:{value:e,message:q.toString(n)}})}max(e,n){return new dt({...this._def,maxLength:{value:e,message:q.toString(n)}})}length(e,n){return new dt({...this._def,exactLength:{value:e,message:q.toString(n)}})}nonempty(e){return this.min(1,e)}}dt.create=(t,e)=>new dt({type:t,minLength:null,maxLength:null,exactLength:null,typeName:W.ZodArray,...ee(e)});function kn(t){if(t instanceof Ae){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=$t.create(kn(r))}return new Ae({...t._def,shape:()=>e})}else return t instanceof dt?new dt({...t._def,type:kn(t.element)}):t instanceof $t?$t.create(kn(t.unwrap())):t instanceof bn?bn.create(kn(t.unwrap())):t instanceof _t?_t.create(t.items.map(e=>kn(e))):t}class Ae extends re{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=fe.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==R.object){const h=this._getOrReturnCtx(e);return D(h,{code:H.invalid_type,expected:R.object,received:h.parsedType}),Q}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Ot&&this._def.unknownKeys==="strip"))for(const h in s.data)o.includes(h)||a.push(h);const f=[];for(const h of o){const l=i[h],p=s.data[h];f.push({key:{status:"valid",value:h},value:l._parse(new Bt(s,p,s.path,h)),alwaysSet:h in s.data})}if(this._def.catchall instanceof Ot){const h=this._def.unknownKeys;if(h==="passthrough")for(const l of a)f.push({key:{status:"valid",value:l},value:{status:"valid",value:s.data[l]}});else if(h==="strict")a.length>0&&(D(s,{code:H.unrecognized_keys,keys:a}),r.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const l of a){const p=s.data[l];f.push({key:{status:"valid",value:l},value:h._parse(new Bt(s,p,s.path,l)),alwaysSet:l in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const h=[];for(const l of f){const p=await l.key;h.push({key:p,value:await l.value,alwaysSet:l.alwaysSet})}return h}).then(h=>Me.mergeObjectSync(r,h)):Me.mergeObjectSync(r,f)}get shape(){return this._def.shape()}strict(e){return new Ae({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const f=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=q.errToObj(e).message)!==null&&a!==void 0?a:f}:{message:f}}}:{}})}strip(){return new Ae({...this._def,unknownKeys:"strip"})}passthrough(){return new Ae({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ae({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ae({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:W.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Ae({...this._def,catchall:e})}pick(e){const n={};return fe.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Ae({...this._def,shape:()=>n})}omit(e){const n={};return fe.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Ae({...this._def,shape:()=>n})}deepPartial(){return kn(this)}partial(e){const n={};return fe.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new Ae({...this._def,shape:()=>n})}required(e){const n={};return fe.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof $t;)i=i._def.innerType;n[r]=i}}),new Ae({...this._def,shape:()=>n})}keyof(){return Eu(fe.objectKeys(this.shape))}}Ae.create=(t,e)=>new Ae({shape:()=>t,unknownKeys:"strip",catchall:Ot.create(),typeName:W.ZodObject,...ee(e)});Ae.strictCreate=(t,e)=>new Ae({shape:()=>t,unknownKeys:"strict",catchall:Ot.create(),typeName:W.ZodObject,...ee(e)});Ae.lazycreate=(t,e)=>new Ae({shape:t,unknownKeys:"strip",catchall:Ot.create(),typeName:W.ZodObject,...ee(e)});class ir extends re{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new lt(a.ctx.common.issues));return D(n,{code:H.invalid_union,unionErrors:o}),Q}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const f of r){const h={...n,common:{...n.common,issues:[]},parent:null},l=f._parseSync({data:n.data,path:n.path,parent:h});if(l.status==="valid")return l;l.status==="dirty"&&!i&&(i={result:l,ctx:h}),h.common.issues.length&&o.push(h.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(f=>new lt(f));return D(n,{code:H.invalid_union,unionErrors:a}),Q}}get options(){return this._def.options}}ir.create=(t,e)=>new ir({options:t,typeName:W.ZodUnion,...ee(e)});const zr=t=>t instanceof cr?zr(t.schema):t instanceof pt?zr(t.innerType()):t instanceof ur?[t.value]:t instanceof an?t.options:t instanceof fr?Object.keys(t.enum):t instanceof hr?zr(t._def.innerType):t instanceof rr?[void 0]:t instanceof sr?[null]:null;class Es extends re{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==R.object)return D(n,{code:H.invalid_type,expected:R.object,received:n.parsedType}),Q;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(D(n,{code:H.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Q)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=zr(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new Es({typeName:W.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...ee(r)})}}function ri(t,e){const n=Xt(t),r=Xt(e);if(t===e)return{valid:!0,data:t};if(n===R.object&&r===R.object){const s=fe.objectKeys(e),i=fe.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const f=ri(t[a],e[a]);if(!f.valid)return{valid:!1};o[a]=f.data}return{valid:!0,data:o}}else if(n===R.array&&r===R.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],f=ri(o,a);if(!f.valid)return{valid:!1};s.push(f.data)}return{valid:!0,data:s}}else return n===R.date&&r===R.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class or extends re{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(ti(i)||ti(o))return Q;const a=ri(i.value,o.value);return a.valid?((ni(i)||ni(o))&&n.dirty(),{status:n.value,value:a.data}):(D(r,{code:H.invalid_intersection_types}),Q)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}or.create=(t,e,n)=>new or({left:t,right:e,typeName:W.ZodIntersection,...ee(n)});class _t extends re{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==R.array)return D(r,{code:H.invalid_type,expected:R.array,received:r.parsedType}),Q;if(r.data.length<this._def.items.length)return D(r,{code:H.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Q;!this._def.rest&&r.data.length>this._def.items.length&&(D(r,{code:H.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const f=this._def.items[a]||this._def.rest;return f?f._parse(new Bt(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Me.mergeArray(n,o)):Me.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new _t({...this._def,rest:e})}}_t.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new _t({items:t,typeName:W.ZodTuple,rest:null,...ee(e)})};class ar extends re{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==R.object)return D(r,{code:H.invalid_type,expected:R.object,received:r.parsedType}),Q;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new Bt(r,a,r.path,a)),value:o._parse(new Bt(r,r.data[a],r.path,a))});return r.common.async?Me.mergeObjectAsync(n,s):Me.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof re?new ar({keyType:e,valueType:n,typeName:W.ZodRecord,...ee(r)}):new ar({keyType:ht.create(),valueType:e,typeName:W.ZodRecord,...ee(n)})}}class fs extends re{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==R.map)return D(r,{code:H.invalid_type,expected:R.map,received:r.parsedType}),Q;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,f],h)=>({key:s._parse(new Bt(r,a,r.path,[h,"key"])),value:i._parse(new Bt(r,f,r.path,[h,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const f of o){const h=await f.key,l=await f.value;if(h.status==="aborted"||l.status==="aborted")return Q;(h.status==="dirty"||l.status==="dirty")&&n.dirty(),a.set(h.value,l.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const f of o){const h=f.key,l=f.value;if(h.status==="aborted"||l.status==="aborted")return Q;(h.status==="dirty"||l.status==="dirty")&&n.dirty(),a.set(h.value,l.value)}return{status:n.value,value:a}}}}fs.create=(t,e,n)=>new fs({valueType:e,keyType:t,typeName:W.ZodMap,...ee(n)});class mn extends re{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==R.set)return D(r,{code:H.invalid_type,expected:R.set,received:r.parsedType}),Q;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(D(r,{code:H.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(D(r,{code:H.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(f){const h=new Set;for(const l of f){if(l.status==="aborted")return Q;l.status==="dirty"&&n.dirty(),h.add(l.value)}return{status:n.value,value:h}}const a=[...r.data.values()].map((f,h)=>i._parse(new Bt(r,f,r.path,h)));return r.common.async?Promise.all(a).then(f=>o(f)):o(a)}min(e,n){return new mn({...this._def,minSize:{value:e,message:q.toString(n)}})}max(e,n){return new mn({...this._def,maxSize:{value:e,message:q.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}mn.create=(t,e)=>new mn({valueType:t,minSize:null,maxSize:null,typeName:W.ZodSet,...ee(e)});class On extends re{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==R.function)return D(n,{code:H.invalid_type,expected:R.function,received:n.parsedType}),Q;function r(a,f){return is({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,ss(),tr].filter(h=>!!h),issueData:{code:H.invalid_arguments,argumentsError:f}})}function s(a,f){return is({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,ss(),tr].filter(h=>!!h),issueData:{code:H.invalid_return_type,returnTypeError:f}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;return this._def.returns instanceof Fn?Je(async(...a)=>{const f=new lt([]),h=await this._def.args.parseAsync(a,i).catch(y=>{throw f.addIssue(r(a,y)),f}),l=await o(...h);return await this._def.returns._def.type.parseAsync(l,i).catch(y=>{throw f.addIssue(s(l,y)),f})}):Je((...a)=>{const f=this._def.args.safeParse(a,i);if(!f.success)throw new lt([r(a,f.error)]);const h=o(...f.data),l=this._def.returns.safeParse(h,i);if(!l.success)throw new lt([s(h,l.error)]);return l.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new On({...this._def,args:_t.create(e).rest(pn.create())})}returns(e){return new On({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new On({args:e||_t.create([]).rest(pn.create()),returns:n||pn.create(),typeName:W.ZodFunction,...ee(r)})}}class cr extends re{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}cr.create=(t,e)=>new cr({getter:t,typeName:W.ZodLazy,...ee(e)});class ur extends re{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return D(n,{received:n.data,code:H.invalid_literal,expected:this._def.value}),Q}return{status:"valid",value:e.data}}get value(){return this._def.value}}ur.create=(t,e)=>new ur({value:t,typeName:W.ZodLiteral,...ee(e)});function Eu(t,e){return new an({values:t,typeName:W.ZodEnum,...ee(e)})}class an extends re{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return D(n,{expected:fe.joinValues(r),received:n.parsedType,code:H.invalid_type}),Q}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return D(n,{received:n.data,code:H.invalid_enum_value,options:r}),Q}return Je(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return an.create(e)}exclude(e){return an.create(this.options.filter(n=>!e.includes(n)))}}an.create=Eu;class fr extends re{_parse(e){const n=fe.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==R.string&&r.parsedType!==R.number){const s=fe.objectValues(n);return D(r,{expected:fe.joinValues(s),received:r.parsedType,code:H.invalid_type}),Q}if(n.indexOf(e.data)===-1){const s=fe.objectValues(n);return D(r,{received:r.data,code:H.invalid_enum_value,options:s}),Q}return Je(e.data)}get enum(){return this._def.values}}fr.create=(t,e)=>new fr({values:t,typeName:W.ZodNativeEnum,...ee(e)});class Fn extends re{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==R.promise&&n.common.async===!1)return D(n,{code:H.invalid_type,expected:R.promise,received:n.parsedType}),Q;const r=n.parsedType===R.promise?n.data:Promise.resolve(n.data);return Je(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Fn.create=(t,e)=>new Fn({type:t,typeName:W.ZodPromise,...ee(e)});class pt extends re{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===W.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null;if(s.type==="preprocess"){const o=s.transform(r.data);return r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}const i={addIssue:o=>{D(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="refinement"){const o=a=>{const f=s.refinement(a,i);if(r.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Q:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Q:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!os(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>os(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);fe.assertNever(s)}}pt.create=(t,e,n)=>new pt({schema:t,typeName:W.ZodEffects,effect:e,...ee(n)});pt.createWithPreprocess=(t,e,n)=>new pt({schema:e,effect:{type:"preprocess",transform:t},typeName:W.ZodEffects,...ee(n)});class $t extends re{_parse(e){return this._getType(e)===R.undefined?Je(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}$t.create=(t,e)=>new $t({innerType:t,typeName:W.ZodOptional,...ee(e)});class bn extends re{_parse(e){return this._getType(e)===R.null?Je(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}bn.create=(t,e)=>new bn({innerType:t,typeName:W.ZodNullable,...ee(e)});class hr extends re{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===R.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}hr.create=(t,e)=>new hr({innerType:t,typeName:W.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ee(e)});class hs extends re{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return as(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new lt(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new lt(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}hs.create=(t,e)=>new hs({innerType:t,typeName:W.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ee(e)});class ls extends re{_parse(e){if(this._getType(e)!==R.nan){const r=this._getOrReturnCtx(e);return D(r,{code:H.invalid_type,expected:R.nan,received:r.parsedType}),Q}return{status:"valid",value:e.data}}}ls.create=t=>new ls({typeName:W.ZodNaN,...ee(t)});const $1=Symbol("zod_brand");class Au extends re{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class wr extends re{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Q:i.status==="dirty"?(n.dirty(),vu(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Q:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new wr({in:e,out:n,typeName:W.ZodPipeline})}}const Su=(t,e={},n)=>t?Dn.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,f=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,h=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...h,fatal:f})}}):Dn.create(),U1={object:Ae.lazycreate};var W;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline"})(W||(W={}));const O1=(t,e={message:`Input not instance of ${t.name}`})=>Su(n=>n instanceof t,e),Bu=ht.create,_u=sn.create,P1=ls.create,C1=on.create,Iu=nr.create,H1=xn.create,N1=cs.create,L1=rr.create,R1=sr.create,D1=Dn.create,F1=pn.create,j1=Ot.create,Z1=us.create,M1=dt.create,z1=Ae.create,V1=Ae.strictCreate,q1=ir.create,K1=Es.create,G1=or.create,W1=_t.create,Y1=ar.create,X1=fs.create,J1=mn.create,Q1=On.create,eg=cr.create,tg=ur.create,ng=an.create,rg=fr.create,sg=Fn.create,qo=pt.create,ig=$t.create,og=bn.create,ag=pt.createWithPreprocess,cg=wr.create,ug=()=>Bu().optional(),fg=()=>_u().optional(),hg=()=>Iu().optional(),lg={string:t=>ht.create({...t,coerce:!0}),number:t=>sn.create({...t,coerce:!0}),boolean:t=>nr.create({...t,coerce:!0}),bigint:t=>on.create({...t,coerce:!0}),date:t=>xn.create({...t,coerce:!0})},dg=Q;var Xe=Object.freeze({__proto__:null,defaultErrorMap:tr,setErrorMap:w1,getErrorMap:ss,makeIssue:is,EMPTY_PATH:x1,addIssueToContext:D,ParseStatus:Me,INVALID:Q,DIRTY:vu,OK:Je,isAborted:ti,isDirty:ni,isValid:os,isAsync:as,get util(){return fe},get objectUtil(){return ei},ZodParsedType:R,getParsedType:Xt,ZodType:re,ZodString:ht,ZodNumber:sn,ZodBigInt:on,ZodBoolean:nr,ZodDate:xn,ZodSymbol:cs,ZodUndefined:rr,ZodNull:sr,ZodAny:Dn,ZodUnknown:pn,ZodNever:Ot,ZodVoid:us,ZodArray:dt,ZodObject:Ae,ZodUnion:ir,ZodDiscriminatedUnion:Es,ZodIntersection:or,ZodTuple:_t,ZodRecord:ar,ZodMap:fs,ZodSet:mn,ZodFunction:On,ZodLazy:cr,ZodLiteral:ur,ZodEnum:an,ZodNativeEnum:fr,ZodPromise:Fn,ZodEffects:pt,ZodTransformer:pt,ZodOptional:$t,ZodNullable:bn,ZodDefault:hr,ZodCatch:hs,ZodNaN:ls,BRAND:$1,ZodBranded:Au,ZodPipeline:wr,custom:Su,Schema:re,ZodSchema:re,late:U1,get ZodFirstPartyTypeKind(){return W},coerce:lg,any:D1,array:M1,bigint:C1,boolean:Iu,date:H1,discriminatedUnion:K1,effect:qo,enum:ng,function:Q1,instanceof:O1,intersection:G1,lazy:eg,literal:tg,map:X1,nan:P1,nativeEnum:rg,never:j1,null:R1,nullable:og,number:_u,object:z1,oboolean:hg,onumber:fg,optional:ig,ostring:ug,pipeline:cg,preprocess:ag,promise:sg,record:Y1,set:J1,strictObject:V1,string:Bu,symbol:N1,transformer:qo,tuple:W1,undefined:L1,union:q1,unknown:F1,void:Z1,NEVER:dg,ZodIssueCode:H,quotelessJson:y1,ZodError:lt});const Tu=Xe.string().regex(/^[a-fA-F0-9]$/),pg=Xe.string().regex(/^[a-fA-F0-9]{64}$/),jn=Xe.number().min(0).max(4294967295),gg=Xe.bigint(),ku=Xe.instanceof(Uint8Array),yg=Xe.union([Tu,jn,Xe.string(),ku]).array(),Ji=Xe.union([yg,Tu,ku]),wg=Xe.array(Ji),$u=Xe.object({value:Xe.union([jn,gg]),scriptPubKey:Ji}),xg=Xe.object({txid:pg,vout:jn,scriptSig:Ji,sequence:jn,prevout:$u.optional(),witness:wg});Xe.object({version:jn,vin:Xe.array(xg),vout:Xe.array($u),locktime:jn});var Uu={},As={};As.byteLength=vg;As.toByteArray=Ag;As.fromByteArray=_g;var vt=[],at=[],mg=typeof Uint8Array<"u"?Uint8Array:Array,Rs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var In=0,bg=Rs.length;In<bg;++In)vt[In]=Rs[In],at[Rs.charCodeAt(In)]=In;at["-".charCodeAt(0)]=62;at["_".charCodeAt(0)]=63;function Ou(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function vg(t){var e=Ou(t),n=e[0],r=e[1];return(n+r)*3/4-r}function Eg(t,e,n){return(e+n)*3/4-n}function Ag(t){var e,n=Ou(t),r=n[0],s=n[1],i=new mg(Eg(t,r,s)),o=0,a=s>0?r-4:r,f;for(f=0;f<a;f+=4)e=at[t.charCodeAt(f)]<<18|at[t.charCodeAt(f+1)]<<12|at[t.charCodeAt(f+2)]<<6|at[t.charCodeAt(f+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=e&255;return s===2&&(e=at[t.charCodeAt(f)]<<2|at[t.charCodeAt(f+1)]>>4,i[o++]=e&255),s===1&&(e=at[t.charCodeAt(f)]<<10|at[t.charCodeAt(f+1)]<<4|at[t.charCodeAt(f+2)]>>2,i[o++]=e>>8&255,i[o++]=e&255),i}function Sg(t){return vt[t>>18&63]+vt[t>>12&63]+vt[t>>6&63]+vt[t&63]}function Bg(t,e,n){for(var r,s=[],i=e;i<n;i+=3)r=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),s.push(Sg(r));return s.join("")}function _g(t){for(var e,n=t.length,r=n%3,s=[],i=16383,o=0,a=n-r;o<a;o+=i)s.push(Bg(t,o,o+i>a?a:o+i));return r===1?(e=t[n-1],s.push(vt[e>>2]+vt[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],s.push(vt[e>>10]+vt[e>>4&63]+vt[e<<2&63]+"=")),s.join("")}var Qi={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Qi.read=function(t,e,n,r,s){var i,o,a=s*8-r-1,f=(1<<a)-1,h=f>>1,l=-7,p=n?s-1:0,y=n?-1:1,w=t[e+p];for(p+=y,i=w&(1<<-l)-1,w>>=-l,l+=a;l>0;i=i*256+t[e+p],p+=y,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=r;l>0;o=o*256+t[e+p],p+=y,l-=8);if(i===0)i=1-h;else{if(i===f)return o?NaN:(w?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-h}return(w?-1:1)*o*Math.pow(2,i-r)};Qi.write=function(t,e,n,r,s,i){var o,a,f,h=i*8-s-1,l=(1<<h)-1,p=l>>1,y=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=r?0:i-1,b=r?1:-1,x=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-o))<1&&(o--,f*=2),o+p>=1?e+=y/f:e+=y*Math.pow(2,1-p),e*f>=2&&(o++,f/=2),o+p>=l?(a=0,o=l):o+p>=1?(a=(e*f-1)*Math.pow(2,s),o=o+p):(a=e*Math.pow(2,p-1)*Math.pow(2,s),o=0));s>=8;t[n+w]=a&255,w+=b,a/=256,s-=8);for(o=o<<s|a,h+=s;h>0;t[n+w]=o&255,w+=b,o/=256,h-=8);t[n+w-b]|=x*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=As,n=Qi,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=_,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const d=new Uint8Array(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,Uint8Array.prototype),Object.setPrototypeOf(d,c),d.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(d){if(d>s)throw new RangeError('The value "'+d+'" is invalid for option "size"');const c=new Uint8Array(d);return Object.setPrototypeOf(c,a.prototype),c}function a(d,c,u){if(typeof d=="number"){if(typeof c=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(d)}return f(d,c,u)}a.poolSize=8192;function f(d,c,u){if(typeof d=="string")return y(d,c);if(ArrayBuffer.isView(d))return b(d);if(d==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);if(wt(d,ArrayBuffer)||d&&wt(d.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(wt(d,SharedArrayBuffer)||d&&wt(d.buffer,SharedArrayBuffer)))return x(d,c,u);if(typeof d=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const g=d.valueOf&&d.valueOf();if(g!=null&&g!==d)return a.from(g,c,u);const m=v(d);if(m)return m;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof d[Symbol.toPrimitive]=="function")return a.from(d[Symbol.toPrimitive]("string"),c,u);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d)}a.from=function(d,c,u){return f(d,c,u)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function h(d){if(typeof d!="number")throw new TypeError('"size" argument must be of type number');if(d<0)throw new RangeError('The value "'+d+'" is invalid for option "size"')}function l(d,c,u){return h(d),d<=0?o(d):c!==void 0?typeof u=="string"?o(d).fill(c,u):o(d).fill(c):o(d)}a.alloc=function(d,c,u){return l(d,c,u)};function p(d){return h(d),o(d<0?0:S(d)|0)}a.allocUnsafe=function(d){return p(d)},a.allocUnsafeSlow=function(d){return p(d)};function y(d,c){if((typeof c!="string"||c==="")&&(c="utf8"),!a.isEncoding(c))throw new TypeError("Unknown encoding: "+c);const u=B(d,c)|0;let g=o(u);const m=g.write(d,c);return m!==u&&(g=g.slice(0,m)),g}function w(d){const c=d.length<0?0:S(d.length)|0,u=o(c);for(let g=0;g<c;g+=1)u[g]=d[g]&255;return u}function b(d){if(wt(d,Uint8Array)){const c=new Uint8Array(d);return x(c.buffer,c.byteOffset,c.byteLength)}return w(d)}function x(d,c,u){if(c<0||d.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(d.byteLength<c+(u||0))throw new RangeError('"length" is outside of buffer bounds');let g;return c===void 0&&u===void 0?g=new Uint8Array(d):u===void 0?g=new Uint8Array(d,c):g=new Uint8Array(d,c,u),Object.setPrototypeOf(g,a.prototype),g}function v(d){if(a.isBuffer(d)){const c=S(d.length)|0,u=o(c);return u.length===0||d.copy(u,0,0,c),u}if(d.length!==void 0)return typeof d.length!="number"||Is(d.length)?o(0):w(d);if(d.type==="Buffer"&&Array.isArray(d.data))return w(d.data)}function S(d){if(d>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return d|0}function _(d){return+d!=d&&(d=0),a.alloc(+d)}a.isBuffer=function(c){return c!=null&&c._isBuffer===!0&&c!==a.prototype},a.compare=function(c,u){if(wt(c,Uint8Array)&&(c=a.from(c,c.offset,c.byteLength)),wt(u,Uint8Array)&&(u=a.from(u,u.offset,u.byteLength)),!a.isBuffer(c)||!a.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===u)return 0;let g=c.length,m=u.length;for(let E=0,I=Math.min(g,m);E<I;++E)if(c[E]!==u[E]){g=c[E],m=u[E];break}return g<m?-1:m<g?1:0},a.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(c,u){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return a.alloc(0);let g;if(u===void 0)for(u=0,g=0;g<c.length;++g)u+=c[g].length;const m=a.allocUnsafe(u);let E=0;for(g=0;g<c.length;++g){let I=c[g];if(wt(I,Uint8Array))E+I.length>m.length?(a.isBuffer(I)||(I=a.from(I)),I.copy(m,E)):Uint8Array.prototype.set.call(m,I,E);else if(a.isBuffer(I))I.copy(m,E);else throw new TypeError('"list" argument must be an Array of Buffers');E+=I.length}return m};function B(d,c){if(a.isBuffer(d))return d.length;if(ArrayBuffer.isView(d)||wt(d,ArrayBuffer))return d.byteLength;if(typeof d!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof d);const u=d.length,g=arguments.length>2&&arguments[2]===!0;if(!g&&u===0)return 0;let m=!1;for(;;)switch(c){case"ascii":case"latin1":case"binary":return u;case"utf8":case"utf-8":return _s(d).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u*2;case"hex":return u>>>1;case"base64":return ro(d).length;default:if(m)return g?-1:_s(d).length;c=(""+c).toLowerCase(),m=!0}}a.byteLength=B;function P(d,c,u){let g=!1;if((c===void 0||c<0)&&(c=0),c>this.length||((u===void 0||u>this.length)&&(u=this.length),u<=0)||(u>>>=0,c>>>=0,u<=c))return"";for(d||(d="utf8");;)switch(d){case"hex":return X(this,c,u);case"utf8":case"utf-8":return ce(this,c,u);case"ascii":return F(this,c,u);case"latin1":case"binary":return z(this,c,u);case"base64":return ie(this,c,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,c,u);default:if(g)throw new TypeError("Unknown encoding: "+d);d=(d+"").toLowerCase(),g=!0}}a.prototype._isBuffer=!0;function T(d,c,u){const g=d[c];d[c]=d[u],d[u]=g}a.prototype.swap16=function(){const c=this.length;if(c%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<c;u+=2)T(this,u,u+1);return this},a.prototype.swap32=function(){const c=this.length;if(c%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<c;u+=4)T(this,u,u+3),T(this,u+1,u+2);return this},a.prototype.swap64=function(){const c=this.length;if(c%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<c;u+=8)T(this,u,u+7),T(this,u+1,u+6),T(this,u+2,u+5),T(this,u+3,u+4);return this},a.prototype.toString=function(){const c=this.length;return c===0?"":arguments.length===0?ce(this,0,c):P.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(c){if(!a.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:a.compare(this,c)===0},a.prototype.inspect=function(){let c="";const u=t.INSPECT_MAX_BYTES;return c=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(c+=" ... "),"<Buffer "+c+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(c,u,g,m,E){if(wt(c,Uint8Array)&&(c=a.from(c,c.offset,c.byteLength)),!a.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(u===void 0&&(u=0),g===void 0&&(g=c?c.length:0),m===void 0&&(m=0),E===void 0&&(E=this.length),u<0||g>c.length||m<0||E>this.length)throw new RangeError("out of range index");if(m>=E&&u>=g)return 0;if(m>=E)return-1;if(u>=g)return 1;if(u>>>=0,g>>>=0,m>>>=0,E>>>=0,this===c)return 0;let I=E-m,se=g-u;const Be=Math.min(I,se),be=this.slice(m,E),_e=c.slice(u,g);for(let we=0;we<Be;++we)if(be[we]!==_e[we]){I=be[we],se=_e[we];break}return I<se?-1:se<I?1:0};function U(d,c,u,g,m){if(d.length===0)return-1;if(typeof u=="string"?(g=u,u=0):u>2147483647?u=2147483647:u<-2147483648&&(u=-2147483648),u=+u,Is(u)&&(u=m?0:d.length-1),u<0&&(u=d.length+u),u>=d.length){if(m)return-1;u=d.length-1}else if(u<0)if(m)u=0;else return-1;if(typeof c=="string"&&(c=a.from(c,g)),a.isBuffer(c))return c.length===0?-1:C(d,c,u,g,m);if(typeof c=="number")return c=c&255,typeof Uint8Array.prototype.indexOf=="function"?m?Uint8Array.prototype.indexOf.call(d,c,u):Uint8Array.prototype.lastIndexOf.call(d,c,u):C(d,[c],u,g,m);throw new TypeError("val must be string, number or Buffer")}function C(d,c,u,g,m){let E=1,I=d.length,se=c.length;if(g!==void 0&&(g=String(g).toLowerCase(),g==="ucs2"||g==="ucs-2"||g==="utf16le"||g==="utf-16le")){if(d.length<2||c.length<2)return-1;E=2,I/=2,se/=2,u/=2}function Be(_e,we){return E===1?_e[we]:_e.readUInt16BE(we*E)}let be;if(m){let _e=-1;for(be=u;be<I;be++)if(Be(d,be)===Be(c,_e===-1?0:be-_e)){if(_e===-1&&(_e=be),be-_e+1===se)return _e*E}else _e!==-1&&(be-=be-_e),_e=-1}else for(u+se>I&&(u=I-se),be=u;be>=0;be--){let _e=!0;for(let we=0;we<se;we++)if(Be(d,be+we)!==Be(c,we)){_e=!1;break}if(_e)return be}return-1}a.prototype.includes=function(c,u,g){return this.indexOf(c,u,g)!==-1},a.prototype.indexOf=function(c,u,g){return U(this,c,u,g,!0)},a.prototype.lastIndexOf=function(c,u,g){return U(this,c,u,g,!1)};function $(d,c,u,g){u=Number(u)||0;const m=d.length-u;g?(g=Number(g),g>m&&(g=m)):g=m;const E=c.length;g>E/2&&(g=E/2);let I;for(I=0;I<g;++I){const se=parseInt(c.substr(I*2,2),16);if(Is(se))return I;d[u+I]=se}return I}function N(d,c,u,g){return br(_s(c,d.length-u),d,u,g)}function j(d,c,u,g){return br(Vu(c),d,u,g)}function V(d,c,u,g){return br(ro(c),d,u,g)}function Y(d,c,u,g){return br(qu(c,d.length-u),d,u,g)}a.prototype.write=function(c,u,g,m){if(u===void 0)m="utf8",g=this.length,u=0;else if(g===void 0&&typeof u=="string")m=u,g=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(g)?(g=g>>>0,m===void 0&&(m="utf8")):(m=g,g=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const E=this.length-u;if((g===void 0||g>E)&&(g=E),c.length>0&&(g<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");m||(m="utf8");let I=!1;for(;;)switch(m){case"hex":return $(this,c,u,g);case"utf8":case"utf-8":return N(this,c,u,g);case"ascii":case"latin1":case"binary":return j(this,c,u,g);case"base64":return V(this,c,u,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y(this,c,u,g);default:if(I)throw new TypeError("Unknown encoding: "+m);m=(""+m).toLowerCase(),I=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ie(d,c,u){return c===0&&u===d.length?e.fromByteArray(d):e.fromByteArray(d.slice(c,u))}function ce(d,c,u){u=Math.min(d.length,u);const g=[];let m=c;for(;m<u;){const E=d[m];let I=null,se=E>239?4:E>223?3:E>191?2:1;if(m+se<=u){let Be,be,_e,we;switch(se){case 1:E<128&&(I=E);break;case 2:Be=d[m+1],(Be&192)===128&&(we=(E&31)<<6|Be&63,we>127&&(I=we));break;case 3:Be=d[m+1],be=d[m+2],(Be&192)===128&&(be&192)===128&&(we=(E&15)<<12|(Be&63)<<6|be&63,we>2047&&(we<55296||we>57343)&&(I=we));break;case 4:Be=d[m+1],be=d[m+2],_e=d[m+3],(Be&192)===128&&(be&192)===128&&(_e&192)===128&&(we=(E&15)<<18|(Be&63)<<12|(be&63)<<6|_e&63,we>65535&&we<1114112&&(I=we))}}I===null?(I=65533,se=1):I>65535&&(I-=65536,g.push(I>>>10&1023|55296),I=56320|I&1023),g.push(I),m+=se}return O(g)}const k=4096;function O(d){const c=d.length;if(c<=k)return String.fromCharCode.apply(String,d);let u="",g=0;for(;g<c;)u+=String.fromCharCode.apply(String,d.slice(g,g+=k));return u}function F(d,c,u){let g="";u=Math.min(d.length,u);for(let m=c;m<u;++m)g+=String.fromCharCode(d[m]&127);return g}function z(d,c,u){let g="";u=Math.min(d.length,u);for(let m=c;m<u;++m)g+=String.fromCharCode(d[m]);return g}function X(d,c,u){const g=d.length;(!c||c<0)&&(c=0),(!u||u<0||u>g)&&(u=g);let m="";for(let E=c;E<u;++E)m+=Ku[d[E]];return m}function ye(d,c,u){const g=d.slice(c,u);let m="";for(let E=0;E<g.length-1;E+=2)m+=String.fromCharCode(g[E]+g[E+1]*256);return m}a.prototype.slice=function(c,u){const g=this.length;c=~~c,u=u===void 0?g:~~u,c<0?(c+=g,c<0&&(c=0)):c>g&&(c=g),u<0?(u+=g,u<0&&(u=0)):u>g&&(u=g),u<c&&(u=c);const m=this.subarray(c,u);return Object.setPrototypeOf(m,a.prototype),m};function K(d,c,u){if(d%1!==0||d<0)throw new RangeError("offset is not uint");if(d+c>u)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(c,u,g){c=c>>>0,u=u>>>0,g||K(c,u,this.length);let m=this[c],E=1,I=0;for(;++I<u&&(E*=256);)m+=this[c+I]*E;return m},a.prototype.readUintBE=a.prototype.readUIntBE=function(c,u,g){c=c>>>0,u=u>>>0,g||K(c,u,this.length);let m=this[c+--u],E=1;for(;u>0&&(E*=256);)m+=this[c+--u]*E;return m},a.prototype.readUint8=a.prototype.readUInt8=function(c,u){return c=c>>>0,u||K(c,1,this.length),this[c]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(c,u){return c=c>>>0,u||K(c,2,this.length),this[c]|this[c+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(c,u){return c=c>>>0,u||K(c,2,this.length),this[c]<<8|this[c+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(c,u){return c=c>>>0,u||K(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(c,u){return c=c>>>0,u||K(c,4,this.length),this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])},a.prototype.readBigUInt64LE=Ct(function(c){c=c>>>0,Se(c,"offset");const u=this[c],g=this[c+7];(u===void 0||g===void 0)&&je(c,this.length-8);const m=u+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24,E=this[++c]+this[++c]*2**8+this[++c]*2**16+g*2**24;return BigInt(m)+(BigInt(E)<<BigInt(32))}),a.prototype.readBigUInt64BE=Ct(function(c){c=c>>>0,Se(c,"offset");const u=this[c],g=this[c+7];(u===void 0||g===void 0)&&je(c,this.length-8);const m=u*2**24+this[++c]*2**16+this[++c]*2**8+this[++c],E=this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+g;return(BigInt(m)<<BigInt(32))+BigInt(E)}),a.prototype.readIntLE=function(c,u,g){c=c>>>0,u=u>>>0,g||K(c,u,this.length);let m=this[c],E=1,I=0;for(;++I<u&&(E*=256);)m+=this[c+I]*E;return E*=128,m>=E&&(m-=Math.pow(2,8*u)),m},a.prototype.readIntBE=function(c,u,g){c=c>>>0,u=u>>>0,g||K(c,u,this.length);let m=u,E=1,I=this[c+--m];for(;m>0&&(E*=256);)I+=this[c+--m]*E;return E*=128,I>=E&&(I-=Math.pow(2,8*u)),I},a.prototype.readInt8=function(c,u){return c=c>>>0,u||K(c,1,this.length),this[c]&128?(255-this[c]+1)*-1:this[c]},a.prototype.readInt16LE=function(c,u){c=c>>>0,u||K(c,2,this.length);const g=this[c]|this[c+1]<<8;return g&32768?g|4294901760:g},a.prototype.readInt16BE=function(c,u){c=c>>>0,u||K(c,2,this.length);const g=this[c+1]|this[c]<<8;return g&32768?g|4294901760:g},a.prototype.readInt32LE=function(c,u){return c=c>>>0,u||K(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},a.prototype.readInt32BE=function(c,u){return c=c>>>0,u||K(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},a.prototype.readBigInt64LE=Ct(function(c){c=c>>>0,Se(c,"offset");const u=this[c],g=this[c+7];(u===void 0||g===void 0)&&je(c,this.length-8);const m=this[c+4]+this[c+5]*2**8+this[c+6]*2**16+(g<<24);return(BigInt(m)<<BigInt(32))+BigInt(u+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24)}),a.prototype.readBigInt64BE=Ct(function(c){c=c>>>0,Se(c,"offset");const u=this[c],g=this[c+7];(u===void 0||g===void 0)&&je(c,this.length-8);const m=(u<<24)+this[++c]*2**16+this[++c]*2**8+this[++c];return(BigInt(m)<<BigInt(32))+BigInt(this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+g)}),a.prototype.readFloatLE=function(c,u){return c=c>>>0,u||K(c,4,this.length),n.read(this,c,!0,23,4)},a.prototype.readFloatBE=function(c,u){return c=c>>>0,u||K(c,4,this.length),n.read(this,c,!1,23,4)},a.prototype.readDoubleLE=function(c,u){return c=c>>>0,u||K(c,8,this.length),n.read(this,c,!0,52,8)},a.prototype.readDoubleBE=function(c,u){return c=c>>>0,u||K(c,8,this.length),n.read(this,c,!1,52,8)};function J(d,c,u,g,m,E){if(!a.isBuffer(d))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>m||c<E)throw new RangeError('"value" argument is out of bounds');if(u+g>d.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(c,u,g,m){if(c=+c,u=u>>>0,g=g>>>0,!m){const se=Math.pow(2,8*g)-1;J(this,c,u,g,se,0)}let E=1,I=0;for(this[u]=c&255;++I<g&&(E*=256);)this[u+I]=c/E&255;return u+g},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(c,u,g,m){if(c=+c,u=u>>>0,g=g>>>0,!m){const se=Math.pow(2,8*g)-1;J(this,c,u,g,se,0)}let E=g-1,I=1;for(this[u+E]=c&255;--E>=0&&(I*=256);)this[u+E]=c/I&255;return u+g},a.prototype.writeUint8=a.prototype.writeUInt8=function(c,u,g){return c=+c,u=u>>>0,g||J(this,c,u,1,255,0),this[u]=c&255,u+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(c,u,g){return c=+c,u=u>>>0,g||J(this,c,u,2,65535,0),this[u]=c&255,this[u+1]=c>>>8,u+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(c,u,g){return c=+c,u=u>>>0,g||J(this,c,u,2,65535,0),this[u]=c>>>8,this[u+1]=c&255,u+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(c,u,g){return c=+c,u=u>>>0,g||J(this,c,u,4,4294967295,0),this[u+3]=c>>>24,this[u+2]=c>>>16,this[u+1]=c>>>8,this[u]=c&255,u+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(c,u,g){return c=+c,u=u>>>0,g||J(this,c,u,4,4294967295,0),this[u]=c>>>24,this[u+1]=c>>>16,this[u+2]=c>>>8,this[u+3]=c&255,u+4};function me(d,c,u,g,m){qe(c,g,m,d,u,7);let E=Number(c&BigInt(4294967295));d[u++]=E,E=E>>8,d[u++]=E,E=E>>8,d[u++]=E,E=E>>8,d[u++]=E;let I=Number(c>>BigInt(32)&BigInt(4294967295));return d[u++]=I,I=I>>8,d[u++]=I,I=I>>8,d[u++]=I,I=I>>8,d[u++]=I,u}function le(d,c,u,g,m){qe(c,g,m,d,u,7);let E=Number(c&BigInt(4294967295));d[u+7]=E,E=E>>8,d[u+6]=E,E=E>>8,d[u+5]=E,E=E>>8,d[u+4]=E;let I=Number(c>>BigInt(32)&BigInt(4294967295));return d[u+3]=I,I=I>>8,d[u+2]=I,I=I>>8,d[u+1]=I,I=I>>8,d[u]=I,u+8}a.prototype.writeBigUInt64LE=Ct(function(c,u=0){return me(this,c,u,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Ct(function(c,u=0){return le(this,c,u,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(c,u,g,m){if(c=+c,u=u>>>0,!m){const Be=Math.pow(2,8*g-1);J(this,c,u,g,Be-1,-Be)}let E=0,I=1,se=0;for(this[u]=c&255;++E<g&&(I*=256);)c<0&&se===0&&this[u+E-1]!==0&&(se=1),this[u+E]=(c/I>>0)-se&255;return u+g},a.prototype.writeIntBE=function(c,u,g,m){if(c=+c,u=u>>>0,!m){const Be=Math.pow(2,8*g-1);J(this,c,u,g,Be-1,-Be)}let E=g-1,I=1,se=0;for(this[u+E]=c&255;--E>=0&&(I*=256);)c<0&&se===0&&this[u+E+1]!==0&&(se=1),this[u+E]=(c/I>>0)-se&255;return u+g},a.prototype.writeInt8=function(c,u,g){return c=+c,u=u>>>0,g||J(this,c,u,1,127,-128),c<0&&(c=255+c+1),this[u]=c&255,u+1},a.prototype.writeInt16LE=function(c,u,g){return c=+c,u=u>>>0,g||J(this,c,u,2,32767,-32768),this[u]=c&255,this[u+1]=c>>>8,u+2},a.prototype.writeInt16BE=function(c,u,g){return c=+c,u=u>>>0,g||J(this,c,u,2,32767,-32768),this[u]=c>>>8,this[u+1]=c&255,u+2},a.prototype.writeInt32LE=function(c,u,g){return c=+c,u=u>>>0,g||J(this,c,u,4,2147483647,-2147483648),this[u]=c&255,this[u+1]=c>>>8,this[u+2]=c>>>16,this[u+3]=c>>>24,u+4},a.prototype.writeInt32BE=function(c,u,g){return c=+c,u=u>>>0,g||J(this,c,u,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[u]=c>>>24,this[u+1]=c>>>16,this[u+2]=c>>>8,this[u+3]=c&255,u+4},a.prototype.writeBigInt64LE=Ct(function(c,u=0){return me(this,c,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Ct(function(c,u=0){return le(this,c,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ue(d,c,u,g,m,E){if(u+g>d.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("Index out of range")}function Ue(d,c,u,g,m){return c=+c,u=u>>>0,m||ue(d,c,u,4),n.write(d,c,u,g,23,4),u+4}a.prototype.writeFloatLE=function(c,u,g){return Ue(this,c,u,!0,g)},a.prototype.writeFloatBE=function(c,u,g){return Ue(this,c,u,!1,g)};function Te(d,c,u,g,m){return c=+c,u=u>>>0,m||ue(d,c,u,8),n.write(d,c,u,g,52,8),u+8}a.prototype.writeDoubleLE=function(c,u,g){return Te(this,c,u,!0,g)},a.prototype.writeDoubleBE=function(c,u,g){return Te(this,c,u,!1,g)},a.prototype.copy=function(c,u,g,m){if(!a.isBuffer(c))throw new TypeError("argument should be a Buffer");if(g||(g=0),!m&&m!==0&&(m=this.length),u>=c.length&&(u=c.length),u||(u=0),m>0&&m<g&&(m=g),m===g||c.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(g<0||g>=this.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("sourceEnd out of bounds");m>this.length&&(m=this.length),c.length-u<m-g&&(m=c.length-u+g);const E=m-g;return this===c&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,g,m):Uint8Array.prototype.set.call(c,this.subarray(g,m),u),E},a.prototype.fill=function(c,u,g,m){if(typeof c=="string"){if(typeof u=="string"?(m=u,u=0,g=this.length):typeof g=="string"&&(m=g,g=this.length),m!==void 0&&typeof m!="string")throw new TypeError("encoding must be a string");if(typeof m=="string"&&!a.isEncoding(m))throw new TypeError("Unknown encoding: "+m);if(c.length===1){const I=c.charCodeAt(0);(m==="utf8"&&I<128||m==="latin1")&&(c=I)}}else typeof c=="number"?c=c&255:typeof c=="boolean"&&(c=Number(c));if(u<0||this.length<u||this.length<g)throw new RangeError("Out of range index");if(g<=u)return this;u=u>>>0,g=g===void 0?this.length:g>>>0,c||(c=0);let E;if(typeof c=="number")for(E=u;E<g;++E)this[E]=c;else{const I=a.isBuffer(c)?c:a.from(c,m),se=I.length;if(se===0)throw new TypeError('The value "'+c+'" is invalid for argument "value"');for(E=0;E<g-u;++E)this[E+u]=I[E%se]}return this};const Oe={};function ze(d,c,u){Oe[d]=class extends u{constructor(){super(),Object.defineProperty(this,"message",{value:c.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${d}]`,this.stack,delete this.name}get code(){return d}set code(m){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:m,writable:!0})}toString(){return`${this.name} [${d}]: ${this.message}`}}}ze("ERR_BUFFER_OUT_OF_BOUNDS",function(d){return d?`${d} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ze("ERR_INVALID_ARG_TYPE",function(d,c){return`The "${d}" argument must be of type number. Received type ${typeof c}`},TypeError),ze("ERR_OUT_OF_RANGE",function(d,c,u){let g=`The value of "${d}" is out of range.`,m=u;return Number.isInteger(u)&&Math.abs(u)>2**32?m=Ve(String(u)):typeof u=="bigint"&&(m=String(u),(u>BigInt(2)**BigInt(32)||u<-(BigInt(2)**BigInt(32)))&&(m=Ve(m)),m+="n"),g+=` It must be ${c}. Received ${m}`,g},RangeError);function Ve(d){let c="",u=d.length;const g=d[0]==="-"?1:0;for(;u>=g+4;u-=3)c=`_${d.slice(u-3,u)}${c}`;return`${d.slice(0,u)}${c}`}function yt(d,c,u){Se(c,"offset"),(d[c]===void 0||d[c+u]===void 0)&&je(c,d.length-(u+1))}function qe(d,c,u,g,m,E){if(d>u||d<c){const I=typeof c=="bigint"?"n":"";let se;throw E>3?c===0||c===BigInt(0)?se=`>= 0${I} and < 2${I} ** ${(E+1)*8}${I}`:se=`>= -(2${I} ** ${(E+1)*8-1}${I}) and < 2 ** ${(E+1)*8-1}${I}`:se=`>= ${c}${I} and <= ${u}${I}`,new Oe.ERR_OUT_OF_RANGE("value",se,d)}yt(g,m,E)}function Se(d,c){if(typeof d!="number")throw new Oe.ERR_INVALID_ARG_TYPE(c,"number",d)}function je(d,c,u){throw Math.floor(d)!==d?(Se(d,u),new Oe.ERR_OUT_OF_RANGE(u||"offset","an integer",d)):c<0?new Oe.ERR_BUFFER_OUT_OF_BOUNDS:new Oe.ERR_OUT_OF_RANGE(u||"offset",`>= ${u?1:0} and <= ${c}`,d)}const xr=/[^+/0-9A-Za-z-_]/g;function mr(d){if(d=d.split("=")[0],d=d.trim().replace(xr,""),d.length<2)return"";for(;d.length%4!==0;)d=d+"=";return d}function _s(d,c){c=c||1/0;let u;const g=d.length;let m=null;const E=[];for(let I=0;I<g;++I){if(u=d.charCodeAt(I),u>55295&&u<57344){if(!m){if(u>56319){(c-=3)>-1&&E.push(239,191,189);continue}else if(I+1===g){(c-=3)>-1&&E.push(239,191,189);continue}m=u;continue}if(u<56320){(c-=3)>-1&&E.push(239,191,189),m=u;continue}u=(m-55296<<10|u-56320)+65536}else m&&(c-=3)>-1&&E.push(239,191,189);if(m=null,u<128){if((c-=1)<0)break;E.push(u)}else if(u<2048){if((c-=2)<0)break;E.push(u>>6|192,u&63|128)}else if(u<65536){if((c-=3)<0)break;E.push(u>>12|224,u>>6&63|128,u&63|128)}else if(u<1114112){if((c-=4)<0)break;E.push(u>>18|240,u>>12&63|128,u>>6&63|128,u&63|128)}else throw new Error("Invalid code point")}return E}function Vu(d){const c=[];for(let u=0;u<d.length;++u)c.push(d.charCodeAt(u)&255);return c}function qu(d,c){let u,g,m;const E=[];for(let I=0;I<d.length&&!((c-=2)<0);++I)u=d.charCodeAt(I),g=u>>8,m=u%256,E.push(m),E.push(g);return E}function ro(d){return e.toByteArray(mr(d))}function br(d,c,u,g){let m;for(m=0;m<g&&!(m+u>=c.length||m>=d.length);++m)c[m+u]=d[m];return m}function wt(d,c){return d instanceof c||d!=null&&d.constructor!=null&&d.constructor.name!=null&&d.constructor.name===c.name}function Is(d){return d!==d}const Ku=function(){const d="0123456789abcdef",c=new Array(256);for(let u=0;u<16;++u){const g=u*16;for(let m=0;m<16;++m)c[g+m]=d[u]+d[m]}return c}();function Ct(d){return typeof BigInt>"u"?Gu:d}function Gu(){throw new Error("BigInt not supported")}})(Uu);const Ig=t=>t.reduce((e,n)=>e+n.toString(16).padStart(2,"0"),""),Tg=t=>new Promise(function(e){let n=new FileReader;n.onloadend=function(){e(n.result.toString())},n.readAsDataURL(t)}),kg=t=>"0x"+[...new Uint8Array(t)].map(r=>r.toString(16).padStart(2,"0")).join(""),$g=async t=>new Promise(function(e){const n=new FileReader,r=function(){const s=n.result;e(s)};n.addEventListener("load",r),n.readAsArrayBuffer(t)});async function Ug(t){return window.crypto.subtle.digest("SHA-256",t)}const Og=t=>{for(var e=new Uu.Buffer(t.byteLength),n=new Uint8Array(t),r=0;r<e.length;++r)e[r]=n[r];return e},Pg=async t=>{const e=await $g(t),n=await Ug(Og(e));return kg(n)},Cg=t=>{const e=atob(t);let n="";for(let r=0;r<e.length;r++){const s=e.charCodeAt(r).toString(16);n+=s.length===2?s:"0"+s}return n.toLowerCase()},Hg=Ig(gi.utils.randomPrivateKey());let si=!1;const Ng=async()=>{for(;si;)await lr(10)},Ko=t=>{var e=new TextEncoder().encode(t);return[...new Uint8Array(e)].map(n=>n.toString(16).padStart(2,"0")).join("")},Hr=t=>[...new Uint8Array(t)].map(e=>e.toString(16).padStart(2,"0")).join(""),Lg=async(t="mainnet")=>{try{const n=await(await fetch(`https://mempool.space/${t==="testnet"?"testnet/":""}api/v1/fees/recommended`)).json();return n.halfHourFee<6?6:n.halfHourFee}catch{throw new Error("Mempool connection failed for address")}},Go=t=>{var n;const e=(n=t.match(/.{1,2}/g))==null?void 0:n.map(r=>parseInt(r,16));return e?Uint8Array.from(e):new Uint8Array},Rg=t=>{t>=1e8&&(t=t*10);let e=String(t).padStart(8,"0").slice(0,-9)+"."+String(t).padStart(8,"0").slice(-9);return e.substring(0,1)=="."&&(e="0"+e),e},lr=t=>new Promise(e=>setTimeout(e,t)),Dg=async(t,e,n="mainnet")=>{try{const s=await(await fetch(`https://mempool.space/${n==="testnet"?"testnet/":""}api/address/${t}`)).json();return!!(s.chain_stats.tx_count>0||e&&s.mempool_stats.tx_count>0)}catch(r){return console.error(r),!1}},Pu=async(t,e,n="mainnet")=>{let r=!1;async function s(a){return new Promise(function(f){a?f(a):setTimeout(async function(){try{r=await Dg(t,e,n)}catch{}let h=await s(r);f(h)},2e3)})}async function i(){return await s(r)}return await i()},Cu=async(t,e="mainnet")=>{let n="",r=0,s=0;try{(await(await fetch(`https://mempool.space/${e==="testnet"?"testnet/":""}api/address/${t}/txs`)).json()).forEach(a=>{a.vout.forEach((f,h)=>{f.scriptpubkey_address==t&&(n=a.txid,r=h,s=f.value)})})}catch(i){console.error(i)}return[n,r,s]},Hu=async(t,e="mainnet")=>{let n;try{const r=await fetch(`https://mempool.space/${e==="testnet"?"testnet/":""}api/tx`,{method:"POST",body:t});if(n=await r.text(),r.status!==200)throw new Error(n)}catch(r){throw new Error(r.message)}return n};let Wo=!0;const Nu=async(t,e,n,r,s=0,i="mainnet")=>{await Pu(r.inscriptionAddress,Wo,i),await lr(2e3);let o=await Cu(r.inscriptionAddress,i),a=o[0],f=o[2];const h=st.create({vin:[{txid:a,vout:s,prevout:{value:f,scriptPubKey:["OP_1",r.tapkey]}}],vout:[{value:f-r.fee,scriptPubKey:["OP_1",n]}]}),l=await Mr.taproot.sign(e.raw,h,0,{extension:r.leaf});h.vin[0].witness=[l.hex,r.script_orig,r.cblock],console.dir(h,{depth:null});let p=st.encode(h).hex,y;for(await Ng(),si=!0;!y;)y=await Hu(p,i),await lr(2e3);if(si=!1,y.includes("descendant")){Wo=!1,Nu(t,e,n,r,s,i),t("Descendant transaction detected. Waiting for parent to confirm.");return}try{JSON.parse(y)}catch{t(`${y}i0`)}},Lu=async t=>{let e,n=[];try{e=$r.p2tr.decode(t.address).hex}catch{throw new Error("Invalid taproot address")}const r=t.network||"mainnet";try{await(await fetch(`https://mempool.space/${r==="testnet"?"testnet/":""}api/address/${t.address}`)).json()}catch{throw new Error("Mempool connection failed for address")}if(t.text&&t.mimetype)n.push({text:t.text,name:Ko(t.text),hex:Ko(t.text),mimetype:t.mimetype,sha256:""});else if(t.files)if(t.privkey)n=t.files;else for(let O of t.files){if(O.size>=35e4){alert("One of your desired inscriptions exceeds the maximum of 350kb.");break}let F=O.type;F.includes("text/plain")&&(F+=";charset=utf-8");const z=await Tg(O);let X=z.substring(z.indexOf("base64,")+7),ye=Cg(X),K=await Pg(O);n.push({name:O.name,hex:ye,mimetype:F,sha256:K.replace("0x","")})}let s=t.padding||546,i=t.privkey||Hg;localStorage.setItem("pending",JSON.stringify({files:n,address:t.address,mimetype:t.mimetype,text:t.text,padding:s,tip:t.tip,tippingAddress:t.tippingAddress,privkey:i,network:r}));let o=new ds(i),a=o.pub.rawX;const f=new TextEncoder,h=[a,"OP_CHECKSIG"];let l=await Cr.tree.getLeaf(Fe.encode(h)),[p,y]=await Cr.getPubKey(a,{target:l});const w=st.create({vin:[{txid:"a99d1112bcb35845fd44e703ef2c611f0360dd2bb28927625dbc13eab58cd968",vout:0,prevout:{value:1e4,scriptPubKey:["OP_1",p]}}],vout:[{value:8e3,scriptPubKey:["OP_1",p]}]}),b=await Mr.taproot.sign(o.raw,w,0,{extension:l});if(w.vin[0].witness=[b.hex,h,y],!await Mr.taproot.verify(w,0,{pubkey:a})){alert("Generated keys could not be validated. Please reload the app.");return}let v=0,S=[],_=await Lg(r),B=160;for(let O of n){const F=O.hex,z=Go(F),X=f.encode(O.mimetype),ye=[a,"OP_CHECKSIG","OP_0","OP_IF",f.encode("ord"),"01",X,"OP_0",z,"OP_ENDIF"],K=["0x"+Hr(a.buffer),"OP_CHECKSIG","OP_0","OP_IF","0x"+Hr(f.encode("ord")),"01","0x"+Hr(X),"OP_0","0x"+Hr(z),"OP_ENDIF"],J=await Cr.tree.getLeaf(Fe.encode(ye)),[me,le]=await Cr.getPubKey(a,{target:J});let ue=$r.p2tr.encode(me,t.network==="testnet"?"testnet":"main"),Te=160+Math.floor(z.length/4),Oe=_*Te;v+=Oe,S.push({leaf:J,tapkey:me,cblock:le,inscriptionAddress:ue,txsize:Te,fee:Oe,script:K,script_orig:ye})}let P=v+(69+(S.length+1)*2*31+10)*_+B*S.length+s*S.length,T=$r.p2tr.encode(p,r==="testnet"?"testnet":"main");const U=t.tip||1e3;!isNaN(U)&&U>=500&&(P+=50*_+U),console.log(P,Math.ceil(P/1e3)*1e3),t.log(`Please send ${Rg(Math.ceil(P/1e3)*1e3)} btc to ${T} to fund the inscription`),await Pu(T,!0,r),await lr(2e3);let C=await Cu(T,r),$=C[0],N=C[1],j=C[2];t.log(`Do not close browser, '${$}' is confirmed, waiting for inscription to be confirmed...`);let V=[];for(let O of S)V.push({value:s+O.fee,scriptPubKey:["OP_1",O.tapkey]});!isNaN(U)&&U>=500&&V.push({value:U,scriptPubKey:["OP_1",$r.p2tr.decode(t.tippingAddress).hex]});const Y=st.create({vin:[{txid:$,vout:N,prevout:{value:j,scriptPubKey:["OP_1",p]}}],vout:V}),ie=await Mr.taproot.sign(o.raw,Y,0,{extension:l});Y.vin[0].witness=[ie.hex,h,y];let ce=st.encode(Y).hex;console.log("rawtx",Go(ce));let k=!0;for(;k;)try{await Hu(ce,r),k=!1}catch(O){console.error(O),await lr(2e3)}for(let O of S)await Nu(t.log,o,e,O,0,r);localStorage.removeItem("pending")},Fg=t=>{const e=localStorage.getItem("pending");if(e){const n=JSON.parse(e);n&&Lu({log:t,...n})}};var Re=Uint8Array,nt=Uint16Array,eo=Int32Array,Ss=new Re([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Bs=new Re([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ii=new Re([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ru=function(t,e){for(var n=new nt(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var s=new eo(n[30]),r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)s[i]=i-n[r]<<5|r;return{b:n,r:s}},Du=Ru(Ss,2),Fu=Du.b,oi=Du.r;Fu[28]=258,oi[258]=28;var ju=Ru(Bs,0),jg=ju.b,Yo=ju.r,ai=new nt(32768);for(var xe=0;xe<32768;++xe){var Vt=(xe&43690)>>1|(xe&21845)<<1;Vt=(Vt&52428)>>2|(Vt&13107)<<2,Vt=(Vt&61680)>>4|(Vt&3855)<<4,ai[xe]=((Vt&65280)>>8|(Vt&255)<<8)>>1}var Et=function(t,e,n){for(var r=t.length,s=0,i=new nt(e);s<r;++s)t[s]&&++i[t[s]-1];var o=new nt(e);for(s=1;s<e;++s)o[s]=o[s-1]+i[s-1]<<1;var a;if(n){a=new nt(1<<e);var f=15-e;for(s=0;s<r;++s)if(t[s])for(var h=s<<4|t[s],l=e-t[s],p=o[t[s]-1]++<<l,y=p|(1<<l)-1;p<=y;++p)a[ai[p]>>f]=h}else for(a=new nt(r),s=0;s<r;++s)t[s]&&(a[s]=ai[o[t[s]-1]++]>>15-t[s]);return a},cn=new Re(288);for(var xe=0;xe<144;++xe)cn[xe]=8;for(var xe=144;xe<256;++xe)cn[xe]=9;for(var xe=256;xe<280;++xe)cn[xe]=7;for(var xe=280;xe<288;++xe)cn[xe]=8;var dr=new Re(32);for(var xe=0;xe<32;++xe)dr[xe]=5;var Zg=Et(cn,9,0),Mg=Et(cn,9,1),zg=Et(dr,5,0),Vg=Et(dr,5,1),Ds=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},ct=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},Fs=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},to=function(t){return(t+7)/8|0},Zu=function(t,e,n){(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length);var r=new Re(n-e);return r.set(t.subarray(e,n)),r},qg=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Qe=function(t,e,n){var r=new Error(e||qg[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Qe),!n)throw r;return r},no=function(t,e,n,r){var s=t.length,i=r?r.length:0;if(!s||e.f&&!e.l)return n||new Re(0);var o=!n||e.i!=2,a=e.i;n||(n=new Re(s*3));var f=function(Ve){var yt=n.length;if(Ve>yt){var qe=new Re(Math.max(yt*2,Ve));qe.set(n),n=qe}},h=e.f||0,l=e.p||0,p=e.b||0,y=e.l,w=e.d,b=e.m,x=e.n,v=s*8;do{if(!y){h=ct(t,l,1);var S=ct(t,l+1,3);if(l+=3,S)if(S==1)y=Mg,w=Vg,b=9,x=5;else if(S==2){var T=ct(t,l,31)+257,U=ct(t,l+10,15)+4,C=T+ct(t,l+5,31)+1;l+=14;for(var $=new Re(C),N=new Re(19),j=0;j<U;++j)N[ii[j]]=ct(t,l+j*3,7);l+=U*3;for(var V=Ds(N),Y=(1<<V)-1,ie=Et(N,V,1),j=0;j<C;){var ce=ie[ct(t,l,Y)];l+=ce&15;var _=ce>>4;if(_<16)$[j++]=_;else{var k=0,O=0;for(_==16?(O=3+ct(t,l,3),l+=2,k=$[j-1]):_==17?(O=3+ct(t,l,7),l+=3):_==18&&(O=11+ct(t,l,127),l+=7);O--;)$[j++]=k}}var F=$.subarray(0,T),z=$.subarray(T);b=Ds(F),x=Ds(z),y=Et(F,b,1),w=Et(z,x,1)}else Qe(1);else{var _=to(l)+4,B=t[_-4]|t[_-3]<<8,P=_+B;if(P>s){a&&Qe(0);break}o&&f(p+B),n.set(t.subarray(_,P),p),e.b=p+=B,e.p=l=P*8,e.f=h;continue}if(l>v){a&&Qe(0);break}}o&&f(p+131072);for(var X=(1<<b)-1,ye=(1<<x)-1,K=l;;K=l){var k=y[Fs(t,l)&X],J=k>>4;if(l+=k&15,l>v){a&&Qe(0);break}if(k||Qe(2),J<256)n[p++]=J;else if(J==256){K=l,y=null;break}else{var me=J-254;if(J>264){var j=J-257,le=Ss[j];me=ct(t,l,(1<<le)-1)+Fu[j],l+=le}var ue=w[Fs(t,l)&ye],Ue=ue>>4;ue||Qe(3),l+=ue&15;var z=jg[Ue];if(Ue>3){var le=Bs[Ue];z+=Fs(t,l)&(1<<le)-1,l+=le}if(l>v){a&&Qe(0);break}o&&f(p+131072);var Te=p+me;if(p<z){var Oe=i-z,ze=Math.min(z,Te);for(Oe+p<0&&Qe(3);p<ze;++p)n[p]=r[Oe+p]}for(;p<Te;p+=4)n[p]=n[p-z],n[p+1]=n[p+1-z],n[p+2]=n[p+2-z],n[p+3]=n[p+3-z];p=Te}}e.l=y,e.p=K,e.b=p,e.f=h,y&&(h=1,e.m=b,e.d=w,e.n=x)}while(!h);return p==n.length?n:Zu(n,0,p)},Tt=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},qn=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},js=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var s=n.length,i=n.slice();if(!s)return{t:zu,l:0};if(s==1){var o=new Re(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(T,U){return T.f-U.f}),n.push({s:-1,f:25001});var a=n[0],f=n[1],h=0,l=1,p=2;for(n[0]={s:-1,f:a.f+f.f,l:a,r:f};l!=s-1;)a=n[n[h].f<n[p].f?h++:p++],f=n[h!=l&&n[h].f<n[p].f?h++:p++],n[l++]={s:-1,f:a.f+f.f,l:a,r:f};for(var y=i[0].s,r=1;r<s;++r)i[r].s>y&&(y=i[r].s);var w=new nt(y+1),b=ci(n[l-1],w,0);if(b>e){var r=0,x=0,v=b-e,S=1<<v;for(i.sort(function(U,C){return w[C.s]-w[U.s]||U.f-C.f});r<s;++r){var _=i[r].s;if(w[_]>e)x+=S-(1<<b-w[_]),w[_]=e;else break}for(x>>=v;x>0;){var B=i[r].s;w[B]<e?x-=1<<e-w[B]++-1:++r}for(;r>=0&&x;--r){var P=i[r].s;w[P]==e&&(--w[P],++x)}b=e}return{t:new Re(w),l:b}},ci=function(t,e,n){return t.s==-1?Math.max(ci(t.l,e,n+1),ci(t.r,e,n+1)):e[t.s]=n},Xo=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new nt(++e),r=0,s=t[0],i=1,o=function(f){n[r++]=f},a=1;a<=e;++a)if(t[a]==s&&a!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=t[a]}return{c:n.subarray(0,r),n:e}},Kn=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},Mu=function(t,e,n){var r=n.length,s=to(e+2);t[s]=r&255,t[s+1]=r>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var i=0;i<r;++i)t[s+i+4]=n[i];return(s+4+r)*8},Jo=function(t,e,n,r,s,i,o,a,f,h,l){Tt(e,l++,n),++s[256];for(var p=js(s,15),y=p.t,w=p.l,b=js(i,15),x=b.t,v=b.l,S=Xo(y),_=S.c,B=S.n,P=Xo(x),T=P.c,U=P.n,C=new nt(19),$=0;$<_.length;++$)++C[_[$]&31];for(var $=0;$<T.length;++$)++C[T[$]&31];for(var N=js(C,7),j=N.t,V=N.l,Y=19;Y>4&&!j[ii[Y-1]];--Y);var ie=h+5<<3,ce=Kn(s,cn)+Kn(i,dr)+o,k=Kn(s,y)+Kn(i,x)+o+14+3*Y+Kn(C,j)+2*C[16]+3*C[17]+7*C[18];if(f>=0&&ie<=ce&&ie<=k)return Mu(e,l,t.subarray(f,f+h));var O,F,z,X;if(Tt(e,l,1+(k<ce)),l+=2,k<ce){O=Et(y,w,0),F=y,z=Et(x,v,0),X=x;var ye=Et(j,V,0);Tt(e,l,B-257),Tt(e,l+5,U-1),Tt(e,l+10,Y-4),l+=14;for(var $=0;$<Y;++$)Tt(e,l+3*$,j[ii[$]]);l+=3*Y;for(var K=[_,T],J=0;J<2;++J)for(var me=K[J],$=0;$<me.length;++$){var le=me[$]&31;Tt(e,l,ye[le]),l+=j[le],le>15&&(Tt(e,l,me[$]>>5&127),l+=me[$]>>12)}}else O=Zg,F=cn,z=zg,X=dr;for(var $=0;$<a;++$){var ue=r[$];if(ue>255){var le=ue>>18&31;qn(e,l,O[le+257]),l+=F[le+257],le>7&&(Tt(e,l,ue>>23&31),l+=Ss[le]);var Ue=ue&31;qn(e,l,z[Ue]),l+=X[Ue],Ue>3&&(qn(e,l,ue>>5&8191),l+=Bs[Ue])}else qn(e,l,O[ue]),l+=F[ue]}return qn(e,l,O[256]),l+F[256]},Kg=new eo([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),zu=new Re(0),Gg=function(t,e,n,r,s,i){var o=i.z||t.length,a=new Re(r+o+5*(1+Math.ceil(o/7e3))+s),f=a.subarray(r,a.length-s),h=i.l,l=(i.r||0)&7;if(e){l&&(f[0]=i.r>>3);for(var p=Kg[e-1],y=p>>13,w=p&8191,b=(1<<n)-1,x=i.p||new nt(32768),v=i.h||new nt(b+1),S=Math.ceil(n/3),_=2*S,B=function(je){return(t[je]^t[je+1]<<S^t[je+2]<<_)&b},P=new eo(25e3),T=new nt(288),U=new nt(32),C=0,$=0,N=i.i||0,j=0,V=i.w||0,Y=0;N+2<o;++N){var ie=B(N),ce=N&32767,k=v[ie];if(x[ce]=k,v[ie]=ce,V<=N){var O=o-N;if((C>7e3||j>24576)&&(O>423||!h)){l=Jo(t,f,0,P,T,U,$,j,Y,N-Y,l),j=C=$=0,Y=N;for(var F=0;F<286;++F)T[F]=0;for(var F=0;F<30;++F)U[F]=0}var z=2,X=0,ye=w,K=ce-k&32767;if(O>2&&ie==B(N-K))for(var J=Math.min(y,O)-1,me=Math.min(32767,N),le=Math.min(258,O);K<=me&&--ye&&ce!=k;){if(t[N+z]==t[N+z-K]){for(var ue=0;ue<le&&t[N+ue]==t[N+ue-K];++ue);if(ue>z){if(z=ue,X=K,ue>J)break;for(var Ue=Math.min(K,ue-2),Te=0,F=0;F<Ue;++F){var Oe=N-K+F&32767,ze=x[Oe],Ve=Oe-ze&32767;Ve>Te&&(Te=Ve,k=Oe)}}}ce=k,k=x[ce],K+=ce-k&32767}if(X){P[j++]=268435456|oi[z]<<18|Yo[X];var yt=oi[z]&31,qe=Yo[X]&31;$+=Ss[yt]+Bs[qe],++T[257+yt],++U[qe],V=N+z,++C}else P[j++]=t[N],++T[t[N]]}}for(N=Math.max(N,V);N<o;++N)P[j++]=t[N],++T[t[N]];l=Jo(t,f,h,P,T,U,$,j,Y,N-Y,l),h||(i.r=l&7|f[l/8|0]<<3,l-=7,i.h=v,i.p=x,i.i=N,i.w=V)}else{for(var N=i.w||0;N<o+h;N+=65535){var Se=N+65535;Se>=o&&(f[l/8|0]=h,Se=o),l=Mu(f,l+1,t.subarray(N,Se))}i.i=o}return Zu(a,0,r+to(l)+s)},Wg=function(){for(var t=new Int32Array(256),e=0;e<256;++e){for(var n=e,r=9;--r;)n=(n&1&&-306674912)^n>>>1;t[e]=n}return t}(),Yg=function(){var t=-1;return{p:function(e){for(var n=t,r=0;r<e.length;++r)n=Wg[n&255^e[r]]^n>>>8;t=n},d:function(){return~t}}},Xg=function(t,e,n,r,s){if(!s&&(s={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),o=new Re(i.length+t.length);o.set(i),o.set(t,i.length),t=o,s.w=i.length}return Gg(t,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):12+e.mem,n,r,s)},ui=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},Jg=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&ui(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var r=0;r<=n.length;++r)t[r+10]=n.charCodeAt(r)}},Qg=function(t){(t[0]!=31||t[1]!=139||t[2]!=8)&&Qe(6,"invalid gzip data");var e=t[3],n=10;e&4&&(n+=(t[10]|t[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!t[n++]);return n+(e&2)},ey=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},ty=function(t){return 10+(t.filename?t.filename.length+1:0)},ny=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Qe(6,"invalid zlib data"),(t[1]>>5&1)==+!e&&Qe(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function ry(t,e){return no(t,{i:2},e&&e.out,e&&e.dictionary)}function sy(t,e){e||(e={});var n=Yg(),r=t.length;n.p(t);var s=Xg(t,e,ty(e),8),i=s.length;return Jg(s,e),ui(s,i-8,n.d()),ui(s,i-4,r),s}function iy(t,e){var n=Qg(t);return n+8>t.length&&Qe(6,"invalid gzip data"),no(t.subarray(n,-8),{i:2},e&&e.out||new Re(ey(t)),e&&e.dictionary)}function oy(t,e){return no(t.subarray(ny(t,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}function ay(t,e){return t[0]==31&&t[1]==139&&t[2]==8?iy(t,e):(t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31?ry(t,e):oy(t,e)}var cy=typeof TextDecoder<"u"&&new TextDecoder,uy=0;try{cy.decode(zu,{stream:!0}),uy=1}catch{}const Tn=document.getElementById("files"),Qo=document.getElementById("previewer"),ea=document.getElementById("previewer-count");let qt=[];const fy=t=>{const e=["Bytes","KB","MB","GB","TB"];if(t===0)return"0 Byte";const n=Math.floor(Math.log(t)/Math.log(1024));return t/Math.pow(1024,n)+" "+e[n]},fi=document.getElementById("compress"),hy=document.getElementById("mainnet");Tn.addEventListener("change",async()=>{if(!Tn.files||Tn.files.length===0)return;let t;fi.checked?t=await Promise.all(Array.from(Tn.files).map(async n=>{const r=await n.arrayBuffer(),s=await sy(new Uint8Array(r));return new File([s],`${n.name}.gz`,{type:"application/x-gzip"})})):t=Array.from(Tn.files),Tn.value="",qt=[...qt,...t],ea.innerText=`${qt.length} files to inscribe`;for(let n of t){const r=document.createElement("div");r.innerHTML=`<a id="${n.name}" href="#" class="remove">[x]</a> - ${n.name} - ${fy(n.size)} bytes - ${n.type}<hr />`,Qo.appendChild(r)}const e=document.querySelectorAll(".remove");for(let n of e)n.addEventListener("click",r=>{r.preventDefault();const s=n.id;qt.find(o=>o.name===s)&&(qt=qt.filter(o=>o.name!==s),Qo.removeChild(n.parentElement),ea.innerText=`${qt.length} files to inscribe`)})});document.getElementById("run").addEventListener("click",()=>{const t=document.getElementById("taproot_address");Lu({log:e=>{const n=document.getElementById("log");if(e.includes("i0")&&!fi.checked){n.innerHTML+=`Tx ID: ${e.replace("i0","")}; after tx confirmation you can view it: <a target="_blank" href="https://ordinals.com/content/${e}">https://ordinals.com/content/${e}</a><br>`;return}else if(e.includes("i0")&&fi.checked){n.innerHTML+=`Tx ID: ${e.replace("i0","")}; after tx confirmation you can view it on our experimental viewer: <a target="_blank" href="https://ordinals.com/content/7b9cdb349d8a75152834437f6453b235d1884c188f4428d69db4b26fd3048ccbi0?q=${e}">https://ordinals.com/content/7b9cdb349d8a75152834437f6453b235d1884c188f4428d69db4b26fd3048ccbi0?q=${e}</a><br>`;return}n.innerHTML=e+"<br>"},address:t.value.trim(),tippingAddress:"bc1psupdj48keuw4s2zwmf456h8l2zvh66kcj858rdunvf0490ldj2uqskmta4",files:qt,tip:1e3,network:hy.checked?"mainnet":"testnet"})});Fg(t=>{const e=document.getElementById("log");e.innerHTML=t+"<br>"});document.getElementById("x").addEventListener("click",t=>{t.preventDefault(),localStorage.removeItem("pending");const e=document.getElementById("log");e.innerHTML="Old transaction is removed"});const ly=new URLSearchParams(window.location.search),ta=ly.get("q"),dy=async()=>{if(ta!==null){const t=await fetch(ta),e=t.headers.get("content-type");if(e===null)return;if(e.includes("zip")){const r=await t.arrayBuffer();let s;try{s=ay(new Uint8Array(r))}catch{s=new Uint8Array(r)}if(e===null)throw new Error("No content-type header");document.open(),document.write(new TextDecoder().decode(s)),document.close();return}}};dy().catch(t=>console.error(t))});export default py();
